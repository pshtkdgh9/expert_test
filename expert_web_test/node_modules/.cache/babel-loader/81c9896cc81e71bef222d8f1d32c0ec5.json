{"remainingRequest":"/home/search/apps/dj/node_modules/babel-loader/lib/index.js!/home/search/apps/dj/node_modules/eslint-loader/index.js??ref--13-0!/home/search/apps/dj/expert_web_v3/src/store.js","dependencies":[{"path":"/home/search/apps/dj/expert_web_v3/src/store.js","mtime":1657869953906},{"path":"/home/search/apps/dj/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/search/apps/dj/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/search/apps/dj/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZ2V0LCBwb3N0IH0gZnJvbSAnLi9hcGlVdGlscyc7CmltcG9ydCBYTFNYIGZyb20gJ3hsc3gnOwppbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJzsKVnVlLnVzZShWdWV4KTsgLy8gY29uc3QgaW5pdFdlaWdodCA9IG5ldyBBcnJheSg2KS5maWxsKDUwKQoKdmFyIHNoZWV0TmFtZXMgPSBbJ1Byb2plY3RzJywgJ1BhcGVycycsICdFeHBlcnRzJ107IC8vRG93bmxvYWRKc29uRGF0YShyZXNwb25zZS5kYXRhLCBkYXRhLm5hbWUgKyAiXyIgKyBkYXRhLnNpdGUsIHRydWUsIGZsYWcpOwoKZnVuY3Rpb24gRG93bmxvYWRKc29uRGF0YShKU09ORGF0YSwgRmlsZVRpdGxlLCBTaG93TGFiZWwsIEZsYWcpIHsKICAvLyBjb25zb2xlLmxvZygnSlNPTkRBVEEnLCBKU09ORGF0YSk7CiAgLy9JZiBKU09ORGF0YSBpcyBub3QgYW4gb2JqZWN0IHRoZW4gSlNPTi5wYXJzZSB3aWxsIHBhcnNlIHRoZSBKU09OIHN0cmluZyBpbiBhbiBPYmplY3QKICB2YXIgd2IgPSBYTFNYLnV0aWxzLmJvb2tfbmV3KCk7IC8vIGNvbnNvbGUubG9nKCdXQicsIHdiKTsKCiAgZnVuY3Rpb24gczJhYihzKSB7CiAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKHMubGVuZ3RoKTsgLy9jb252ZXJ0IHMgdG8gYXJyYXlCdWZmZXIKCiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zik7IC8vY3JlYXRlIHVpbnQ4YXJyYXkgYXMgdmlld2VyCgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZpZXdbaV0gPSBzLmNoYXJDb2RlQXQoaSkgJiAweEZGOwogICAgfSAvL2NvbnZlcnQgdG8gb2N0ZXQKCgogICAgcmV0dXJuIGJ1ZjsKICB9CgogIHZhciBvdXREYXRhID0gW107CgogIGZ1bmN0aW9uIGlzTG9vb3BhYmxlKHcpIHsKICAgIHZhciBhcnJheUNvbnN0cnVjdG9yID0gW10uY29uc3RydWN0b3I7CiAgICB2YXIgb2JqZWN0Q29uc3RydWN0b3IgPSB7fS5jb25zdHJ1Y3RvcjsKCiAgICBpZiAodyAhPT0gbnVsbCkgewogICAgICBpZiAody5jb25zdHJ1Y3RvciA9PT0gYXJyYXlDb25zdHJ1Y3RvcikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICBpZiAody5jb25zdHJ1Y3RvciA9PT0gb2JqZWN0Q29uc3RydWN0b3IpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9IC8vIGxldCBmaWVsZEl0ZW1zID0gT2JqZWN0LmtleXMoZmllbGRzW0ZsYWddKTsKCgogIGZvciAodmFyIGkgPSAwOyBpIDwgSlNPTkRhdGEubGVuZ3RoOyBpKyspIHsKICAgIHZhciB0ZW1wID0ge307IC8vIGxldCBqID0gMDsKCiAgICBmb3IgKHZhciBmaWVsZCBpbiBKU09ORGF0YVtpXSkgewogICAgICB2YXIgZkRhdGEgPSBKU09ORGF0YVtpXVtmaWVsZF07CgogICAgICBpZiAoaXNMb29vcGFibGUoZkRhdGEpKSB7CiAgICAgICAgdmFyIF90ZW1wID0gIiI7CgogICAgICAgIGZvciAodmFyIGluRGF0YSBpbiBmRGF0YSkgewogICAgICAgICAgX3RlbXAgKz0gaW5EYXRhICsgIiA6ICIgKyBmRGF0YVtpbkRhdGFdOwogICAgICAgIH0KCiAgICAgICAgZkRhdGEgPSBfdGVtcDsKICAgICAgfSAvLyBpZiAoZmllbGQgPT0gJ25hbWUnIHx8IGZpZWxkID09ICdpbnN0JykKICAgICAgLy8gCWZEYXRhID0gZkRhdGEucmVwbGFjZSgvLC9nLCAiOyIpOwoKCiAgICAgIGlmIChmRGF0YSA9PT0gdW5kZWZpbmVkIHx8IGZEYXRhID09ICdudWxsJyB8fCBmRGF0YSA9PSAiXCJOb25lXCIiIHx8IGZEYXRhID09IG51bGwpIGZEYXRhID0gJy0nOwogICAgICB0ZW1wW2ZpZWxkXSA9IGZEYXRhOyAvLyByb3cgKz0gZkRhdGEgKyAnLCc7CiAgICB9CgogICAgb3V0RGF0YS5wdXNoKHRlbXApOwogIH0KCiAgdmFyIG5ld1dvcmtzaGVldCA9IFhMU1gudXRpbHMuanNvbl90b19zaGVldChvdXREYXRhKTsKICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdiLCBuZXdXb3Jrc2hlZXQsIHNoZWV0TmFtZXNbRmxhZ10pOyAvLwogIC8vIGNvbnN0IHdvcmtzaGVldCA9IFhMU1gudXRpbHMuYW9hX3RvX3NoZWV0KGFycmF5T2ZBcnJheSk7CgogIG5ld1dvcmtzaGVldFsnIWNvbHMnXSA9IGZpdFRvQ29sdW1uKG91dERhdGEpOwoKICBmdW5jdGlvbiBmaXRUb0NvbHVtbihvdXREYXRhKSB7CiAgICAvLyBjb25zb2xlLmxvZygnT1VUREFUQScsIG91dERhdGEpOwogICAgLy8gZ2V0IG1heGltdW0gY2hhcmFjdGVyIG9mIGVhY2ggY29sdW1uCiAgICB2YXIgY29sU2l6ZSA9IFtdOwoKICAgIGZvciAodmFyIF9maWVsZCBpbiBvdXREYXRhWzBdKSB7CiAgICAgIC8vIG91dERhdGFbMF1bZmllbGRdCiAgICAgIC8vIGNvbnNvbGUubG9nKCdPVVREQVRBWzBdW0ZJRUxEXScsIG91dERhdGFbMF1bZmllbGRdKTsKICAgICAgdmFyIHdjaCA9IG91dERhdGFbMF1bX2ZpZWxkXS5sZW5ndGg7CiAgICAgIGlmICh3Y2ggPT0gMCB8fCB3Y2ggPT09IHVuZGVmaW5lZCkgd2NoID0gMjA7CiAgICAgIGlmICh3Y2ggPiAxMDApIHdjaCA9IDEwMDsKICAgICAgY29sU2l6ZS5wdXNoKHsKICAgICAgICAnd2NoJzogd2NoCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBjb2xTaXplOwogIH0KCiAgdmFyIHdib3V0ID0gWExTWC53cml0ZSh3YiwgewogICAgYm9va1R5cGU6ICd4bHN4JywKICAgIHR5cGU6ICdiaW5hcnknCiAgfSk7CiAgc2F2ZUFzKG5ldyBCbG9iKFtzMmFiKHdib3V0KV0sIHsKICAgIHR5cGU6ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iCiAgfSksIEZpbGVUaXRsZSArICcueGxzeCcpOyAvLyBsZXQgYXJyRGF0YSA9IHR5cGVvZiBKU09ORGF0YSAhPSAnb2JqZWN0JyA/IEpTT04ucGFyc2UoSlNPTkRhdGEpIDogSlNPTkRhdGE7CiAgLy8gbGV0IENTViA9ICcnOwogIC8vIGlmIChTaG93TGFiZWwpIHsKICAvLyAJbGV0IHJvdyA9ICIiOwogIC8vCiAgLy8gCWxldCBmaWVsZEl0ZW1zID0gT2JqZWN0LmtleXMoZmllbGRzW0ZsYWddKTsKICAvLyAJZmllbGRJdGVtcy5mb3JFYWNoKChmaWVsZCkgPT4gewogIC8vIAkJcm93ICs9IGZpZWxkc1tGbGFnXVtmaWVsZF0gKyAnLCc7CiAgLy8gCX0pOwogIC8vIAlyb3cgPSByb3cuc2xpY2UoMCwgLTEpOwogIC8vIAlDU1YgKz0gcm93ICsgJ1xyXG4nOwogIC8vIH0KICAvLyBmb3IgKHZhciBpID0gMDsgaSA8IGFyckRhdGEubGVuZ3RoOyBpKyspIHsKICAvLyAJbGV0IHJvdyA9ICIiOwogIC8vIAlmb3IgKGxldCBmaWVsZCBpbiBmaWVsZHNbRmxhZ10pIHsKICAvLyAJCWxldCBmRGF0YSA9IGFyckRhdGFbaV1bZmllbGRdOwogIC8vIAkJaWYgKGZpZWxkID09ICduYW1lJyB8fCBmaWVsZCA9PSAnaW5zdCcpCiAgLy8gCQkJZkRhdGEgPSBmRGF0YS5yZXBsYWNlKC8sL2csICI7Iik7CiAgLy8gCQlpZiAoZkRhdGEgPT09IHVuZGVmaW5lZCB8fCBmRGF0YSA9PSAnbnVsbCcgfHwgZkRhdGEgPT0gIlwiTm9uZVwiIikKICAvLyAJCQlmRGF0YSA9ICctJzsKICAvLyAJCXJvdyArPSBmRGF0YSArICcsJzsKICAvLyAJfQogIC8vIAlyb3cuc2xpY2UoMCwgcm93Lmxlbmd0aCAtIDEpOwogIC8vIAlDU1YgKz0gcm93ICsgJ1xyXG4nOwogIC8vIH0KICAvLyBpZiAoQ1NWID09ICcnKSB7CiAgLy8gCWFsZXJ0KCJJbnZhbGlkIGRhdGEiKTsKICAvLyAJcmV0dXJuOwogIC8vIH0KICAvLyB2YXIgZmlsZW5hbWUgPSBGaWxlVGl0bGU7CiAgLy8gdmFyIGJsb2IgPSBuZXcgQmxvYihbIlx1ZmVmZiIgKyBDU1ZdLCB7CiAgLy8gCXR5cGU6ICd0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04OycKICAvLyB9KTsKICAvLyBpZiAobmF2aWdhdG9yLm1zU2F2ZUJsb2IpIHsgLy8gSUUgMTArCiAgLy8gCW5hdmlnYXRvci5tc1NhdmVCbG9iKGJsb2IsIGZpbGVuYW1lKTsKICAvLyB9IGVsc2UgewogIC8vIAl2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAvLyAJaWYgKGxpbmsuZG93bmxvYWQgIT09IHVuZGVmaW5lZCkgeyAvLyBmZWF0dXJlIGRldGVjdGlvbgogIC8vIAkJdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgLy8gCQlsaW5rLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHVybCk7CiAgLy8gCQlsaW5rLnN0eWxlID0gInZpc2liaWxpdHk6aGlkZGVuIjsKICAvLyAJCWxpbmsuZG93bmxvYWQgPSBmaWxlbmFtZSArICIuY3N2IjsKICAvLyAJCWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgLy8gCQlsaW5rLmNsaWNrKCk7CiAgLy8gCQlkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogIC8vIAl9CiAgLy8gfQp9Cgp2YXIgbXNnID0gewogIHRpbWVvdXQ6IDMwMDAsCiAgLy8zcwogIG9rOiAi7KCV7IOB7KCB7J24IOydkeuLteyeheuLiOuLpC4iLAogIC8vIGhpc3Rvcnlfb2s6ICLqsoDsg4kg66qp66Gd7J2EIOygleyDgeyggeycvOuhnCDrtojrn6zsmZTsirXri4jri6QuIiwKICBmYWlsOiAi67mE7KCV7IOB7KCB7J24IOydkeuLteyeheuLiOuLpC4iLAogIHJ1bjogIuuypOy5mOuniO2CueydtCDsi5zsnpHrkJjsl4jsirXri4jri6QuIgp9OyAvL3NuYWNrYmFyCgpleHBvcnQgdmFyIHNob3dTbmFjayA9IGZ1bmN0aW9uIHNob3dTbmFjayhjdHh0LCByZXApIHsKICB2YXIgbXNncCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogIiI7CgogIGlmIChtc2dwID09PSAiIikgewogICAgaWYgKHJlcC5zdGF0dXMgPT0gMjAwIHx8IHJlcC5zdGF0dXMgPT0gMjA0KSBjdHh0LmNvbW1pdCgnc2hvd1NuYWNrJywgbXNnLm9rKTtlbHNlIGlmIChyZXAuc3RhdHVzID09IDQwNCkgY3R4dC5jb21taXQoJ3Nob3dTbmFjaycsIG1zZy5mYWlsKTsKICB9IGVsc2UgewogICAgY3R4dC5jb21taXQoJ3Nob3dTbmFjaycsIG1zZ3ApOwogIH0KfTsgLy9zbmFja2JhcgoKZXhwb3J0IHZhciBzaG93YWxhcm0gPSBmdW5jdGlvbiBzaG93YWxhcm0oY3R4dCwgcmVwKSB7CiAgdmFyIG1zZ3AgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICIiOwoKICBpZiAobXNncCA9PT0gIiIpIHsKICAgIGlmIChyZXAuc3RhdHVzID09IDIwMCB8fCByZXAuc3RhdHVzID09IDIwNCkgY3R4dC5jb21taXQoJ3Nob3dTbmFjaycsIG1zZy5vayk7ZWxzZSBpZiAocmVwLnN0YXR1cyA9PSA0MDQpIGN0eHQuY29tbWl0KCdzaG93U25hY2snLCBtc2cuZmFpbCk7CiAgfSBlbHNlIHsKICAgIGN0eHQuY29tbWl0KCdzaG93YWxhcm0nLCBtc2dwKTsKICB9Cn07IC8vbG9hZGluZyBiYXIKCmV4cG9ydCB2YXIgc2V0TG9hZGluZyA9IGZ1bmN0aW9uIHNldExvYWRpbmcoY3R4dCwgaXNMb2FkaW5nKSB7CiAgY3R4dC5jb21taXQoJ3NldElzTG9hZGluZycsIGlzTG9hZGluZyk7Cn07CmV4cG9ydCB2YXIgc3RvcmUgPSBuZXcgVnVleC5TdG9yZSh7CiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1zdGF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgc3RhdGU6IHsKICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICBzbmFjazogewogICAgICBpc1Nob3c6IGZhbHNlLAogICAgICBtc2c6ICIiCiAgICB9LAogICAgaXNNaW5pOiBmYWxzZSwKICAgIGhpc3RvcmllczogW10sCiAgICBhY3RpdmVUYWI6IG51bGwsCiAgICBhY3RpdmVJbm5lclRhYjoge30sCiAgICB0YWJzOiBbXSwKICAgIHNpdGVzOiB7fSwKICAgIGludGVncmF0aW9uczogW10sCiAgICBpZ0lEOiAtMSwKICAgIGlnS2V5d29yZDogIiIsCiAgICBmaWx0ZXJzOiB7CiAgICAgICJwcm9qZWN0Ijoge30sCiAgICAgICJwYXBlciI6IHt9CiAgICB9LAogICAgaWdUb3RhbDogMCwKICAgIGlnUmF3OiB7fSwKICAgIHByZXZmSWQ6IDAsCiAgICByYW5raW5zdDogW10sCiAgICBhX3VybDogW10gLy8gc2VsZWN0ZWQ6IHsKICAgIC8vIAkJJ2luc3QnOiBbXSwKICAgIC8vIAkJJ3JzYyc6IFtdLAogICAgLy8gCQknZnVuZCc6IFtdLAogICAgLy8gCQkneWVhcic6IFtdCiAgICAvLyAJfSwKICAgIC8vIAkncGFwZXInOiB7CiAgICAvLyAJCSdpbnN0JzogW10sCiAgICAvLyAJCSd5ZWFyJzogW10sCiAgICAvLyAJCSdqb3VybmFsJzogW10sCiAgICAvLyAJCSdsYW5nJzogW10KICAgIC8vIAl9LAogICAgLy8gfQoKICB9LAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tL3N0YXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLW11dGF0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgbXV0YXRpb25zOiB7CiAgICBzZXRJc01pbmk6IGZ1bmN0aW9uIHNldElzTWluaShzdGF0ZSwgZmxhZykgewogICAgICBzdGF0ZS5pc01pbmkgPSBmbGFnOwogICAgfSwKICAgIGNsb3NlVGFiOiBmdW5jdGlvbiBjbG9zZVRhYihzdGF0ZSwgaWQpIHsKICAgICAgc3RhdGUudGFicy5zcGxpY2Uoc3RhdGUudGFicy5maW5kSW5kZXgoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4geC5faWQgPT0gaWQ7CiAgICAgIH0pLCAxKTsgLy9zdGF0ZS5hY3RpdmVJbm5lclRhYltkSGlzdG9yeS5faWRdID0gMDsKCiAgICAgIGlmIChzdGF0ZS50YWJzLmxlbmd0aCA+IDApIHN0YXRlLmFjdGl2ZVRhYiA9IHN0YXRlLnRhYnNbMF0uX2lkOyAvLyBpZihpZHggIT0gc3RhdGUudGFicy5sZW5ndGgpewogICAgICAvLyAJCXN0YXRlLnRhYnMuCiAgICAgIC8vIH0KICAgICAgLy8KICAgICAgLy8gaWYgKHN0YXRlLmFjdGl2ZVRhYiA9PSBpZHgpCiAgICAgIC8vIAlzdGF0ZS5hY3RpdmVUYWIgPSBzdGF0ZS50YWJzLmxlbmd0aDsKICAgIH0sCiAgICAvL3NuYWNrYmFyCiAgICBjbG9zZVNuYWNrOiBmdW5jdGlvbiBjbG9zZVNuYWNrKHN0YXRlKSB7CiAgICAgIHN0YXRlLnNuYWNrLmlzU2hvdyA9IGZhbHNlOwogICAgfSwKICAgIHNob3dTbmFjazogZnVuY3Rpb24gc2hvd1NuYWNrKHN0YXRlLCBtZXNzYWdlKSB7CiAgICAgIHN0YXRlLnNuYWNrID0gewogICAgICAgIGlzU2hvdzogZmFsc2UsCiAgICAgICAgLy8gY29sb3I6ICJjeWFuIGRhcmtlbi0yIiwKICAgICAgICBtc2c6IG1lc3NhZ2UsCiAgICAgICAgdGltZW91dDogbXNnLnRpbWVvdXQKICAgICAgfTsgLy8gaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnb2JqZWN0JykgewogICAgICAvLyAJbGV0IHsKICAgICAgLy8gCQltc2csCiAgICAgIC8vIAkJY29sb3IKICAgICAgLy8KICAgICAgLy8gCX0gPSBtZXNzYWdlOwogICAgICAvLyAJc3RhdGUuc25hY2sgPSB7CiAgICAgIC8vIAkJaXNTaG93OiB0cnVlLAogICAgICAvLyAJCW1zZywKICAgICAgLy8gCQljb2xvciwKICAgICAgLy8gCQl0aW1lb3V0OiBtc2cudGltZW91dAogICAgICAvLyAJfTs3CiAgICAgIC8vIH0gZWxzZSB7CiAgICAgIC8vIAlzdGF0ZS5zbmFjayA9IHsKICAgICAgLy8gCQlpc1Nob3c6IHRydWUsCiAgICAgIC8vIAkJY29sb3I6ICJjeWFuIGRhcmtlbi0yIiwKICAgICAgLy8gCQltc2c6IG1lc3NhZ2UsCiAgICAgIC8vIAkJdGltZW91dDogbXNnLnRpbWVvdXQKICAgICAgLy8gCX0KICAgICAgLy8gfQogICAgfSwKICAgIHNob3dhbGFybTogZnVuY3Rpb24gc2hvd2FsYXJtKHN0YXRlLCBtZXNzYWdlKSB7CiAgICAgIHN0YXRlLnNuYWNrID0gewogICAgICAgIGlzU2hvdzogdHJ1ZSwKICAgICAgICAvLyBjb2xvcjogImN5YW4gZGFya2VuLTIiLAogICAgICAgIG1zZzogbWVzc2FnZSwKICAgICAgICB0aW1lb3V0OiBtc2cudGltZW91dAogICAgICB9OwogICAgfSwKICAgIHNldElzTG9hZGluZzogZnVuY3Rpb24gc2V0SXNMb2FkaW5nKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLmlzTG9hZGluZyA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0SGlzdG9yaWVzOiBmdW5jdGlvbiBzZXRIaXN0b3JpZXMoc3RhdGUsIGhpc3RvcmllcykgewogICAgICBpZiAoaGlzdG9yaWVzLmxlbmd0aCA+IDApIHsKICAgICAgICBoaXN0b3JpZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbSk7CiAgICAgICAgICBpdGVtLnNpdGVzLmZvckVhY2goZnVuY3Rpb24gKHNpdGUpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2l0ZSk7CiAgICAgICAgICAgIHNpdGUuX2lkID0gaXRlbS5faWQ7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBzdGF0ZS5oaXN0b3JpZXMgPSBoaXN0b3JpZXM7CiAgICAgIH0gLy8gc3RhdGUuaGlzdG9yaWVzLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgLy8gCWxldCB0b3RhbCA9IDAKICAgICAgLy8gCWl0ZW0uc2l0ZXMuZm9yRWFjaCgoc2l0ZSwgaSkgPT4gewogICAgICAvLyAJCWl0ZW1bc2l0ZV0gPSBNYXRoLnJhbmRvbSgpICogMTAwCiAgICAgIC8vIAkJaWYgKGkgIT0gMCkgewogICAgICAvLyAJCQl0b3RhbCArPSBpdGVtW3NpdGVdCiAgICAgIC8vIAkJfQogICAgICAvLyAJfSk7CiAgICAgIC8vIAlpdGVtWydBTEwnXSA9IHRvdGFsIC8gKGl0ZW0uc2l0ZXMubGVuZ3RoIC0gMSk7CiAgICAgIC8vIH0pOwoKICAgIH0sCiAgICBhZGRIaXN0b3J5OiBmdW5jdGlvbiBhZGRIaXN0b3J5KHN0YXRlLCBoaXN0b3J5KSB7CiAgICAgIHN0YXRlLmhpc3Rvcmllcy51bnNoaWZ0KGhpc3RvcnkpOwogICAgfSwKICAgIGFkZERldGFpbEhpc3Rvcnk6IGZ1bmN0aW9uIGFkZERldGFpbEhpc3Rvcnkoc3RhdGUsIGRIaXN0b3J5KSB7CiAgICAgIHZhciBpZHggPSBzdGF0ZS5oaXN0b3JpZXMuZmluZEluZGV4KGZ1bmN0aW9uIChoKSB7CiAgICAgICAgcmV0dXJuIGguX2lkID09PSBkSGlzdG9yeS5faWQ7CiAgICAgIH0pOwogICAgICBWdWUuc2V0KHN0YXRlLmhpc3RvcmllcywgaWR4LCBkSGlzdG9yeSk7CiAgICAgIHN0YXRlLnRhYnMucHVzaChkSGlzdG9yeSk7IC8vIHN0YXRlLmFjdGl2ZVRhYiA9IGRIaXN0b3J5Ll9pZDsKCiAgICAgIHN0YXRlLmFjdGl2ZVRhYiA9IHN0YXRlLnRhYnMubGVuZ3RoIC0gMTsKICAgICAgc3RhdGUuYWN0aXZlSW5uZXJUYWJbc3RhdGUudGFicy5sZW5ndGggLSAxXSA9IDA7CiAgICB9LAogICAgYWRkRXhwZXJ0czogZnVuY3Rpb24gYWRkRXhwZXJ0cyhzdGF0ZSwgZXhwZXJ0cykgewogICAgICBleHBlcnRzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZXhwZXJ0KSB7CiAgICAgICAgZXhwZXJ0LmtleUlkID0gZXhwZXJ0cy5faWQ7CiAgICAgIH0pOwogICAgICB2YXIgaWR4ID0gc3RhdGUudGFicy5maW5kSW5kZXgoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4geC5faWQgPT0gZXhwZXJ0cy5faWQ7CiAgICAgIH0pOwogICAgICBzdGF0ZS50YWJzW2lkeF0uc2l0ZXNbZXhwZXJ0cy5faWR4XS5saXN0cyA9IGV4cGVydHMuZGF0YTsKICAgIH0sCiAgICBhZGRFeHBlcnRSZWxhdGlvbjogZnVuY3Rpb24gYWRkRXhwZXJ0UmVsYXRpb24oc3RhdGUsIHJlbCkgewogICAgICB2YXIgc2l0ZSA9IHN0YXRlLnRhYi5zaXRlc1tyZWwuX2lkeF07CgogICAgICBpZiAocmVsLmZsYWcpIHsKICAgICAgICAvLyB0aGlzLgogICAgICAgIHNpdGUubm9kZXMgPSBbXTsKICAgICAgICBzaXRlLmxpbmtzID0gW107CiAgICAgIH0KCiAgICAgIHNpdGUubm9kZXMgPSBzaXRlLm5vZGVzLmNvbmNhdChyZWwuZGF0YS5hc1Jlc3VsdHMpOwogICAgICByZWwuZGF0YS5yZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBzaXRlLmxpbmtzLnB1c2goewogICAgICAgICAgInNpZCI6IGl0ZW0uc291cmNlQUlkLAogICAgICAgICAgInRpZCI6IGl0ZW0udGFyZ2V0QUlkLAogICAgICAgICAgIm5hbWUiOiBpdGVtLmNvdW50LAogICAgICAgICAgX3N2Z0F0dHJzOiB7CiAgICAgICAgICAgICJzdHJva2Utd2lkdGgiOiBpdGVtLmNvdW50IC8gMgogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBzZXRTaXRlczogZnVuY3Rpb24gc2V0U2l0ZXMoc3RhdGUsIHNpdGVzKSB7CiAgICAgIHN0YXRlLnNpdGVzID0gc2l0ZXM7CiAgICB9LAogICAgc2V0RmlsdGVyczogZnVuY3Rpb24gc2V0RmlsdGVycyhzdGF0ZSwgZmlsdGVycykgewogICAgICBkZWxldGUgZmlsdGVyc1snX2lkJ107CiAgICAgIGRlbGV0ZSBmaWx0ZXJzWydrZXlJZCddOwogICAgICBkZWxldGUgZmlsdGVyc1snZklkJ107CgogICAgICBpZiAoT2JqZWN0LmtleXMoZmlsdGVycykubGVuZ3RoID4gMCkgewogICAgICAgIE9iamVjdC5rZXlzKGZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24gKGZpbHRlcktleSkgewogICAgICAgICAgT2JqZWN0LmtleXMoZmlsdGVyc1tmaWx0ZXJLZXldKS5mb3JFYWNoKGZ1bmN0aW9uIChmZikgewogICAgICAgICAgICBpZiAoZmlsdGVyc1tmaWx0ZXJLZXldW2ZmXS5zZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSBmaWx0ZXJzW2ZpbHRlcktleV1bZmZdLnNlbGVjdGVkID0gW107CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoZmlsdGVyc1tmaWx0ZXJLZXldLmluc3QgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBmaWx0ZXJzW2ZpbHRlcktleV0uaW5zdC5saXN0ID0gT2JqZWN0LmtleXMoZmlsdGVyc1tmaWx0ZXJLZXldLmluc3QubGlzdCkuc2xpY2UoMCwgMTApLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBrZXkpIHsKICAgICAgICAgICAgICAvLyBrZXkgPSBrZXkucmVwbGFjZUFsbCgnXicsICIuIik7CiAgICAgICAgICAgICAgcmVzdWx0W2tleS5yZXBsYWNlQWxsKCdeJywgIi4iKV0gPSBmaWx0ZXJzW2ZpbHRlcktleV0uaW5zdC5saXN0W2tleV07CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfSwge30pOyAvLyBmaWx0ZXJzW2ZpbHRlcktleV0uaW5zdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAgIC8vIAlpdGVtID0gaXRlbQogICAgICAgICAgICAvLyB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZmlsdGVyc1tmaWx0ZXJLZXldLmpvdXJuYWwgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBmaWx0ZXJzW2ZpbHRlcktleV0uam91cm5hbC5saXN0ID0gT2JqZWN0LmtleXMoZmlsdGVyc1tmaWx0ZXJLZXldLmpvdXJuYWwubGlzdCkuc2xpY2UoMCwgMTApLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBrZXkpIHsKICAgICAgICAgICAgICAvLyBrZXkgPSBrZXkucmVwbGFjZUFsbCgnXicsICIuIik7CiAgICAgICAgICAgICAgcmVzdWx0W2tleS5yZXBsYWNlQWxsKCdeJywgIi4iKV0gPSBmaWx0ZXJzW2ZpbHRlcktleV0uam91cm5hbC5saXN0W2tleV07CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfSwge30pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChmaWx0ZXJzW2ZpbHRlcktleV0ueWVhciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHZhciB0ZW1wID0gbmV3IE1hcCgpOwogICAgICAgICAgICBPYmplY3Qua2V5cyhmaWx0ZXJzW2ZpbHRlcktleV0ueWVhci5saXN0KS5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgIHRlbXAuc2V0KHgsIGZpbHRlcnNbZmlsdGVyS2V5XS55ZWFyLmxpc3RbeF0pOwogICAgICAgICAgICB9KTsgLy8gbGV0IHR0ZW1wID0ge307CgogICAgICAgICAgICBjb25zb2xlLmxvZygnVEVNUCcsIHRlbXApOyAvLwogICAgICAgICAgICAvLyBydHYucHJvamVjdFtmXS5saXN0ID0gdGVtcDsKCiAgICAgICAgICAgIGZpbHRlcnNbZmlsdGVyS2V5XS55ZWFyLmxpc3QgPSB0ZW1wOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBzdGF0ZS5maWx0ZXJzID0gZmlsdGVyczsKICAgICAgY29uc29sZS5sb2coJ0ZJTFRFUlMnLCBmaWx0ZXJzKTsKICAgICAgY29uc29sZS5sb2coJ0ZpbHRlcnMgY29tcGxldGVkJyk7CiAgICB9LAogICAgc2V0SW50ZWdyYXRpb25SZXN1bHQ6IGZ1bmN0aW9uIHNldEludGVncmF0aW9uUmVzdWx0KHN0YXRlLCBpZ1Jlc3VsdCkgewogICAgICAvLyBsZXQgc2l0ZXMgPSBbJ1NjaWVuY2VvbicsICdOVElTJywgJ0RCUElBJywgJ0tDSSddOwogICAgICAvLyBsZXQgaW5zdCA9ICIiOwogICAgICAvLyBsZXQgbnVtUGFwZXJzID0gMDsKICAgICAgLy8gbGV0IG51bVByb2plY3RzID0gMDsKICAgICAgLy8gbGV0IG51bUNpdGF0aW9ucyA9IDA7CiAgICAgIC8vIGxldCBudW1Db29wID0gMDsKICAgICAgLy8gbGV0IHJlY1llYXIgPSAwOwogICAgICBpZ1Jlc3VsdC5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoYXV0aG9yKSB7CiAgICAgICAgLy8gc2l0ZXMuZm9yRWFjaCgoc2l0ZSkgPT4gewogICAgICAgIC8vIAlpZiAoYXV0aG9yW3NpdGVdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAvLyAJCS8vIGluc3QgPSBhdXRob3Jbc2l0ZV0uaW5zdDsKICAgICAgICAvLwogICAgICAgIC8vIAkJaWYgKHNpdGUgPT0gJ05USVMnKSB7CiAgICAgICAgLy8gCQkJbnVtUHJvamVjdHMgKz0gYXV0aG9yW3NpdGVdLnBhcGVycy5sZW5ndGg7CiAgICAgICAgLy8gCQl9IGVsc2UgewogICAgICAgIC8vIAkJCW51bVBhcGVycyArPSBhdXRob3Jbc2l0ZV0ucGFwZXJzLmxlbmd0aDsKICAgICAgICAvLyAJCX0KICAgICAgICAvLyAJfQogICAgICAgIC8vIH0pOwogICAgICAgIC8vIGF1dGhvci5yYXcuZm9yRWFjaCgoX3JhdykgPT4gewogICAgICAgIC8vIAlpZiAoX3Jhdy5zaXRlICE9ICdOVElTJykgewogICAgICAgIC8vIAkJaWYgKHBhcnNlSW50KF9yYXcuaXNzdWVfeWVhcikgPiByZWNZZWFyKSB7CiAgICAgICAgLy8gCQkJcmVjWWVhciA9IHBhcnNlSW50KF9yYXcuaXNzdWVfeWVhcik7CiAgICAgICAgLy8gCQl9CiAgICAgICAgLy8gCQludW1DaXRhdGlvbnMgKz0gcGFyc2VJbnQoX3Jhdy5jaXRhdGlvbik7CiAgICAgICAgLy8gCX0KICAgICAgICAvLyB9KTsKICAgICAgICAvLyBhdXRob3IuaW5zdCA9IGluc3Q7CiAgICAgICAgYXV0aG9yLm51bVBhcGVycyArPSAi6rG0IjsKICAgICAgICBhdXRob3IucktleXdvcmRzID0gJy0nOyAvLyBhdXRob3IuY29vcEhpc3QgPSAnLSc7CiAgICAgICAgLy8gYXV0aG9yLnNjb3JlID0gJy0nOwoKICAgICAgICBhdXRob3IubmV0d29yayA9ICctJzsKICAgICAgICBhdXRob3Iud2ViU2VhcmNoID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3E9JyArIGF1dGhvci5uYW1lICsgIisiICsgYXV0aG9yLmluc3Q7CiAgICAgICAgYXV0aG9yLm51bVByb2plY3RzICs9ICLqsbQiOwogICAgICAgIGF1dGhvci50b3RhbENpdGF0aW9uICs9ICLtmowiOwogICAgICAgIGF1dGhvci50b3RhbENvb3AgKz0gIuqxtCI7CgogICAgICAgIGlmIChhdXRob3IucmVjZW50WWVhciA9PSAnMCcpIHsKICAgICAgICAgIGF1dGhvci5yZWNlbnRZZWFyID0gJy0nOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhdXRob3IucmVjZW50WWVhciArPSAi64WEIjsKICAgICAgICB9IC8vYXV0aG9yLm5ndkNvb3AgPSAnLSc7CiAgICAgICAgLy8gcmVjWWVhciA9IDA7CiAgICAgICAgLy8gbnVtQ29vcCA9IDA7CiAgICAgICAgLy8gbnVtQ2l0YXRpb25zID0gMDsKICAgICAgICAvLyBudW1Qcm9qZWN0cyA9IDA7CiAgICAgICAgLy8gbnVtUGFwZXJzID0gMDsKICAgICAgICAvLyBpbnN0ID0gIiI7CgogICAgICB9KTsKICAgICAgc3RhdGUuaW50ZWdyYXRpb25zID0gaWdSZXN1bHQucmVzdWx0OwogICAgICBjb25zb2xlLmxvZygnU1RBVEUuSU5URUdSQVRJT05TICcsIHN0YXRlLmludGVncmF0aW9ucyk7CiAgICB9LAogICAgc2V0SW50ZWdyYXRpb25SYXc6IGZ1bmN0aW9uIHNldEludGVncmF0aW9uUmF3KHN0YXRlLCBpZ1JhdykgewogICAgICBzdGF0ZS5pZ1Jhd1tpZ1Jhdy5pZHhdID0gaWdSYXc7IC8vIHN0YXRlLmludGVncmF0aW9ucy5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgIC8vIAlpZiAoaXRlbS5pZHggPT0gaWdSYXcuaWR4KSB7CiAgICAgIC8vIAkJaXRlbS5yYXdzID0gaWdSYXc7CiAgICAgIC8vIAkJY29uc29sZS5sb2coJ0lURU0uUkFXUyAnLCBpdGVtLnJhd3MpOwogICAgICAvLyAJCXJldHVybjsKICAgICAgLy8gCX0KICAgICAgLy8gfSk7CiAgICB9LAogICAgZGVsZXRlU2VsZWN0ZWQ6IGZ1bmN0aW9uIGRlbGV0ZVNlbGVjdGVkKHN0YXRlKSB7CiAgICAgIHN0YXRlLnNlbGVjdGVkID0gewogICAgICAgICdwcm9qZWN0JzogewogICAgICAgICAgJ2luc3QnOiBbXSwKICAgICAgICAgICdyc2MnOiBbXSwKICAgICAgICAgICdmdW5kJzogW10sCiAgICAgICAgICAneWVhcic6IFtdCiAgICAgICAgfSwKICAgICAgICAncGFwZXInOiB7CiAgICAgICAgICAnaW5zdCc6IFtdLAogICAgICAgICAgJ3llYXInOiBbXSwKICAgICAgICAgICdqb3VybmFsJzogW10sCiAgICAgICAgICAnbGFuZyc6IFtdCiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIHNldFNlbGVjdGVkOiBmdW5jdGlvbiBzZXRTZWxlY3RlZChzdGF0ZSwgc2VsKSB7CiAgICAgIE9iamVjdC5rZXlzKHNlbC5zZWxlY3RlZFsncGFwZXInXSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKHNlbC5maWx0ZXJzWydwYXBlciddW2tleV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgc2VsLnNlbGVjdGVkWydwYXBlciddW2tleV0gPSBzZWwuc2VsZWN0ZWRbJ3BhcGVyJ11ba2V5XS5tYXAoZnVuY3Rpb24gKGZpbHRlckl0ZW0pIHsKICAgICAgICAgICAgdmFyIHJ0diA9IC0xOwogICAgICAgICAgICBPYmplY3Qua2V5cyhzZWwuZmlsdGVyc1sncGFwZXInXVtrZXldLmxpc3QpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGlkeCkgewogICAgICAgICAgICAgIGlmIChpdGVtID09IGZpbHRlckl0ZW0pIHsKICAgICAgICAgICAgICAgIHJ0diA9IGlkeDsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gcnR2OwogICAgICAgICAgfSk7CiAgICAgICAgICBzZWwuc2VsZWN0ZWRbJ3BhcGVyJ11ba2V5XSA9IHNlbC5zZWxlY3RlZFsncGFwZXInXVtrZXldLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgICByZXR1cm4geCA+PSAwOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlbC5zZWxlY3RlZFsncGFwZXInXVtrZXldID0gW107CiAgICAgICAgfQogICAgICB9KTsKICAgICAgT2JqZWN0LmtleXMoc2VsLnNlbGVjdGVkWydwcm9qZWN0J10pLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmIChzZWwuZmlsdGVyc1sncHJvamVjdCddW2tleV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgaWYgKGtleSAhPSAncnNjJyAmJiBrZXkgIT0gJ2Z1bmQnKSB7CiAgICAgICAgICAgIHNlbC5zZWxlY3RlZFsncHJvamVjdCddW2tleV0gPSBzZWwuc2VsZWN0ZWRbJ3Byb2plY3QnXVtrZXldLm1hcChmdW5jdGlvbiAoZmlsdGVySXRlbSkgewogICAgICAgICAgICAgIHZhciBydHYgPSAtMTsKICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzZWwuZmlsdGVyc1sncHJvamVjdCddW2tleV0ubGlzdCkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaWR4KSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PSBmaWx0ZXJJdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJ0diA9IGlkeDsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBydHY7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZWwuc2VsZWN0ZWRbJ3Byb2plY3QnXVtrZXldID0gc2VsLnNlbGVjdGVkWydwcm9qZWN0J11ba2V5XS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICByZXR1cm4geCA+PSAwOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VsLnNlbGVjdGVkWydwcm9qZWN0J11ba2V5XSA9IFtdOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHN0YXRlLnNlbGVjdGVkID0gc2VsLnNlbGVjdGVkOwogICAgfSwKICAgIHNldFJhbms6IGZ1bmN0aW9uIHNldFJhbmsoc3RhdGUsIHJhbmspIHsKICAgICAgc3RhdGUucmFua2luc3QgPSByYW5rLkluc3RzOwogICAgfSwKICAgIHNldE50aXM6IGZ1bmN0aW9uIHNldE50aXMoc3RhdGUsIGF1dGhvcl9saXN0KSB7CiAgICAgIHN0YXRlLmFfdXJsID0gYXV0aG9yX2xpc3Q7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICB1cGxvYWRJRkZpbGU6IGZ1bmN0aW9uIHVwbG9hZElGRmlsZShjb250ZXh0LCBkYXRhKSB7CiAgICAgIHBvc3QoY29udGV4dCwgJ3VwbG9hZElGRmlsZScsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29udGV4dC5jb21taXQoJ3Nob3dTbmFjaycsIHJlc3BvbnNlLmRhdGEgKyAiIOqwnOqwgCDsnoXroKXrkJjsl4jsirXri4jri6QuIik7CiAgICAgIH0pOwogICAgfSwKICAgIGRvd25sb2FkRXhwZXJ0czogZnVuY3Rpb24gZG93bmxvYWRFeHBlcnRzKGNvbnRleHQsIGRhdGEpIHsKICAgICAgZGF0YS5pdGVtc1BlclBhZ2UgPSAtMjsKICAgICAgcmV0dXJuIGdldChjb250ZXh0LCAnZ2V0RXhwZXJ0cycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgRG93bmxvYWRKc29uRGF0YShyZXNwb25zZS5kYXRhLCBkYXRhLl9zaXRlICsgIl8iICsgZGF0YS5faWQsIHRydWUsIDIpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRFeHBlcnRQYXBlcnM6IGZ1bmN0aW9uIGdldEV4cGVydFBhcGVycyhjb250ZXh0LCBkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdEQVRBJywgZGF0YSk7CiAgICAgIC8vIGxldCBkZCA9IHsKICAgICAgLy8gCWNvbHM6IFt7CiAgICAgIC8vIAkJbmFtZTogIkEiLAogICAgICAvLyAJCWtleTogMAogICAgICAvLyAJfSwgewogICAgICAvLyAJCW5hbWU6ICJCIiwKICAgICAgLy8gCQlrZXk6IDEKICAgICAgLy8gCX0sIHsKICAgICAgLy8gCQluYW1lOiAiQyIsCiAgICAgIC8vIAkJa2V5OiAyCiAgICAgIC8vIAl9XSwKICAgICAgLy8gCWRhdGE6IFsKICAgICAgLy8gCVsiaWQiLCAibmFtZSIsICJ2YWx1ZSJdLAogICAgICAvLyAJWzEsICJzaGVldGpzIiwgNzI2Ml0sCiAgICAgIC8vIAlbMiwgImpzLXhsc3giLCA2OTY5XQogICAgICAvLyBdCiAgICAgIC8vIH07CiAgICAgIC8vIHZhciB3b3Jrc2hlZXQgPSBYTFNYLnV0aWxzLmFvYV90b19zaGVldChkZC5kYXRhKTsKICAgICAgLy8gdmFyIG5ld193b3JrYm9vayA9IFhMU1gudXRpbHMuYm9va19uZXcoKTsKICAgICAgLy8gWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldChuZXdfd29ya2Jvb2ssIHdvcmtzaGVldCwgIlNoZWV0SlMiKTsKICAgICAgLy8gY29uc3Qgd2JvdXQgPSBYTFNYLndyaXRlKG5ld193b3JrYm9vaywgewogICAgICAvLyAJdHlwZTogImJhc2U2NCIsCiAgICAgIC8vIAlib29rVHlwZTogInhsc3giCiAgICAgIC8vIH0pOwogICAgICAvLyBjb25zdCBib2R5ID0gd2JvdXQ7CiAgICAgIC8vIHN0cmVhbS5mZXRjaCh7CiAgICAgIC8vIAltZXRob2Q6ICdHRVQnLAogICAgICAvLyAJdHlwZTogJ2pzb24nLAogICAgICAvLyAJdXJsOiAiaHR0cDovLzIwMy4yNTUuOTIuNDg6ODA4Mi9nZXRFeHBlcnRQYXBlcnMiLAogICAgICAvLyAJYm9keTogYm9keQogICAgICAvLyB9LCBmdW5jdGlvbihyZXMpIHsKICAgICAgLy8gCS8vbW9kYWwudG9hc3QoeyBtZXNzYWdlOiAnS0VZOiAnICsgcmVzLmRhdGEua2V5LCBkdXJhdGlvbjogMTAgfSk7CiAgICAgIC8vCiAgICAgIC8vIAkvLyBzZWxmLnZlcnNpb24gPSByZXMuZGF0YS5rZXkKICAgICAgLy8gfSk7CiAgICAgIHJldHVybiBnZXQoY29udGV4dCwgJ2dldEV4cGVydFBhcGVycycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGZsYWcgPSBkYXRhLnNpdGUgPT09ICdOVElTJyA/IDAgOiAxOwogICAgICAgIGlmIChkYXRhLmZsYWcgPT09IHVuZGVmaW5lZCkgRG93bmxvYWRKc29uRGF0YShyZXNwb25zZS5kYXRhLCBkYXRhLm5hbWUgKyAiXyIgKyBkYXRhLnNpdGUsIHRydWUsIGZsYWcpO2Vsc2UgRG93bmxvYWRKc29uRGF0YShyZXNwb25zZS5kYXRhLCBkYXRhLnNpdGUgKyAiXyIgKyBkYXRhLmtleUlkICsgIl90b3RhbCIsIHRydWUsIDMpOyAvLyBkZC5kYXRhCiAgICAgICAgLy8gCWNvbnN0IHdvcmtib29rID0gbmV3IEV4Y2VsLldvcmtib29rKCk7CiAgICAgICAgLy8gCWNvbnN0IHdvcmtzaGVldCA9IHdvcmtib29rLmFkZFdvcmtzaGVldCgnTXkgU2hlZXQnKTsKICAgICAgICAvLyAJd29ya3NoZWV0LmNvbHVtbnMgPSBbCiAgICAgICAgLy8gCQl7CiAgICAgICAgLy8gCQkJaGVhZGVyOiAnUHJvamVjdE51bWJlcicsCiAgICAgICAgLy8gCQkJa2V5OiAnaWQnLAogICAgICAgIC8vIAkJCXdpZHRoOiAxMAogICAgICAgIC8vIAkJfSwKICAgICAgICAvLyBdOwogICAgICAgIC8vIAlyZXNwb25zZS5kYXRhLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAvLyAJCXdvcmtzaGVldC5hZGRSb3coaXRlbSk7CiAgICAgICAgLy8gCX0pOwogICAgICAgIC8vIAl2YXIgdGVtcEZpbGVQYXRoID0gdGVtcGZpbGUoJy54bHN4Jyk7CiAgICAgICAgLy8gIHdvcmtib29rLnhsc3gud3JpdGVGaWxlKHRlbXBGaWxlUGF0aCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAvLyAJCSByZXMuc2VuZEZpbGUodGVtcEZpbGVQYXRoLCBmdW5jdGlvbihlcnIpewogICAgICAgIC8vIAkJIH0pOwogICAgICAgIC8vICB9KTsKICAgICAgICAvLwogICAgICAgIC8vIAkvLyB3b3Jrc2hlZXQuYWRkUm93KHtpZDogMSwgbmFtZTogJ0pvaG4gRG9lJywgZG9iOiBuZXcgRGF0ZSgxOTcwLDEsMSl9KTsKICAgICAgICAvLyAJLy8gd29ya3NoZWV0LmFkZFJvdyh7aWQ6IDIsIG5hbWU6ICdKYW5lIERvZScsIGRvYjogbmV3IERhdGUoMTk2NSwxLDcpfSk7CiAgICAgICAgLy8gCXdvcmtib29rLmNvbW1pdCgpOwogICAgICAgIC8vIAl3b3JrYm9vay54bHN4LndyaXRlRmlsZSgnLi90ZW1wLnhsc3gnKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgIC8vIAkJLy8gZG9uZQogICAgICAgIC8vIAl9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0RXhwZXJ0UmVsYXRpb246IGZ1bmN0aW9uIGdldEV4cGVydFJlbGF0aW9uKGNvbnRleHQsIGRhdGEpIHsKICAgICAgLy8gY29uc3QgewogICAgICAvLyAJX2lkeCwKICAgICAgLy8gCWZsYWcKICAgICAgLy8gfSA9IGRhdGE7CiAgICAgIHJldHVybiBnZXQoY29udGV4dCwgJ2dldEV4cGVydFJlbGF0aW9uJywgZGF0YSk7IC8vIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgLy8gCWNvbnRleHQuY29tbWl0KCdhZGRFeHBlcnRSZWxhdGlvbicsIHsKICAgICAgLy8gCQlkYXRhOiByZXNwb25zZS5kYXRhLAogICAgICAvLyAJCV9pZHgsCiAgICAgIC8vIAkJZmxhZwogICAgICAvLyAJfSkKICAgICAgLy8gfSkKICAgIH0sCiAgICBzZW5kQ3Jhd2xSZXF1ZXN0OiBmdW5jdGlvbiBzZW5kQ3Jhd2xSZXF1ZXN0KGNvbnRleHQsIGRhdGEpIHsKICAgICAgcmV0dXJuIGdldChjb250ZXh0LCAnc2VuZENyYXdsUmVxdWVzdCcsIGRhdGEpOwogICAgfSwKICAgIGdldEV4cGVydHM6IGZ1bmN0aW9uIGdldEV4cGVydHMoY29udGV4dCwgZGF0YSkgewogICAgICAvLyBjb25zb2xlLmxvZygnREFUQScsIGRhdGEpOwogICAgICAvLyBpZiAoZGF0YS5kRmxhZyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIC8vIAlkYXRhLml0ZW1zUGVyUGFnZSA9IC0xOwogICAgICAvLyB9CiAgICAgIC8vIGdldChjb250ZXh0LCAnZ2V0RXhwZXJ0cycsIGRhdGEpCiAgICAgIHJldHVybiBnZXQoY29udGV4dCwgJ2dldEV4cGVydHMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGlmIChkYXRhLl9pZHggIT0gMCkgewogICAgICAgIGlmIChkYXRhLmRGbGFnICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIC8vIHJlc3BvbnNlCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnUkVTUE9OU0UnLCByZXNwb25zZSk7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29udGV4dC5jb21taXQoJ2FkZEV4cGVydHMnLCB7CiAgICAgICAgICAgIGRhdGE6IHJlc3BvbnNlLmRhdGEsCiAgICAgICAgICAgIF9pZDogZGF0YS5faWQsCiAgICAgICAgICAgIF9pZHg6IGRhdGFbJ19pZHgnXQogICAgICAgICAgfSk7CiAgICAgICAgfSAvLyB9IGVsc2UgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIC8vIH0KCiAgICAgIH0pOwogICAgfSwKICAgIGdldERldGFpbEhpc3Rvcnk6IGZ1bmN0aW9uIGdldERldGFpbEhpc3RvcnkoY29udGV4dCwgaWQpIHsKICAgICAgZ2V0KGNvbnRleHQsICdnZXREZXRhaWxIaXN0b3J5JywgaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgY29udGV4dC5jb21taXQoJ2FkZERldGFpbEhpc3RvcnknLCByZXNwb25zZS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVxdWVzdFNlYXJjaDogZnVuY3Rpb24gcmVxdWVzdFNlYXJjaChjb250ZXh0LCBkYXRhKSB7CiAgICAgIHBvc3QoY29udGV4dCwgJ3JlcXVlc3RTZWFyY2gnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBfcmVzcG9uc2UkZGF0YSA9IHJlc3BvbnNlLmRhdGEsCiAgICAgICAgICAgIGZsYWcgPSBfcmVzcG9uc2UkZGF0YS5mbGFnLAogICAgICAgICAgICByZXN1bHRzID0gX3Jlc3BvbnNlJGRhdGEucmVzdWx0czsKICAgICAgICBpZiAoZmxhZykgY29udGV4dC5jb21taXQoJ2FkZEhpc3RvcnknLCByZXN1bHRzKTtlbHNlIHsKICAgICAgICAgIC8vIGNsb3NlU25hY2soY29udGV4dCk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2hvd1NuYWNrJywgIktleUlkIDogIiArIHJlc3VsdHMgKyAiIE5vdyBDcmF3bGluZyEiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vZ2V0SGlzdG9yaWVzCiAgICBnZXRIaXN0b3JpZXM6IGZ1bmN0aW9uIGdldEhpc3Rvcmllcyhjb250ZXh0LCBmbGFnKSB7CiAgICAgIC8vdGVzdCBpZCA9IDEKICAgICAgaWYgKGZsYWcgPT09IHVuZGVmaW5lZCAmJiBjb250ZXh0LnN0YXRlLmhpc3Rvcmllcy5sZW5ndGggIT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZ2V0KGNvbnRleHQsICdnZXRIaXN0b3JpZXMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCdSRVNQT05TRScsIHJlc3BvbnNlKTsKICAgICAgICAvLyBpZihyZXNwb25zZS5kYXRhKQogICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRIaXN0b3JpZXMnLCByZXNwb25zZS5kYXRhKTsKICAgICAgfSk7IC8vIGdldChjb250ZXh0LCAnZ2V0SGlzdG9yaWVzJywgewogICAgICAvLyAJCWlkOiAxCiAgICAgIC8vIAl9KQogICAgICAvLyAJLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAvLyAJCWNvbnRleHQuY29tbWl0KCdzZXRIaXN0b3JpZXMnLCByZXNwb25zZS5kYXRhKQogICAgICAvLyAJfSkKICAgIH0sCiAgICBnZXRTaXRlU3RhdHVzOiBmdW5jdGlvbiBnZXRTaXRlU3RhdHVzKGNvbnRleHQpIHsKICAgICAgcmV0dXJuIGdldChjb250ZXh0LCAnZ2V0U2l0ZVN0YXR1cycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFNpdGVzJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldFRlc3Q6IGZ1bmN0aW9uIGdldFRlc3QoY29udGV4dCkgewogICAgICBzaG93U25hY2sobXNnLnJlbW92ZSwgY29udGV4dCk7CiAgICB9LAogICAgcmVtb3ZlSGlzdG9yeTogZnVuY3Rpb24gcmVtb3ZlSGlzdG9yeShjb250ZXh0LCBkYXRhKSB7CiAgICAgIHJldHVybiBnZXQoY29udGV4dCwgJ3JlbW92ZUhpc3RvcnknLCBkYXRhKTsKICAgIH0sCiAgICBlZGl0SGlzdG9yeTogZnVuY3Rpb24gZWRpdEhpc3RvcnkoY29udGV4dCwgZGF0YSkgewogICAgICByZXR1cm4gZ2V0KGNvbnRleHQsICdlZGl0SGlzdG9yeScsIGRhdGEpOwogICAgfSwKICAgIGdldEludGVncmF0aW9uRGF0YTogZnVuY3Rpb24gZ2V0SW50ZWdyYXRpb25EYXRhKGNvbnRleHQsIGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coJ0RBVEEnLCBkYXRhKTsKICAgICAgY29udGV4dC5zdGF0ZS5pZ0lEID0gZGF0YS5pZDsKICAgICAgY29udGV4dC5zdGF0ZS5pZ0tleXdvcmQgPSBkYXRhLnF1ZXJ5X2tleXdvcmQ7CiAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRGaWx0ZXJzJywge30pOyAvLyByZXR1cm4gcG9zdChjb250ZXh0LCAnZ2V0SW50ZWdyYXRpb25EYXRhJywgZGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIC8vIAkvLyByZXNwb25zZS5kYXRhCiAgICAgIC8vIAljb25zb2xlLmxvZygnUkVTUE9OU0UuREFUQScsIHJlc3BvbnNlLmRhdGEpOwogICAgICAvLyAJY29udGV4dC5jb21taXQoJ3NldEZpbHRlcnMnLCByZXNwb25zZS5kYXRhKTsKICAgICAgLy8gfSk7CiAgICB9LAogICAgZ2V0SW50ZWdyYXRpb25SZXN1bHQ6IGZ1bmN0aW9uIGdldEludGVncmF0aW9uUmVzdWx0KGNvbnRleHQsIGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coJ0NPTlRFWFQsIERBVEEnLCBjb250ZXh0LCBkYXRhKTsKICAgICAgdmFyIHNpemUgPSAwOwogICAgICBkYXRhLmZJZCA9IC0xOwogICAgICBkYXRhLmZpbHRlciA9IGNvbnRleHQuc3RhdGUuZmlsdGVyczsgLy8gZGF0YS5wcm9qZWN0ID0gY29udGV4dC5zdGF0ZS5zZWxlY3RlZC5wcm9qZWN0OwogICAgICAvLyBkYXRhLnBhcGVyID0gY29udGV4dC5zdGF0ZS5zZWxlY3RlZC5wYXBlcjsKICAgICAgLy8gLy8gbGV0IGRhdGEgPSB7fTsKICAgICAgLy8gbGV0IGRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBfZGF0YSk7CiAgICAgIC8vIE9iamVjdC5hc3NpZ24KCiAgICAgIE9iamVjdC5rZXlzKGRhdGEuZmlsdGVyKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3Qua2V5cyhkYXRhLmZpbHRlcltrZXldKS5mb3JFYWNoKGZ1bmN0aW9uIChmZikgewogICAgICAgICAgLy8gY29uc29sZS5sb2coJ0ZJTFRFUicsIGZpbHRlcik7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnS0VZJywga2V5KTsKICAgICAgICAgIC8vIGNvbnRleHQuc3RhdGUuZmlsdGVyc1trZXldW2ZpbHRlcl0KICAgICAgICAgIC8vIC8vIGNvbnNvbGUubG9nKCdDT05URVhULlNUQVRFLkZJTFRFUlNbS0VZXVtGSUxURVJdJywgY29udGV4dC5zdGF0ZS5maWx0ZXJzW2tleV1bZmlsdGVyXSk7CiAgICAgICAgICBpZiAoZmYgPT0gJ3llYXInKSB7CiAgICAgICAgICAgIGRhdGEuZmlsdGVyW2tleV1bZmZdLnNlbGVjdGVkID0gZGF0YS5maWx0ZXJba2V5XVtmZl0uc2VsZWN0ZWQubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0lURU0nLCBpdGVtKTsgLy8gCS8vIGNvbnNvbGUubG9nKCk7CiAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgIC8vIAkvLyBjb250ZXh0LnN0YXRlLmZpbHRlcnNba2V5XVtmaWx0ZXJdWydsaXN0J10KICAgICAgICAgICAgICAvLyAJLy8gY29uc29sZS5sb2coJ0NPTlRFWFQuU1RBVEUuRklMVEVSU1tLRVldW0ZJTFRFUl1bXCdMSVNUXCddJywgKTsKICAgICAgICAgICAgICAvLyAJLy8gY29uc29sZS5sb2coJ0NPTlRFWFQuU1RBVEUuRklMVEVSU1tLRVldW0ZJTFRFUl0uTElTVFtJVEVNXScsIGNvbnRleHQuc3RhdGUuZmlsdGVyc1trZXldW2ZpbHRlcl1bJ2xpc3QnXVtpdGVtXSk7CgogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEQVRBLkZJTFRFUltLRVldW0ZGXS5MSVNUW0lURU1dJywgZGF0YS5maWx0ZXJba2V5XVtmZl0ubGlzdCk7CiAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZGF0YS5maWx0ZXJba2V5XVtmZl0ubGlzdClbaXRlbV1bMF07IC8vIGNvbnRleHQuc3RhdGUuZmlsdGVyc1trZXldW2ZpbHRlcl1bJ2xpc3QnXQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1RUVFRUVFRUVFRUVFRUVFQnLCBkYXRhLmZpbHRlcltrZXldW2ZmXS5zZWxlY3RlZCk7CiAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKCdEQVRBW0tFWV1bRklMVEVSXScsIGRhdGFba2V5XVtmaWx0ZXJdKTsKCgogICAgICAgICAgc2l6ZSArPSBkYXRhLmZpbHRlcltrZXldW2ZmXS5zZWxlY3RlZC5sZW5ndGg7CiAgICAgICAgfSk7CiAgICAgIH0pOyAvLyBkYXRhCgogICAgICBjb25zb2xlLmxvZygnREFUQScsIGRhdGEpOyAvLyBjb25zb2xlLmxvZygnREFUQScsIF9kYXRhKTsKCiAgICAgIGNvbnNvbGUubG9nKCdTSVpFJywgc2l6ZSk7CgogICAgICBpZiAoc2l6ZSA9PSAwKSB7CiAgICAgICAgLy8gaWYgKGNvbnRleHQuc3RhdGUucHJldmZJZCAhPSAwKSB7CiAgICAgICAgLy8gZGF0YS5mSWQgPSBjb250ZXh0LnN0YXRlLnByZXZmSWQ7CiAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICBkYXRhLmZJZCA9IDA7IC8vIH0KICAgICAgfQoKICAgICAgZGF0YS5wcmV2ZklkID0gY29udGV4dC5zdGF0ZS5wcmV2ZklkOyAvLyByZXR1cm47CgogICAgICBjb250ZXh0LnN0YXRlLmhpc3Rvcmllcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0uX2lkID09IGRhdGEua2V5SWQpIHsKICAgICAgICAgIGRhdGEuc2l0ZXMgPSBpdGVtLnNpdGVzOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSk7IC8vIC8vZGF0YS5mSWQgPSAxOwoKICAgICAgcmV0dXJuIHBvc3QoY29udGV4dCwgJ2dldEludGVncmF0aW9uUmVzdWx0JywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvLyByZXNwb25zZS5kYXRhCiAgICAgICAgY29uc29sZS5sb2coJ1JFU1BPTlNFLkRBVEEnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0SW50ZWdyYXRpb25SZXN1bHQnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICBjb250ZXh0LnN0YXRlLmlnVG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsRXhwZXJ0czsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5wcmV2ZklkICE9IDApIGNvbnRleHQuc3RhdGUucHJldmZJZCA9IHJlc3BvbnNlLmRhdGEucHJldmZJZDsKICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0RmlsdGVycycsIHJlc3BvbnNlLmRhdGEuZmlsdGVycyk7IC8vIC50aGVuKGNvbnRleHQuY29tbWl0KCdzZXRTZWxlY3RlZCcsIHJlc3BvbnNlLmRhdGEpKTsKCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGdldEludGVncmF0aW9uUmF3OiBmdW5jdGlvbiBnZXRJbnRlZ3JhdGlvblJhdyhjb250ZXh0LCBkYXRhKSB7CiAgICAgIHJldHVybiBwb3N0KGNvbnRleHQsICdnZXRJbnRlZ3JhdGlvblJhdycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gcmVzcG9uc2UuZGF0YQogICAgICAgIGNvbnNvbGUubG9nKCdSRVNQT05TRS5EQVRBJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgcmVzcG9uc2UuZGF0YS5pZHggPSBkYXRhLmlkeDsgLy8gcmV0dXJuIHJlc3BvbnNlLmRhdGE7CgogICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRJbnRlZ3JhdGlvblJhdycsIHJlc3BvbnNlLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVJbnRlZ3JhdGlvbjogZnVuY3Rpb24gZGVsZXRlSW50ZWdyYXRpb24oY29udGV4dCwga2V5SWQpIHsKICAgICAgZ2V0KGNvbnRleHQsICdkZWxldGVJbnRlZ3JhdGlvbicsIHsKICAgICAgICAia2V5SWQiOiBrZXlJZAogICAgICB9KTsKICAgIH0sCiAgICBnZXRSZWxvYWRQYWdlOiBmdW5jdGlvbiBnZXRSZWxvYWRQYWdlKGNvbnRleHQsIGRhdGEpIHsKICAgICAgcmV0dXJuIHBvc3QoY29udGV4dCwgJ2dldFJlbG9hZFBhZ2UnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIHJlc3BvbnNlLmRhdGEKICAgICAgICBjb25zb2xlLmxvZygnUkVTUE9OU0UuREFUQScsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRJbnRlZ3JhdGlvblJlc3VsdCcsIHJlc3BvbnNlLmRhdGEpOyAvLwljb250ZXh0LmNvbW1pdCgnc2V0SW50ZWdyYXRpb25SYXcnLCByZXNwb25zZS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0SW5zdFJhbms6IGZ1bmN0aW9uIGdldEluc3RSYW5rKGNvbnRleHQsIGRhdGEpIHsKICAgICAgLy9jb25zb2xlLmxvZygic3RyaW5nIik7CiAgICAgIHJldHVybiBnZXQoY29udGV4dCwgJ2dldEluc3RSYW5rJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0UmFuaycsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgIGNvbnNvbGUubG9nKCJzZXRSYW5rIiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldE50aXNBUEk6IGZ1bmN0aW9uIGdldE50aXNBUEkoY29udGV4dCwgZGF0YSkgewogICAgICByZXR1cm4gZ2V0KGNvbnRleHQsICdnZXROdGlzQVBJJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0TnRpcycsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgIGNvbnNvbGUubG9nKCdzZXROdGlzJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfQogIH0KfSk7"},{"version":3,"sources":["/home/search/apps/dj/expert_web_v3/src/store.js"],"names":["Vue","Vuex","get","post","XLSX","saveAs","use","sheetNames","DownloadJsonData","JSONData","FileTitle","ShowLabel","Flag","wb","utils","book_new","s2ab","s","buf","ArrayBuffer","length","view","Uint8Array","i","charCodeAt","outData","isLooopable","w","arrayConstructor","constructor","objectConstructor","temp","field","fData","inData","undefined","push","newWorksheet","json_to_sheet","book_append_sheet","fitToColumn","colSize","wch","wbout","write","bookType","type","Blob","msg","timeout","ok","fail","run","showSnack","ctxt","rep","msgp","status","commit","showalarm","setLoading","isLoading","store","Store","state","snack","isShow","isMini","histories","activeTab","activeInnerTab","tabs","sites","integrations","igID","igKeyword","filters","igTotal","igRaw","prevfId","rankinst","a_url","mutations","setIsMini","flag","closeTab","id","splice","findIndex","x","_id","closeSnack","message","setIsLoading","payload","setHistories","forEach","item","site","addHistory","history","unshift","addDetailHistory","dHistory","idx","h","set","addExperts","experts","data","expert","keyId","_idx","lists","addExpertRelation","rel","tab","nodes","links","concat","asResults","results","sourceAId","targetAId","count","_svgAttrs","setSites","setFilters","Object","keys","filterKey","ff","selected","inst","list","slice","reduce","result","key","replaceAll","journal","year","Map","reverse","console","log","setIntegrationResult","igResult","author","numPapers","rKeywords","network","webSearch","name","numProjects","totalCitation","totalCoop","recentYear","setIntegrationRaw","deleteSelected","setSelected","sel","map","filterItem","rtv","filter","setRank","rank","Insts","setNtis","author_list","actions","uploadIFFile","context","then","response","downloadExperts","itemsPerPage","_site","getExpertPapers","getExpertRelation","sendCrawlRequest","getExperts","dFlag","getDetailHistory","requestSearch","getHistories","getSiteStatus","getTest","remove","removeHistory","editHistory","getIntegrationData","query_keyword","getIntegrationResult","size","fId","Array","from","totalExperts","getIntegrationRaw","deleteIntegration","getReloadPage","getInstRank","getNtisAPI"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport {\r\n\tget,\r\n\tpost\r\n} from './apiUtils';\r\n\r\nimport XLSX from 'xlsx'\r\nimport {\r\n\tsaveAs\r\n} from 'file-saver';\r\nVue.use(Vuex)\r\n\r\n// const initWeight = new Array(6).fill(50)\r\nconst sheetNames = ['Projects', 'Papers', 'Experts'];\r\n\r\n//DownloadJsonData(response.data, data.name + \"_\" + data.site, true, flag);\r\nfunction DownloadJsonData(JSONData, FileTitle, ShowLabel, Flag) {\r\n\t// console.log('JSONDATA', JSONData);\r\n\r\n\r\n\t//If JSONData is not an object then JSON.parse will parse the JSON string in an Object\r\n\r\n\r\n\tvar wb = XLSX.utils.book_new();\r\n\t// console.log('WB', wb);\r\n\r\n\tfunction s2ab(s) {\r\n\t\tvar buf = new ArrayBuffer(s.length); //convert s to arrayBuffer\r\n\t\tvar view = new Uint8Array(buf); //create uint8array as viewer\r\n\t\tfor (let i = 0; i < s.length; i++) view[i] = s.charCodeAt(i) & 0xFF; //convert to octet\r\n\t\treturn buf;\r\n\t}\r\n\tlet outData = [];\r\n\r\n\r\n\tfunction isLooopable(w) {\r\n\t\tvar arrayConstructor = [].constructor;\r\n\t\tvar objectConstructor = ({}).constructor;\r\n\t\tif (w !== null) {\r\n\t\t\tif (w.constructor === arrayConstructor) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (w.constructor === objectConstructor) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\r\n\t// let fieldItems = Object.keys(fields[Flag]);\r\n\tfor (let i = 0; i < JSONData.length; i++) {\r\n\t\tlet temp = {};\r\n\t\t// let j = 0;\r\n\t\tfor (let field in JSONData[i]) {\r\n\t\t\tlet fData = JSONData[i][field];\r\n\t\t\tif (isLooopable(fData)) {\r\n\t\t\t\tlet temp = \"\"\r\n\t\t\t\tfor (let inData in fData)\r\n\t\t\t\t\ttemp += inData + \" : \" + fData[inData];\r\n\t\t\t\tfData = temp;\r\n\t\t\t}\r\n\t\t\t// if (field == 'name' || field == 'inst')\r\n\t\t\t// \tfData = fData.replace(/,/g, \";\");\r\n\t\t\tif (fData === undefined || fData == 'null' || fData == \"\\\"None\\\"\" || fData == null)\r\n\t\t\t\tfData = '-';\r\n\t\t\ttemp[field] = fData;\r\n\t\t\t// row += fData + ',';\r\n\t\t}\r\n\t\toutData.push(temp);\r\n\t}\r\n\tvar newWorksheet = XLSX.utils.json_to_sheet(outData);\r\n\tXLSX.utils.book_append_sheet(wb, newWorksheet, sheetNames[Flag]);\r\n\t//\r\n\t// const worksheet = XLSX.utils.aoa_to_sheet(arrayOfArray);\r\n\tnewWorksheet['!cols'] = fitToColumn(outData);\r\n\r\n\tfunction fitToColumn(outData) {\r\n\t\t// console.log('OUTDATA', outData);\r\n\t\t// get maximum character of each column\r\n\t\tlet colSize = []\r\n\t\tfor (let field in outData[0]) {\r\n\t\t\t// outData[0][field]\r\n\t\t\t// console.log('OUTDATA[0][FIELD]', outData[0][field]);\r\n\t\t\tlet wch = outData[0][field].length;\r\n\t\t\tif (wch == 0 || wch === undefined)\r\n\t\t\t\twch = 20;\r\n\t\t\tif (wch > 100)\r\n\t\t\t\twch = 100;\r\n\r\n\t\t\tcolSize.push({\r\n\t\t\t\t'wch': wch\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn colSize\r\n\r\n\t}\r\n\r\n\r\n\tvar wbout = XLSX.write(wb, {\r\n\t\tbookType: 'xlsx',\r\n\t\ttype: 'binary'\r\n\t});\r\n\tsaveAs(new Blob([s2ab(wbout)], {\r\n\t\ttype: \"application/octet-stream\"\r\n\t}), FileTitle + '.xlsx');\r\n\r\n\r\n\t// let arrData = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;\r\n\t// let CSV = '';\r\n\t// if (ShowLabel) {\r\n\t// \tlet row = \"\";\r\n\t//\r\n\t// \tlet fieldItems = Object.keys(fields[Flag]);\r\n\t// \tfieldItems.forEach((field) => {\r\n\t// \t\trow += fields[Flag][field] + ',';\r\n\t// \t});\r\n\t// \trow = row.slice(0, -1);\r\n\t// \tCSV += row + '\\r\\n';\r\n\t// }\r\n\t// for (var i = 0; i < arrData.length; i++) {\r\n\t// \tlet row = \"\";\r\n\t// \tfor (let field in fields[Flag]) {\r\n\t// \t\tlet fData = arrData[i][field];\r\n\t// \t\tif (field == 'name' || field == 'inst')\r\n\t// \t\t\tfData = fData.replace(/,/g, \";\");\r\n\t// \t\tif (fData === undefined || fData == 'null' || fData == \"\\\"None\\\"\")\r\n\t// \t\t\tfData = '-';\r\n\t// \t\trow += fData + ',';\r\n\t// \t}\r\n\t// \trow.slice(0, row.length - 1);\r\n\t// \tCSV += row + '\\r\\n';\r\n\t// }\r\n\t// if (CSV == '') {\r\n\t// \talert(\"Invalid data\");\r\n\t// \treturn;\r\n\t// }\r\n\t// var filename = FileTitle;\r\n\t// var blob = new Blob([\"\\ufeff\" + CSV], {\r\n\t// \ttype: 'text/csv;charset=utf-8;'\r\n\t// });\r\n\t// if (navigator.msSaveBlob) { // IE 10+\r\n\t// \tnavigator.msSaveBlob(blob, filename);\r\n\t// } else {\r\n\t// \tvar link = document.createElement(\"a\");\r\n\t// \tif (link.download !== undefined) { // feature detection\r\n\t// \t\tvar url = URL.createObjectURL(blob);\r\n\t// \t\tlink.setAttribute(\"href\", url);\r\n\t// \t\tlink.style = \"visibility:hidden\";\r\n\t// \t\tlink.download = filename + \".csv\";\r\n\t// \t\tdocument.body.appendChild(link);\r\n\t// \t\tlink.click();\r\n\t// \t\tdocument.body.removeChild(link);\r\n\t// \t}\r\n\t// }\r\n}\r\n\r\nconst msg = {\r\n\ttimeout: 3000, //3s\r\n\tok: \" .\",\r\n\t// history_ok: \"   .\",\r\n\tfail: \" .\",\r\n\trun: \" .\"\r\n}\r\n\r\n//snackbar\r\nexport const showSnack = (ctxt, rep, msgp = \"\") => {\r\n\tif (msgp === \"\") {\r\n\t\tif (rep.status == 200 || rep.status == 204)\r\n\t\t\tctxt.commit('showSnack', msg.ok)\r\n\t\telse if (rep.status == 404)\r\n\t\t\tctxt.commit('showSnack', msg.fail)\r\n\t} else {\r\n\t\tctxt.commit('showSnack', msgp)\r\n\t}\r\n}\r\n\r\n//snackbar\r\nexport const showalarm = (ctxt, rep, msgp = \"\") => {\r\n\tif (msgp === \"\") {\r\n\t\tif (rep.status == 200 || rep.status == 204)\r\n\t\t\tctxt.commit('showSnack', msg.ok)\r\n\t\telse if (rep.status == 404)\r\n\t\t\tctxt.commit('showSnack', msg.fail)\r\n\t} else {\r\n\t\tctxt.commit('showalarm', msgp)\r\n\t}\r\n}\r\n\r\n//loading bar\r\nexport const setLoading = (ctxt, isLoading) => {\r\n\tctxt.commit('setIsLoading', isLoading)\r\n}\r\n\r\n\r\n\r\nexport const store = new Vuex.Store({\r\n\t// --------------------------------state -------------------------------------------------------------------------------------------------\r\n\tstate: {\r\n\t\tisLoading: false,\r\n\t\tsnack: {\r\n\t\t\tisShow: false,\r\n\t\t\tmsg: \"\"\r\n\t\t},\r\n\t\tisMini: false,\r\n\t\thistories: [],\r\n\t\tactiveTab: null,\r\n\t\tactiveInnerTab: {},\r\n\t\ttabs: [],\r\n\t\tsites: {},\r\n\t\tintegrations: [],\r\n\t\tigID: -1,\r\n\t\tigKeyword: \"\",\r\n\t\tfilters: {\r\n\t\t\t\"project\": {},\r\n\t\t\t\"paper\": {}\r\n\t\t},\r\n\t\tigTotal: 0,\r\n\t\tigRaw: {},\r\n\t\tprevfId: 0,\r\n\t\trankinst : [],\r\n\t\ta_url : [],\r\n\t\t// selected: {\r\n\t\t// \t\t'inst': [],\r\n\t\t// \t\t'rsc': [],\r\n\t\t// \t\t'fund': [],\r\n\t\t// \t\t'year': []\r\n\t\t// \t},\r\n\t\t// \t'paper': {\r\n\t\t// \t\t'inst': [],\r\n\t\t// \t\t'year': [],\r\n\t\t// \t\t'journal': [],\r\n\t\t// \t\t'lang': []\r\n\t\t// \t},\r\n\t\t// }\r\n\r\n\t},\r\n\t// --------------------------------/state -------------------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n\t// --------------------------------mutations -------------------------------------------------------------------------------------------------\r\n\tmutations: {\r\n\r\n\t\tsetIsMini: (state, flag) => {\r\n\t\t\tstate.isMini = flag;\r\n\t\t},\r\n\t\tcloseTab: (state, id) => {\r\n\t\t\tstate.tabs.splice(state.tabs.findIndex(x => x._id == id), 1);\r\n\t\t\t//state.activeInnerTab[dHistory._id] = 0;\r\n\t\t\tif (state.tabs.length > 0)\r\n\t\t\t\tstate.activeTab = state.tabs[0]._id\r\n\t\t\t// if(idx != state.tabs.length){\r\n\t\t\t// \t\tstate.tabs.\r\n\t\t\t// }\r\n\t\t\t//\r\n\t\t\t// if (state.activeTab == idx)\r\n\t\t\t// \tstate.activeTab = state.tabs.length;\r\n\t\t},\r\n\t\t//snackbar\r\n\t\tcloseSnack: (state) => {\r\n\t\t\tstate.snack.isShow = false\r\n\t\t},\r\n\t\tshowSnack: (state, message) => {\r\n\t\t\tstate.snack = {\r\n\t\t\t\tisShow: false,\r\n\t\t\t\t// color: \"cyan darken-2\",\r\n\t\t\t\tmsg: message,\r\n\t\t\t\ttimeout: msg.timeout\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// if (typeof message === 'object') {\r\n\t\t\t// \tlet {\r\n\t\t\t// \t\tmsg,\r\n\t\t\t// \t\tcolor\r\n\t\t\t//\r\n\t\t\t// \t} = message;\r\n\t\t\t// \tstate.snack = {\r\n\t\t\t// \t\tisShow: true,\r\n\t\t\t// \t\tmsg,\r\n\t\t\t// \t\tcolor,\r\n\t\t\t// \t\ttimeout: msg.timeout\r\n\t\t\t// \t};7\r\n\t\t\t// } else {\r\n\t\t\t// \tstate.snack = {\r\n\t\t\t// \t\tisShow: true,\r\n\t\t\t// \t\tcolor: \"cyan darken-2\",\r\n\t\t\t// \t\tmsg: message,\r\n\t\t\t// \t\ttimeout: msg.timeout\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t},\r\n\t\tshowalarm : (state, message) => {\r\n\t\t\tstate.snack = {\r\n\t\t\t\tisShow: true,\r\n\t\t\t\t// color: \"cyan darken-2\",\r\n\t\t\t\tmsg: message,\r\n\t\t\t\ttimeout: msg.timeout\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetIsLoading: (state, payload) => {\r\n\t\t\tstate.isLoading = payload\r\n\t\t},\r\n\t\tsetHistories: (state, histories) => {\r\n\t\t\tif (histories.length > 0) {\r\n\t\t\t\thistories.forEach(item => {\r\n\t\t\t\t\t// console.log(item);\r\n\t\t\t\t\titem.sites.forEach(site => {\r\n\t\t\t\t\t\t// console.log(site);\r\n\t\t\t\t\t\tsite._id = item._id;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tstate.histories = histories;\r\n\t\t\t}\r\n\t\t\t// state.histories.forEach((item) => {\r\n\t\t\t// \tlet total = 0\r\n\t\t\t// \titem.sites.forEach((site, i) => {\r\n\t\t\t// \t\titem[site] = Math.random() * 100\r\n\t\t\t// \t\tif (i != 0) {\r\n\t\t\t// \t\t\ttotal += item[site]\r\n\t\t\t// \t\t}\r\n\t\t\t// \t});\r\n\t\t\t// \titem['ALL'] = total / (item.sites.length - 1);\r\n\t\t\t// });\r\n\r\n\t\t},\r\n\t\taddHistory: (state, history) => {\r\n\r\n\t\t\tstate.histories.unshift(history);\r\n\t\t},\r\n\r\n\t\taddDetailHistory: (state, dHistory) => {\r\n\t\t\tlet idx = state.histories.findIndex(h => h._id === dHistory._id);\r\n\t\t\tVue.set(state.histories, idx, dHistory);\r\n\r\n\t\t\tstate.tabs.push(dHistory);\r\n\t\t\t// state.activeTab = dHistory._id;\r\n\t\t\tstate.activeTab = state.tabs.length - 1;\r\n\t\t\tstate.activeInnerTab[state.tabs.length - 1] = 0;\r\n\r\n\r\n\t\t},\r\n\t\taddExperts: (state, experts) => {\r\n\t\t\texperts.data.forEach((expert) => {\r\n\t\t\t\texpert.keyId = experts._id\r\n\t\t\t});\r\n\r\n\t\t\tlet idx = state.tabs.findIndex(x => x._id == experts._id)\r\n\r\n\t\t\tstate.tabs[idx].sites[experts._idx].lists = experts.data;\r\n\t\t},\r\n\t\taddExpertRelation: (state, rel) => {\r\n\t\t\tlet site = state.tab.sites[rel._idx];\r\n\t\t\tif (rel.flag) {\r\n\t\t\t\t// this.\r\n\t\t\t\tsite.nodes = [];\r\n\t\t\t\tsite.links = [];\r\n\t\t\t}\r\n\t\t\tsite.nodes = site.nodes.concat(rel.data.asResults);\r\n\t\t\trel.data.results.forEach((item) => {\r\n\t\t\t\tsite.links.push({\r\n\t\t\t\t\t\"sid\": item.sourceAId,\r\n\t\t\t\t\t\"tid\": item.targetAId,\r\n\t\t\t\t\t\"name\": item.count,\r\n\t\t\t\t\t_svgAttrs: {\r\n\t\t\t\t\t\t\"stroke-width\": item.count / 2\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetSites: (state, sites) => {\r\n\t\t\tstate.sites = sites;\r\n\t\t},\r\n\t\tsetFilters: (state, filters) => {\r\n\t\t\tdelete filters['_id'];\r\n\t\t\tdelete filters['keyId'];\r\n\t\t\tdelete filters['fId'];\r\n\t\t\tif (Object.keys(filters).length > 0) {\r\n\r\n\r\n\t\t\t\tObject.keys(filters).forEach((filterKey) => {\r\n\t\t\t\t\tObject.keys(filters[filterKey]).forEach(ff => {\r\n\r\n\t\t\t\t\t\tif (filters[filterKey][ff].selected === undefined)\r\n\t\t\t\t\t\t\tfilters[filterKey][ff].selected = [];\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (filters[filterKey].inst !== undefined) {\r\n\t\t\t\t\t\tfilters[filterKey].inst.list = Object.keys(filters[filterKey].inst.list).slice(0, 10).reduce((result, key) => {\r\n\t\t\t\t\t\t\t// key = key.replaceAll('^', \".\");\r\n\r\n\t\t\t\t\t\t\tresult[key.replaceAll('^', \".\")] = filters[filterKey].inst.list[key];\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}, {});\r\n\t\t\t\t\t\t// filters[filterKey].inst.forEach((item) => {\r\n\t\t\t\t\t\t// \titem = item\r\n\t\t\t\t\t\t// });\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (filters[filterKey].journal !== undefined) {\r\n\r\n\t\t\t\t\t\tfilters[filterKey].journal.list = Object.keys(filters[filterKey].journal.list).slice(0, 10).reduce((result, key) => {\r\n\t\t\t\t\t\t\t// key = key.replaceAll('^', \".\");\r\n\t\t\t\t\t\t\tresult[key.replaceAll('^', \".\")] = filters[filterKey].journal.list[key];\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}, {});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (filters[filterKey].year !== undefined) {\r\n\r\n\t\t\t\t\t\tlet temp = new Map();\r\n\r\n\t\t\t\t\t\tObject.keys(filters[filterKey].year.list).reverse().forEach((x) => {\r\n\t\t\t\t\t\t\ttemp.set(x, filters[filterKey].year.list[x]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// let ttemp = {};\r\n\r\n\t\t\t\t\t\tconsole.log('TEMP', temp);\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t// rtv.project[f].list = temp;\r\n\t\t\t\t\t\tfilters[filterKey].year.list = temp;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tstate.filters = filters;\r\n\t\t\tconsole.log('FILTERS', filters);\r\n\t\t\tconsole.log('Filters completed')\r\n\t\t},\r\n\t\tsetIntegrationResult: (state, igResult) => {\r\n\t\t\t// let sites = ['Scienceon', 'NTIS', 'DBPIA', 'KCI'];\r\n\t\t\t// let inst = \"\";\r\n\t\t\t// let numPapers = 0;\r\n\t\t\t// let numProjects = 0;\r\n\t\t\t// let numCitations = 0;\r\n\t\t\t// let numCoop = 0;\r\n\t\t\t// let recYear = 0;\r\n\t\t\tigResult.result.forEach((author) => {\r\n\t\t\t\t// sites.forEach((site) => {\r\n\t\t\t\t// \tif (author[site] !== undefined) {\r\n\t\t\t\t// \t\t// inst = author[site].inst;\r\n\t\t\t\t//\r\n\t\t\t\t// \t\tif (site == 'NTIS') {\r\n\t\t\t\t// \t\t\tnumProjects += author[site].papers.length;\r\n\t\t\t\t// \t\t} else {\r\n\t\t\t\t// \t\t\tnumPapers += author[site].papers.length;\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\t\t\t\t// author.raw.forEach((_raw) => {\r\n\t\t\t\t// \tif (_raw.site != 'NTIS') {\r\n\t\t\t\t// \t\tif (parseInt(_raw.issue_year) > recYear) {\r\n\t\t\t\t// \t\t\trecYear = parseInt(_raw.issue_year);\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t\tnumCitations += parseInt(_raw.citation);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\r\n\r\n\t\t\t\t// author.inst = inst;\r\n\t\t\t\tauthor.numPapers += \"\";\r\n\t\t\t\tauthor.rKeywords = '-';\r\n\t\t\t\t// author.coopHist = '-';\r\n\t\t\t\t// author.score = '-';\r\n\t\t\t\tauthor.network = '-';\r\n\t\t\t\tauthor.webSearch = 'https://www.google.com/search?q=' + author.name + \"+\" + author.inst;\r\n\t\t\t\tauthor.numProjects += \"\";\r\n\t\t\t\tauthor.totalCitation += \"\";\r\n\t\t\t\tauthor.totalCoop += \"\";\r\n\t\t\t\tif (author.recentYear == '0') {\r\n\t\t\t\t\tauthor.recentYear = '-';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tauthor.recentYear += \"\";\r\n\t\t\t\t}\r\n\t\t\t\t//author.ngvCoop = '-';\r\n\r\n\r\n\t\t\t\t// recYear = 0;\r\n\t\t\t\t// numCoop = 0;\r\n\t\t\t\t// numCitations = 0;\r\n\t\t\t\t// numProjects = 0;\r\n\t\t\t\t// numPapers = 0;\r\n\t\t\t\t// inst = \"\";\r\n\t\t\t});\r\n\r\n\r\n\r\n\r\n\t\t\tstate.integrations = igResult.result;\r\n\t\t\tconsole.log('STATE.INTEGRATIONS ', state.integrations);\r\n\r\n\r\n\t\t},\r\n\r\n\r\n\t\tsetIntegrationRaw: (state, igRaw) => {\r\n\t\t\tstate.igRaw[igRaw.idx] = igRaw;\r\n\t\t\t// state.integrations.forEach((item) => {\r\n\t\t\t// \tif (item.idx == igRaw.idx) {\r\n\t\t\t// \t\titem.raws = igRaw;\r\n\t\t\t// \t\tconsole.log('ITEM.RAWS ', item.raws);\r\n\t\t\t// \t\treturn;\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\r\n\r\n\t\t},\r\n\t\tdeleteSelected: (state) => {\r\n\t\t\tstate.selected = {\r\n\t\t\t\t'project': {\r\n\t\t\t\t\t'inst': [],\r\n\t\t\t\t\t'rsc': [],\r\n\t\t\t\t\t'fund': [],\r\n\t\t\t\t\t'year': []\r\n\t\t\t\t},\r\n\t\t\t\t'paper': {\r\n\t\t\t\t\t'inst': [],\r\n\t\t\t\t\t'year': [],\r\n\t\t\t\t\t'journal': [],\r\n\t\t\t\t\t'lang': []\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetSelected: (state, sel) => {\r\n\r\n\t\t\tObject.keys(sel.selected['paper']).forEach((key) => {\r\n\r\n\r\n\t\t\t\tif (sel.filters['paper'][key] !== undefined) {\r\n\t\t\t\t\tsel.selected['paper'][key] = sel.selected['paper'][key].map((filterItem) => {\r\n\t\t\t\t\t\tlet rtv = -1;\r\n\r\n\t\t\t\t\t\tObject.keys(sel.filters['paper'][key].list).forEach((item, idx) => {\r\n\t\t\t\t\t\t\tif (item == filterItem) {\r\n\t\t\t\t\t\t\t\trtv = idx;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn rtv;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsel.selected['paper'][key] = sel.selected['paper'][key].filter(x => x >= 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsel.selected['paper'][key] = [];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tObject.keys(sel.selected['project']).forEach((key) => {\r\n\r\n\t\t\t\tif (sel.filters['project'][key] !== undefined) {\r\n\t\t\t\t\tif (key != 'rsc' && key != 'fund') {\r\n\t\t\t\t\t\tsel.selected['project'][key] = sel.selected['project'][key].map((filterItem) => {\r\n\t\t\t\t\t\t\tlet rtv = -1;\r\n\t\t\t\t\t\t\tObject.keys(sel.filters['project'][key].list).forEach((item, idx) => {\r\n\t\t\t\t\t\t\t\tif (item == filterItem) {\r\n\t\t\t\t\t\t\t\t\trtv = idx;\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn rtv;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsel.selected['project'][key] = sel.selected['project'][key].filter(x => x >= 0);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsel.selected['project'][key] = [];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tstate.selected = sel.selected;\r\n\t\t},\r\n\t\tsetRank: (state, rank) => {\r\n\t\t\tstate.rankinst = rank.Insts;\r\n\t\t},\r\n\t\tsetNtis: (state, author_list) =>{\r\n\t\t\tstate.a_url  = author_list;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tactions: {\r\n\r\n\t\tuploadIFFile: (context, data) => {\r\n\t\t\tpost(context, 'uploadIFFile', data).then(response => {\r\n\t\t\t\tcontext.commit('showSnack', response.data + \"  .\")\r\n\t\t\t});\r\n\t\t},\r\n\t\tdownloadExperts: (context, data) => {\r\n\t\t\tdata.itemsPerPage = -2;\r\n\t\t\treturn get(context, 'getExperts', data).then(response => {\r\n\t\t\t\tDownloadJsonData(response.data, data._site + \"_\" + data._id, true, 2);\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetExpertPapers: (context, data) => {\r\n\t\t\t// console.log('DATA', data);\r\n\t\t\t// let dd = {\r\n\t\t\t// \tcols: [{\r\n\t\t\t// \t\tname: \"A\",\r\n\t\t\t// \t\tkey: 0\r\n\t\t\t// \t}, {\r\n\t\t\t// \t\tname: \"B\",\r\n\t\t\t// \t\tkey: 1\r\n\t\t\t// \t}, {\r\n\t\t\t// \t\tname: \"C\",\r\n\t\t\t// \t\tkey: 2\r\n\t\t\t// \t}],\r\n\t\t\t// \tdata: [\r\n\t\t\t// \t[\"id\", \"name\", \"value\"],\r\n\t\t\t// \t[1, \"sheetjs\", 7262],\r\n\t\t\t// \t[2, \"js-xlsx\", 6969]\r\n\t\t\t// ]\r\n\t\t\t// };\r\n\t\t\t// var worksheet = XLSX.utils.aoa_to_sheet(dd.data);\r\n\t\t\t// var new_workbook = XLSX.utils.book_new();\r\n\t\t\t// XLSX.utils.book_append_sheet(new_workbook, worksheet, \"SheetJS\");\r\n\t\t\t// const wbout = XLSX.write(new_workbook, {\r\n\t\t\t// \ttype: \"base64\",\r\n\t\t\t// \tbookType: \"xlsx\"\r\n\t\t\t// });\r\n\t\t\t// const body = wbout;\r\n\t\t\t// stream.fetch({\r\n\t\t\t// \tmethod: 'GET',\r\n\t\t\t// \ttype: 'json',\r\n\t\t\t// \turl: \"http://203.255.92.48:8082/getExpertPapers\",\r\n\t\t\t// \tbody: body\r\n\t\t\t// }, function(res) {\r\n\t\t\t// \t//modal.toast({ message: 'KEY: ' + res.data.key, duration: 10 });\r\n\t\t\t//\r\n\t\t\t// \t// self.version = res.data.key\r\n\t\t\t// });\r\n\r\n\r\n\t\t\treturn get(context, 'getExpertPapers', data).then(response => {\r\n\t\t\t\tlet flag = data.site === 'NTIS' ? 0 : 1;\r\n\t\t\t\tif (data.flag === undefined)\r\n\t\t\t\t\tDownloadJsonData(response.data, data.name + \"_\" + data.site, true, flag);\r\n\t\t\t\telse\r\n\t\t\t\t\tDownloadJsonData(response.data, data.site + \"_\" + data.keyId + \"_total\", true, 3);\r\n\r\n\r\n\r\n\t\t\t\t// dd.data\r\n\t\t\t\t// \tconst workbook = new Excel.Workbook();\r\n\t\t\t\t// \tconst worksheet = workbook.addWorksheet('My Sheet');\r\n\t\t\t\t// \tworksheet.columns = [\r\n\t\t\t\t// \t\t{\r\n\t\t\t\t// \t\t\theader: 'ProjectNumber',\r\n\t\t\t\t// \t\t\tkey: 'id',\r\n\t\t\t\t// \t\t\twidth: 10\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// ];\r\n\t\t\t\t// \tresponse.data.forEach((item) => {\r\n\t\t\t\t// \t\tworksheet.addRow(item);\r\n\t\t\t\t// \t});\r\n\t\t\t\t// \tvar tempFilePath = tempfile('.xlsx');\r\n\t\t\t\t//  workbook.xlsx.writeFile(tempFilePath).then(function() {\r\n\t\t\t\t// \t\t res.sendFile(tempFilePath, function(err){\r\n\t\t\t\t// \t\t });\r\n\t\t\t\t//  });\r\n\t\t\t\t//\r\n\t\t\t\t// \t// worksheet.addRow({id: 1, name: 'John Doe', dob: new Date(1970,1,1)});\r\n\t\t\t\t// \t// worksheet.addRow({id: 2, name: 'Jane Doe', dob: new Date(1965,1,7)});\r\n\t\t\t\t// \tworkbook.commit();\r\n\t\t\t\t// \tworkbook.xlsx.writeFile('./temp.xlsx').then(function() {\r\n\t\t\t\t// \t\t// done\r\n\t\t\t\t// \t});\r\n\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetExpertRelation: (context, data) => {\r\n\t\t\t// const {\r\n\t\t\t// \t_idx,\r\n\t\t\t// \tflag\r\n\t\t\t// } = data;\r\n\t\t\treturn get(context, 'getExpertRelation', data);\r\n\t\t\t// .then(response => {\r\n\t\t\t// \tcontext.commit('addExpertRelation', {\r\n\t\t\t// \t\tdata: response.data,\r\n\t\t\t// \t\t_idx,\r\n\t\t\t// \t\tflag\r\n\t\t\t// \t})\r\n\t\t\t// })\r\n\t\t},\r\n\t\tsendCrawlRequest: (context, data) => {\r\n\t\t\treturn get(context, 'sendCrawlRequest', data);\r\n\r\n\r\n\t\t},\r\n\t\tgetExperts: (context, data) => {\r\n\t\t\t// console.log('DATA', data);\r\n\t\t\t// if (data.dFlag !== undefined) {\r\n\t\t\t// \tdata.itemsPerPage = -1;\r\n\t\t\t// }\r\n\t\t\t// get(context, 'getExperts', data)\r\n\t\t\treturn get(context, 'getExperts', data).then(response => {\r\n\t\t\t\t// if (data._idx != 0) {\r\n\t\t\t\tif (data.dFlag !== undefined) {\r\n\t\t\t\t\t// response\r\n\t\t\t\t\t// console.log('RESPONSE', response);\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontext.commit('addExperts', {\r\n\t\t\t\t\t\tdata: response.data,\r\n\t\t\t\t\t\t_id: data._id,\r\n\t\t\t\t\t\t_idx: data['_idx']\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// } else {\r\n\t\t\t\t// console.log(response.data);\r\n\t\t\t\t// }\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tgetDetailHistory: (context, id) => {\r\n\r\n\t\t\tget(context, 'getDetailHistory', id)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tconsole.log(response.data)\r\n\t\t\t\t\tcontext.commit('addDetailHistory', response.data);\r\n\r\n\t\t\t\t})\r\n\t\t},\r\n\t\trequestSearch: (context, data) => {\r\n\r\n\t\t\tpost(context, 'requestSearch', data)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tflag,\r\n\t\t\t\t\t\tresults\r\n\t\t\t\t\t} = response.data;\r\n\t\t\t\t\tif (flag)\r\n\t\t\t\t\t\tcontext.commit('addHistory', results);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t// closeSnack(context);\r\n\t\t\t\t\t\tcontext.commit('showSnack', \"KeyId : \" + results + \" Now Crawling!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\t\t//getHistories\r\n\t\tgetHistories: (context, flag) => {\r\n\t\t\t//test id = 1\r\n\r\n\r\n\r\n\t\t\tif (flag === undefined && context.state.histories.length != 0) {\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tget(context, 'getHistories')\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\t// console.log('RESPONSE', response);\r\n\t\t\t\t\t// if(response.data)\r\n\r\n\r\n\t\t\t\t\tcontext.commit('setHistories', response.data);\r\n\r\n\t\t\t\t})\r\n\r\n\t\t\t// get(context, 'getHistories', {\r\n\t\t\t// \t\tid: 1\r\n\t\t\t// \t})\r\n\t\t\t// \t.then(response => {\r\n\t\t\t// \t\tcontext.commit('setHistories', response.data)\r\n\t\t\t// \t})\r\n\t\t},\r\n\r\n\t\tgetSiteStatus: context => {\r\n\t\t\treturn get(context, 'getSiteStatus').then(response => {\r\n\t\t\t\tcontext.commit('setSites', response.data);\r\n\t\t\t})\r\n\t\t},\r\n\t\tgetTest: context => {\r\n\t\t\tshowSnack(msg.remove, context)\r\n\t\t},\r\n\t\tremoveHistory: (context, data) => {\r\n\t\t\treturn get(context, 'removeHistory', data);\r\n\t\t},\r\n\t\teditHistory: (context, data) => {\r\n\t\t\treturn get(context, 'editHistory', data);\r\n\t\t},\r\n\t\tgetIntegrationData: (context, data) => {\r\n\t\t\tconsole.log('DATA', data);\r\n\r\n\t\t\tcontext.state.igID = data.id;\r\n\t\t\tcontext.state.igKeyword = data.query_keyword;\r\n\t\t\tcontext.commit('setFilters', {});\r\n\t\t\t// return post(context, 'getIntegrationData', data).then(response => {\r\n\t\t\t// \t// response.data\r\n\t\t\t// \tconsole.log('RESPONSE.DATA', response.data);\r\n\t\t\t// \tcontext.commit('setFilters', response.data);\r\n\t\t\t// });\r\n\t\t},\r\n\t\tgetIntegrationResult: (context, data) => {\r\n\t\t\tconsole.log('CONTEXT, DATA', context, data);\r\n\r\n\t\t\tlet size = 0;\r\n\t\t\tdata.fId = -1;\r\n\t\t\tdata.filter = context.state.filters;\r\n\t\t\t// data.project = context.state.selected.project;\r\n\t\t\t// data.paper = context.state.selected.paper;\r\n\t\t\t// // let data = {};\r\n\r\n\t\t\t// let data = Object.assign({}, _data);\r\n\t\t\t// Object.assign\r\n\t\t\tObject.keys(data.filter).forEach((key) => {\r\n\t\t\t\tObject.keys(data.filter[key]).forEach((ff) => {\r\n\t\t\t\t\t// console.log('FILTER', filter);\r\n\t\t\t\t\t// console.log('KEY', key);\r\n\t\t\t\t\t// context.state.filters[key][filter]\r\n\t\t\t\t\t// // console.log('CONTEXT.STATE.FILTERS[KEY][FILTER]', context.state.filters[key][filter]);\r\n\t\t\t\t\tif (ff == 'year') {\r\n\t\t\t\t\t\tdata.filter[key][ff].selected = data.filter[key][ff].selected.map((item) => {\r\n\t\t\t\t\t\t\tconsole.log('ITEM', item);\r\n\t\t\t\t\t\t\t// \t// console.log();\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t// \t// context.state.filters[key][filter]['list']\r\n\t\t\t\t\t\t\t// \t// console.log('CONTEXT.STATE.FILTERS[KEY][FILTER][\\'LIST\\']', );\r\n\t\t\t\t\t\t\t// \t// console.log('CONTEXT.STATE.FILTERS[KEY][FILTER].LIST[ITEM]', context.state.filters[key][filter]['list'][item]);\r\n\t\t\t\t\t\t\tconsole.log('DATA.FILTER[KEY][FF].LIST[ITEM]', data.filter[key][ff].list);\r\n\t\t\t\t\t\t\treturn Array.from(data.filter[key][ff].list)[item][0];\r\n\t\t\t\t\t\t\t// context.state.filters[key][filter]['list']\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log('TTTTTTTTTTTTTTTT', data.filter[key][ff].selected);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// console.log('DATA[KEY][FILTER]', data[key][filter]);\r\n\t\t\t\t\tsize += data.filter[key][ff].selected.length;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t// data\r\n\t\t\tconsole.log('DATA', data);\r\n\t\t\t// console.log('DATA', _data);\r\n\t\t\tconsole.log('SIZE', size);\r\n\t\t\tif (size == 0) {\r\n\t\t\t\t// if (context.state.prevfId != 0) {\r\n\t\t\t\t// data.fId = context.state.prevfId;\r\n\t\t\t\t// } else {\r\n\t\t\t\tdata.fId = 0;\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\r\n\t\t\tdata.prevfId = context.state.prevfId;\r\n\t\t\t// return;\r\n\r\n\t\t\tcontext.state.histories.forEach((item) => {\r\n\t\t\t\tif (item._id == data.keyId) {\r\n\t\t\t\t\tdata.sites = item.sites;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t// //data.fId = 1;\r\n\t\t\treturn post(context, 'getIntegrationResult', data).then(response => {\r\n\t\t\t\t// response.data\r\n\t\t\t\tconsole.log('RESPONSE.DATA', response.data);\r\n\t\t\t\tcontext.commit('setIntegrationResult', response.data);\r\n\t\t\t\tcontext.state.igTotal = response.data.totalExperts;\r\n\t\t\t\tif (response.data.prevfId != 0)\r\n\t\t\t\t\tcontext.state.prevfId = response.data.prevfId;\r\n\t\t\t\tcontext.commit('setFilters', response.data.filters);\r\n\r\n\t\t\t\t// .then(context.commit('setSelected', response.data));\r\n\r\n\t\t\t\treturn response.data;\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tgetIntegrationRaw: (context, data) => {\r\n\r\n\t\t\treturn post(context, 'getIntegrationRaw', data).then(response => {\r\n\t\t\t\t// response.data\r\n\t\t\t\tconsole.log('RESPONSE.DATA', response.data);\r\n\t\t\t\tresponse.data.idx = data.idx;\r\n\t\t\t\t// return response.data;\r\n\t\t\t\tcontext.commit('setIntegrationRaw', response.data);\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tdeleteIntegration: (context, keyId) => {\r\n\t\t\tget(context, 'deleteIntegration', {\r\n\t\t\t\t\"keyId\": keyId\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetReloadPage: (context, data) => {\r\n\r\n\t\t\treturn post(context, 'getReloadPage', data).then(response => {\r\n\t\t\t\t// response.data\r\n\t\t\t\tconsole.log('RESPONSE.DATA', response.data);\r\n\t\t\t\tcontext.commit('setIntegrationResult', response.data);\r\n\t\t\t\t//\tcontext.commit('setIntegrationRaw', response.data);\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tgetInstRank: (context, data) =>{\r\n\t\t\t//console.log(\"string\");\r\n\t\t\treturn get(context, 'getInstRank', data).then(response =>{\r\n\t\t\t\tcontext.commit('setRank', response.data);\r\n\t\t\t\tconsole.log(\"setRank\",response.data);\r\n\t\t\t}) ;\r\n\t\t},\r\n\t\tgetNtisAPI: (context, data) =>{\r\n\t\t\treturn get(context, 'getNtisAPI', data).then(response =>{\r\n\t\t\t\tcontext.commit('setNtis', response.data);\r\n\t\t\t\tconsole.log('setNtis',response.data)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t}\r\n\r\n\t});\r\n"]}]}