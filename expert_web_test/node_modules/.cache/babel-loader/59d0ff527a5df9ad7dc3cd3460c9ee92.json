{"remainingRequest":"C:\\Users\\netdb\\Git\\expert_test\\expert_test\\expert_web_test\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\netdb\\Git\\expert_test\\expert_test\\expert_web_test\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\netdb\\Git\\expert_test\\expert_test\\expert_web_test\\src\\store.js","dependencies":[{"path":"C:\\Users\\netdb\\Git\\expert_test\\expert_test\\expert_web_test\\src\\store.js","mtime":1666093860862},{"path":"C:\\Users\\netdb\\Git\\expert_test\\expert_test\\expert_web_test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662543709072},{"path":"C:\\Users\\netdb\\Git\\expert_test\\expert_test\\expert_web_test\\node_modules\\babel-loader\\lib\\index.js","mtime":1662543708310},{"path":"C:\\Users\\netdb\\Git\\expert_test\\expert_test\\expert_web_test\\node_modules\\eslint-loader\\index.js","mtime":1662543717663}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZ2V0LCBwb3N0IH0gZnJvbSAnLi9hcGlVdGlscyc7CmltcG9ydCBYTFNYIGZyb20gJ3hsc3gnOwppbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJzsKVnVlLnVzZShWdWV4KTsgLy8gY29uc3QgaW5pdFdlaWdodCA9IG5ldyBBcnJheSg2KS5maWxsKDUwKQoKdmFyIHNoZWV0TmFtZXMgPSBbJ1Byb2plY3RzJywgJ1BhcGVycycsICdFeHBlcnRzJ107IC8vRG93bmxvYWRKc29uRGF0YShyZXNwb25zZS5kYXRhLCBkYXRhLm5hbWUgKyAiXyIgKyBkYXRhLnNpdGUsIHRydWUsIGZsYWcpOwoKZnVuY3Rpb24gRG93bmxvYWRKc29uRGF0YShKU09ORGF0YSwgRmlsZVRpdGxlLCBTaG93TGFiZWwsIEZsYWcpIHsKICAvLyBjb25zb2xlLmxvZygnSlNPTkRBVEEnLCBKU09ORGF0YSk7CiAgLy9JZiBKU09ORGF0YSBpcyBub3QgYW4gb2JqZWN0IHRoZW4gSlNPTi5wYXJzZSB3aWxsIHBhcnNlIHRoZSBKU09OIHN0cmluZyBpbiBhbiBPYmplY3QKICB2YXIgd2IgPSBYTFNYLnV0aWxzLmJvb2tfbmV3KCk7IC8vIGNvbnNvbGUubG9nKCdXQicsIHdiKTsKCiAgZnVuY3Rpb24gczJhYihzKSB7CiAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKHMubGVuZ3RoKTsgLy9jb252ZXJ0IHMgdG8gYXJyYXlCdWZmZXIKCiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zik7IC8vY3JlYXRlIHVpbnQ4YXJyYXkgYXMgdmlld2VyCgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZpZXdbaV0gPSBzLmNoYXJDb2RlQXQoaSkgJiAweEZGOwogICAgfSAvL2NvbnZlcnQgdG8gb2N0ZXQKCgogICAgcmV0dXJuIGJ1ZjsKICB9CgogIHZhciBvdXREYXRhID0gW107CgogIGZ1bmN0aW9uIGlzTG9vb3BhYmxlKHcpIHsKICAgIHZhciBhcnJheUNvbnN0cnVjdG9yID0gW10uY29uc3RydWN0b3I7CiAgICB2YXIgb2JqZWN0Q29uc3RydWN0b3IgPSB7fS5jb25zdHJ1Y3RvcjsKCiAgICBpZiAodyAhPT0gbnVsbCkgewogICAgICBpZiAody5jb25zdHJ1Y3RvciA9PT0gYXJyYXlDb25zdHJ1Y3RvcikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICBpZiAody5jb25zdHJ1Y3RvciA9PT0gb2JqZWN0Q29uc3RydWN0b3IpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9IC8vIGxldCBmaWVsZEl0ZW1zID0gT2JqZWN0LmtleXMoZmllbGRzW0ZsYWddKTsKCgogIGZvciAodmFyIGkgPSAwOyBpIDwgSlNPTkRhdGEubGVuZ3RoOyBpKyspIHsKICAgIHZhciB0ZW1wID0ge307IC8vIGxldCBqID0gMDsKCiAgICBmb3IgKHZhciBmaWVsZCBpbiBKU09ORGF0YVtpXSkgewogICAgICB2YXIgZkRhdGEgPSBKU09ORGF0YVtpXVtmaWVsZF07CgogICAgICBpZiAoaXNMb29vcGFibGUoZkRhdGEpKSB7CiAgICAgICAgdmFyIF90ZW1wID0gIiI7CgogICAgICAgIGZvciAodmFyIGluRGF0YSBpbiBmRGF0YSkgewogICAgICAgICAgX3RlbXAgKz0gaW5EYXRhICsgIiA6ICIgKyBmRGF0YVtpbkRhdGFdOwogICAgICAgIH0KCiAgICAgICAgZkRhdGEgPSBfdGVtcDsKICAgICAgfSAvLyBpZiAoZmllbGQgPT0gJ25hbWUnIHx8IGZpZWxkID09ICdpbnN0JykKICAgICAgLy8gCWZEYXRhID0gZkRhdGEucmVwbGFjZSgvLC9nLCAiOyIpOwoKCiAgICAgIGlmIChmRGF0YSA9PT0gdW5kZWZpbmVkIHx8IGZEYXRhID09ICdudWxsJyB8fCBmRGF0YSA9PSAiXCJOb25lXCIiIHx8IGZEYXRhID09IG51bGwpIGZEYXRhID0gJy0nOwogICAgICB0ZW1wW2ZpZWxkXSA9IGZEYXRhOyAvLyByb3cgKz0gZkRhdGEgKyAnLCc7CiAgICB9CgogICAgb3V0RGF0YS5wdXNoKHRlbXApOwogIH0KCiAgdmFyIG5ld1dvcmtzaGVldCA9IFhMU1gudXRpbHMuanNvbl90b19zaGVldChvdXREYXRhKTsKICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdiLCBuZXdXb3Jrc2hlZXQsIHNoZWV0TmFtZXNbRmxhZ10pOyAvLwogIC8vIGNvbnN0IHdvcmtzaGVldCA9IFhMU1gudXRpbHMuYW9hX3RvX3NoZWV0KGFycmF5T2ZBcnJheSk7CgogIG5ld1dvcmtzaGVldFsnIWNvbHMnXSA9IGZpdFRvQ29sdW1uKG91dERhdGEpOwoKICBmdW5jdGlvbiBmaXRUb0NvbHVtbihvdXREYXRhKSB7CiAgICAvLyBjb25zb2xlLmxvZygnT1VUREFUQScsIG91dERhdGEpOwogICAgLy8gZ2V0IG1heGltdW0gY2hhcmFjdGVyIG9mIGVhY2ggY29sdW1uCiAgICB2YXIgY29sU2l6ZSA9IFtdOwoKICAgIGZvciAodmFyIF9maWVsZCBpbiBvdXREYXRhWzBdKSB7CiAgICAgIC8vIG91dERhdGFbMF1bZmllbGRdCiAgICAgIC8vIGNvbnNvbGUubG9nKCdPVVREQVRBWzBdW0ZJRUxEXScsIG91dERhdGFbMF1bZmllbGRdKTsKICAgICAgdmFyIHdjaCA9IG91dERhdGFbMF1bX2ZpZWxkXS5sZW5ndGg7CiAgICAgIGlmICh3Y2ggPT0gMCB8fCB3Y2ggPT09IHVuZGVmaW5lZCkgd2NoID0gMjA7CiAgICAgIGlmICh3Y2ggPiAxMDApIHdjaCA9IDEwMDsKICAgICAgY29sU2l6ZS5wdXNoKHsKICAgICAgICAnd2NoJzogd2NoCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBjb2xTaXplOwogIH0KCiAgdmFyIHdib3V0ID0gWExTWC53cml0ZSh3YiwgewogICAgYm9va1R5cGU6ICd4bHN4JywKICAgIHR5cGU6ICdiaW5hcnknCiAgfSk7CiAgc2F2ZUFzKG5ldyBCbG9iKFtzMmFiKHdib3V0KV0sIHsKICAgIHR5cGU6ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iCiAgfSksIEZpbGVUaXRsZSArICcueGxzeCcpOyAvLyBsZXQgYXJyRGF0YSA9IHR5cGVvZiBKU09ORGF0YSAhPSAnb2JqZWN0JyA/IEpTT04ucGFyc2UoSlNPTkRhdGEpIDogSlNPTkRhdGE7CiAgLy8gbGV0IENTViA9ICcnOwogIC8vIGlmIChTaG93TGFiZWwpIHsKICAvLyAJbGV0IHJvdyA9ICIiOwogIC8vCiAgLy8gCWxldCBmaWVsZEl0ZW1zID0gT2JqZWN0LmtleXMoZmllbGRzW0ZsYWddKTsKICAvLyAJZmllbGRJdGVtcy5mb3JFYWNoKChmaWVsZCkgPT4gewogIC8vIAkJcm93ICs9IGZpZWxkc1tGbGFnXVtmaWVsZF0gKyAnLCc7CiAgLy8gCX0pOwogIC8vIAlyb3cgPSByb3cuc2xpY2UoMCwgLTEpOwogIC8vIAlDU1YgKz0gcm93ICsgJ1xyXG4nOwogIC8vIH0KICAvLyBmb3IgKHZhciBpID0gMDsgaSA8IGFyckRhdGEubGVuZ3RoOyBpKyspIHsKICAvLyAJbGV0IHJvdyA9ICIiOwogIC8vIAlmb3IgKGxldCBmaWVsZCBpbiBmaWVsZHNbRmxhZ10pIHsKICAvLyAJCWxldCBmRGF0YSA9IGFyckRhdGFbaV1bZmllbGRdOwogIC8vIAkJaWYgKGZpZWxkID09ICduYW1lJyB8fCBmaWVsZCA9PSAnaW5zdCcpCiAgLy8gCQkJZkRhdGEgPSBmRGF0YS5yZXBsYWNlKC8sL2csICI7Iik7CiAgLy8gCQlpZiAoZkRhdGEgPT09IHVuZGVmaW5lZCB8fCBmRGF0YSA9PSAnbnVsbCcgfHwgZkRhdGEgPT0gIlwiTm9uZVwiIikKICAvLyAJCQlmRGF0YSA9ICctJzsKICAvLyAJCXJvdyArPSBmRGF0YSArICcsJzsKICAvLyAJfQogIC8vIAlyb3cuc2xpY2UoMCwgcm93Lmxlbmd0aCAtIDEpOwogIC8vIAlDU1YgKz0gcm93ICsgJ1xyXG4nOwogIC8vIH0KICAvLyBpZiAoQ1NWID09ICcnKSB7CiAgLy8gCWFsZXJ0KCJJbnZhbGlkIGRhdGEiKTsKICAvLyAJcmV0dXJuOwogIC8vIH0KICAvLyB2YXIgZmlsZW5hbWUgPSBGaWxlVGl0bGU7CiAgLy8gdmFyIGJsb2IgPSBuZXcgQmxvYihbIlx1ZmVmZiIgKyBDU1ZdLCB7CiAgLy8gCXR5cGU6ICd0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04OycKICAvLyB9KTsKICAvLyBpZiAobmF2aWdhdG9yLm1zU2F2ZUJsb2IpIHsgLy8gSUUgMTArCiAgLy8gCW5hdmlnYXRvci5tc1NhdmVCbG9iKGJsb2IsIGZpbGVuYW1lKTsKICAvLyB9IGVsc2UgewogIC8vIAl2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAvLyAJaWYgKGxpbmsuZG93bmxvYWQgIT09IHVuZGVmaW5lZCkgeyAvLyBmZWF0dXJlIGRldGVjdGlvbgogIC8vIAkJdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgLy8gCQlsaW5rLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHVybCk7CiAgLy8gCQlsaW5rLnN0eWxlID0gInZpc2liaWxpdHk6aGlkZGVuIjsKICAvLyAJCWxpbmsuZG93bmxvYWQgPSBmaWxlbmFtZSArICIuY3N2IjsKICAvLyAJCWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgLy8gCQlsaW5rLmNsaWNrKCk7CiAgLy8gCQlkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogIC8vIAl9CiAgLy8gfQp9Cgp2YXIgbXNnID0gewogIHRpbWVvdXQ6IDMwMDAsCiAgLy8zcwogIG9rOiAi7KCV7IOB7KCB7J24IOydkeuLteyeheuLiOuLpC4iLAogIC8vIGhpc3Rvcnlfb2s6ICLqsoDsg4kg66qp66Gd7J2EIOygleyDgeyggeycvOuhnCDrtojrn6zsmZTsirXri4jri6QuIiwKICBmYWlsOiAi67mE7KCV7IOB7KCB7J24IOydkeuLteyeheuLiOuLpC4iLAogIHJ1bjogIuuypOy5mOuniO2CueydtCDsi5zsnpHrkJjsl4jsirXri4jri6QuIgp9OyAvL3NuYWNrYmFyCgpleHBvcnQgdmFyIHNob3dTbmFjayA9IGZ1bmN0aW9uIHNob3dTbmFjayhjdHh0LCByZXApIHsKICB2YXIgbXNncCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogIiI7CgogIGlmIChtc2dwID09PSAiIikgey8vIGlmIChyZXAuc3RhdHVzID09IDIwMCB8fCByZXAuc3RhdHVzID09IDIwNCkKICAgIC8vIAljdHh0LmNvbW1pdCgnc2hvd1NuYWNrJywgbXNnLm9rKQogICAgLy8gZWxzZSBpZiAocmVwLnN0YXR1cyA9PSA0MDQpCiAgICAvLyAJY3R4dC5jb21taXQoJ3Nob3dTbmFjaycsIG1zZy5mYWlsKQogIH0gZWxzZSB7CiAgICBjdHh0LmNvbW1pdCgnc2hvd1NuYWNrJywgbXNncCk7CiAgfQp9OyAvL2xvYWRpbmcgYmFyCgpleHBvcnQgdmFyIHNldExvYWRpbmcgPSBmdW5jdGlvbiBzZXRMb2FkaW5nKGN0eHQsIGlzTG9hZGluZykgewogIGN0eHQuY29tbWl0KCdzZXRJc0xvYWRpbmcnLCBpc0xvYWRpbmcpOwp9OwpleHBvcnQgdmFyIHN0b3JlID0gbmV3IFZ1ZXguU3RvcmUoewogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tc3RhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIHN0YXRlOiB7CiAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgc25hY2s6IHsKICAgICAgaXNTaG93OiBmYWxzZSwKICAgICAgbXNnOiAiIgogICAgfSwKICAgIGlzTWluaTogZmFsc2UsCiAgICBoaXN0b3JpZXM6IFtdLAogICAgYWN0aXZlVGFiOiBudWxsLAogICAgYWN0aXZlSW5uZXJUYWI6IHt9LAogICAgdGFiczogW10sCiAgICBzaXRlczoge30sCiAgICBpbnRlZ3JhdGlvbnM6IFtdLAogICAgaWdJRDogLTEsCiAgICBpZ0tleXdvcmQ6ICIiLAogICAgZmlsdGVyczogewogICAgICAicHJvamVjdCI6IHt9LAogICAgICAicGFwZXIiOiB7fQogICAgfSwKICAgIGlnVG90YWw6IDAsCiAgICBpZ0RvbWVzdGljOiAwLAogICAgaWdJbnRlcm5hdGlvbmFsOiAwLAogICAgaWdSYXc6IHt9LAogICAgcHJldmZJZDogMCwKICAgIHJhbmtpbnN0OiBbXSwKICAgIGFfdXJsOiBbXSAvLyBzZWxlY3RlZDogewogICAgLy8gCQknaW5zdCc6IFtdLAogICAgLy8gCQkncnNjJzogW10sCiAgICAvLyAJCSdmdW5kJzogW10sCiAgICAvLyAJCSd5ZWFyJzogW10KICAgIC8vIAl9LAogICAgLy8gCSdwYXBlcic6IHsKICAgIC8vIAkJJ2luc3QnOiBbXSwKICAgIC8vIAkJJ3llYXInOiBbXSwKICAgIC8vIAkJJ2pvdXJuYWwnOiBbXSwKICAgIC8vIAkJJ2xhbmcnOiBbXQogICAgLy8gCX0sCiAgICAvLyB9CgogIH0sCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vc3RhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tbXV0YXRpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICBtdXRhdGlvbnM6IHsKICAgIHNldElzTWluaTogZnVuY3Rpb24gc2V0SXNNaW5pKHN0YXRlLCBmbGFnKSB7CiAgICAgIHN0YXRlLmlzTWluaSA9IGZsYWc7CiAgICB9LAogICAgY2xvc2VUYWI6IGZ1bmN0aW9uIGNsb3NlVGFiKHN0YXRlLCBpZCkgewogICAgICBzdGF0ZS50YWJzLnNwbGljZShzdGF0ZS50YWJzLmZpbmRJbmRleChmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiB4Ll9pZCA9PSBpZDsKICAgICAgfSksIDEpOyAvL3N0YXRlLmFjdGl2ZUlubmVyVGFiW2RIaXN0b3J5Ll9pZF0gPSAwOwoKICAgICAgaWYgKHN0YXRlLnRhYnMubGVuZ3RoID4gMCkgc3RhdGUuYWN0aXZlVGFiID0gc3RhdGUudGFic1swXS5faWQ7IC8vIGlmKGlkeCAhPSBzdGF0ZS50YWJzLmxlbmd0aCl7CiAgICAgIC8vIAkJc3RhdGUudGFicy4KICAgICAgLy8gfQogICAgICAvLwogICAgICAvLyBpZiAoc3RhdGUuYWN0aXZlVGFiID09IGlkeCkKICAgICAgLy8gCXN0YXRlLmFjdGl2ZVRhYiA9IHN0YXRlLnRhYnMubGVuZ3RoOwogICAgfSwKICAgIC8vc25hY2tiYXIKICAgIGNsb3NlU25hY2s6IGZ1bmN0aW9uIGNsb3NlU25hY2soc3RhdGUpIHsKICAgICAgc3RhdGUuc25hY2suaXNTaG93ID0gZmFsc2U7CiAgICB9LAogICAgc2hvd1NuYWNrOiBmdW5jdGlvbiBzaG93U25hY2soc3RhdGUsIG1lc3NhZ2UpIHsKICAgICAgc3RhdGUuc25hY2sgPSB7CiAgICAgICAgaXNTaG93OiB0cnVlLAogICAgICAgIC8vIGNvbG9yOiAiY3lhbiBkYXJrZW4tMiIsCiAgICAgICAgbXNnOiBtZXNzYWdlLAogICAgICAgIHRpbWVvdXQ6IG1zZy50aW1lb3V0CiAgICAgIH07IC8vIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ29iamVjdCcpIHsKICAgICAgLy8gCWxldCB7CiAgICAgIC8vIAkJbXNnLAogICAgICAvLyAJCWNvbG9yCiAgICAgIC8vCiAgICAgIC8vIAl9ID0gbWVzc2FnZTsKICAgICAgLy8gCXN0YXRlLnNuYWNrID0gewogICAgICAvLyAJCWlzU2hvdzogdHJ1ZSwKICAgICAgLy8gCQltc2csCiAgICAgIC8vIAkJY29sb3IsCiAgICAgIC8vIAkJdGltZW91dDogbXNnLnRpbWVvdXQKICAgICAgLy8gCX07NwogICAgICAvLyB9IGVsc2UgewogICAgICAvLyAJc3RhdGUuc25hY2sgPSB7CiAgICAgIC8vIAkJaXNTaG93OiB0cnVlLAogICAgICAvLyAJCWNvbG9yOiAiY3lhbiBkYXJrZW4tMiIsCiAgICAgIC8vIAkJbXNnOiBtZXNzYWdlLAogICAgICAvLyAJCXRpbWVvdXQ6IG1zZy50aW1lb3V0CiAgICAgIC8vIAl9CiAgICAgIC8vIH0KICAgIH0sCiAgICBzaG93YWxhcm06IGZ1bmN0aW9uIHNob3dhbGFybShzdGF0ZSwgbWVzc2FnZSkgewogICAgICBzdGF0ZS5zbmFjayA9IHsKICAgICAgICBpc1Nob3c6IHRydWUsCiAgICAgICAgLy8gY29sb3I6ICJjeWFuIGRhcmtlbi0yIiwKICAgICAgICBtc2c6IG1lc3NhZ2UsCiAgICAgICAgdGltZW91dDogbXNnLnRpbWVvdXQKICAgICAgfTsKICAgIH0sCiAgICBzZXRJc0xvYWRpbmc6IGZ1bmN0aW9uIHNldElzTG9hZGluZyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldEhpc3RvcmllczogZnVuY3Rpb24gc2V0SGlzdG9yaWVzKHN0YXRlLCBoaXN0b3JpZXMpIHsKICAgICAgaWYgKGhpc3Rvcmllcy5sZW5ndGggPiAwKSB7CiAgICAgICAgaGlzdG9yaWVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW0pOwogICAgICAgICAgaXRlbS5zaXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzaXRlKSB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNpdGUpOwogICAgICAgICAgICBzaXRlLl9pZCA9IGl0ZW0uX2lkOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgc3RhdGUuaGlzdG9yaWVzID0gaGlzdG9yaWVzOwogICAgICB9IC8vIHN0YXRlLmhpc3Rvcmllcy5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgIC8vIAlsZXQgdG90YWwgPSAwCiAgICAgIC8vIAlpdGVtLnNpdGVzLmZvckVhY2goKHNpdGUsIGkpID0+IHsKICAgICAgLy8gCQlpdGVtW3NpdGVdID0gTWF0aC5yYW5kb20oKSAqIDEwMAogICAgICAvLyAJCWlmIChpICE9IDApIHsKICAgICAgLy8gCQkJdG90YWwgKz0gaXRlbVtzaXRlXQogICAgICAvLyAJCX0KICAgICAgLy8gCX0pOwogICAgICAvLyAJaXRlbVsnQUxMJ10gPSB0b3RhbCAvIChpdGVtLnNpdGVzLmxlbmd0aCAtIDEpOwogICAgICAvLyB9KTsKCiAgICB9LAogICAgYWRkSGlzdG9yeTogZnVuY3Rpb24gYWRkSGlzdG9yeShzdGF0ZSwgaGlzdG9yeSkgewogICAgICBzdGF0ZS5oaXN0b3JpZXMudW5zaGlmdChoaXN0b3J5KTsKICAgIH0sCiAgICBhZGREZXRhaWxIaXN0b3J5OiBmdW5jdGlvbiBhZGREZXRhaWxIaXN0b3J5KHN0YXRlLCBkSGlzdG9yeSkgewogICAgICB2YXIgaWR4ID0gc3RhdGUuaGlzdG9yaWVzLmZpbmRJbmRleChmdW5jdGlvbiAoaCkgewogICAgICAgIHJldHVybiBoLl9pZCA9PT0gZEhpc3RvcnkuX2lkOwogICAgICB9KTsKICAgICAgVnVlLnNldChzdGF0ZS5oaXN0b3JpZXMsIGlkeCwgZEhpc3RvcnkpOwogICAgICBzdGF0ZS50YWJzLnB1c2goZEhpc3RvcnkpOyAvLyBzdGF0ZS5hY3RpdmVUYWIgPSBkSGlzdG9yeS5faWQ7CgogICAgICBzdGF0ZS5hY3RpdmVUYWIgPSBzdGF0ZS50YWJzLmxlbmd0aCAtIDE7CiAgICAgIHN0YXRlLmFjdGl2ZUlubmVyVGFiW3N0YXRlLnRhYnMubGVuZ3RoIC0gMV0gPSAwOwogICAgfSwKICAgIGFkZEV4cGVydHM6IGZ1bmN0aW9uIGFkZEV4cGVydHMoc3RhdGUsIGV4cGVydHMpIHsKICAgICAgZXhwZXJ0cy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGV4cGVydCkgewogICAgICAgIGV4cGVydC5rZXlJZCA9IGV4cGVydHMuX2lkOwogICAgICB9KTsKICAgICAgdmFyIGlkeCA9IHN0YXRlLnRhYnMuZmluZEluZGV4KGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHguX2lkID09IGV4cGVydHMuX2lkOwogICAgICB9KTsKICAgICAgc3RhdGUudGFic1tpZHhdLnNpdGVzW2V4cGVydHMuX2lkeF0ubGlzdHMgPSBleHBlcnRzLmRhdGE7CiAgICB9LAogICAgYWRkRXhwZXJ0UmVsYXRpb246IGZ1bmN0aW9uIGFkZEV4cGVydFJlbGF0aW9uKHN0YXRlLCByZWwpIHsKICAgICAgdmFyIHNpdGUgPSBzdGF0ZS50YWIuc2l0ZXNbcmVsLl9pZHhdOwoKICAgICAgaWYgKHJlbC5mbGFnKSB7CiAgICAgICAgLy8gdGhpcy4KICAgICAgICBzaXRlLm5vZGVzID0gW107CiAgICAgICAgc2l0ZS5saW5rcyA9IFtdOwogICAgICB9CgogICAgICBzaXRlLm5vZGVzID0gc2l0ZS5ub2Rlcy5jb25jYXQocmVsLmRhdGEuYXNSZXN1bHRzKTsKICAgICAgcmVsLmRhdGEucmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgc2l0ZS5saW5rcy5wdXNoKHsKICAgICAgICAgICJzaWQiOiBpdGVtLnNvdXJjZUFJZCwKICAgICAgICAgICJ0aWQiOiBpdGVtLnRhcmdldEFJZCwKICAgICAgICAgICJuYW1lIjogaXRlbS5jb3VudCwKICAgICAgICAgIF9zdmdBdHRyczogewogICAgICAgICAgICAic3Ryb2tlLXdpZHRoIjogaXRlbS5jb3VudCAvIDIKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgc2V0U2l0ZXM6IGZ1bmN0aW9uIHNldFNpdGVzKHN0YXRlLCBzaXRlcykgewogICAgICBzdGF0ZS5zaXRlcyA9IHNpdGVzOwogICAgfSwKICAgIHNldEZpbHRlcnM6IGZ1bmN0aW9uIHNldEZpbHRlcnMoc3RhdGUsIGZpbHRlcnMpIHsKICAgICAgZGVsZXRlIGZpbHRlcnNbJ19pZCddOwogICAgICBkZWxldGUgZmlsdGVyc1sna2V5SWQnXTsKICAgICAgZGVsZXRlIGZpbHRlcnNbJ2ZJZCddOwoKICAgICAgaWYgKE9iamVjdC5rZXlzKGZpbHRlcnMpLmxlbmd0aCA+IDApIHsKICAgICAgICBPYmplY3Qua2V5cyhmaWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChmaWx0ZXJLZXkpIHsKICAgICAgICAgIE9iamVjdC5rZXlzKGZpbHRlcnNbZmlsdGVyS2V5XSkuZm9yRWFjaChmdW5jdGlvbiAoZmYpIHsKICAgICAgICAgICAgaWYgKGZpbHRlcnNbZmlsdGVyS2V5XVtmZl0uc2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkgZmlsdGVyc1tmaWx0ZXJLZXldW2ZmXS5zZWxlY3RlZCA9IFtdOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGZpbHRlcnNbZmlsdGVyS2V5XS5pbnN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgZmlsdGVyc1tmaWx0ZXJLZXldLmluc3QubGlzdCA9IE9iamVjdC5rZXlzKGZpbHRlcnNbZmlsdGVyS2V5XS5pbnN0Lmxpc3QpLnNsaWNlKDAsIDEwKS5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwga2V5KSB7CiAgICAgICAgICAgICAgLy8ga2V5ID0ga2V5LnJlcGxhY2VBbGwoJ14nLCAiLiIpOwogICAgICAgICAgICAgIHJlc3VsdFtrZXkucmVwbGFjZUFsbCgnXicsICIuIildID0gZmlsdGVyc1tmaWx0ZXJLZXldLmluc3QubGlzdFtrZXldOwogICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0sIHt9KTsgLy8gZmlsdGVyc1tmaWx0ZXJLZXldLmluc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICAvLyAJaXRlbSA9IGl0ZW0KICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGZpbHRlcnNbZmlsdGVyS2V5XS5qb3VybmFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgZmlsdGVyc1tmaWx0ZXJLZXldLmpvdXJuYWwubGlzdCA9IE9iamVjdC5rZXlzKGZpbHRlcnNbZmlsdGVyS2V5XS5qb3VybmFsLmxpc3QpLnNsaWNlKDAsIDEwKS5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwga2V5KSB7CiAgICAgICAgICAgICAgLy8ga2V5ID0ga2V5LnJlcGxhY2VBbGwoJ14nLCAiLiIpOwogICAgICAgICAgICAgIHJlc3VsdFtrZXkucmVwbGFjZUFsbCgnXicsICIuIildID0gZmlsdGVyc1tmaWx0ZXJLZXldLmpvdXJuYWwubGlzdFtrZXldOwogICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0sIHt9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZmlsdGVyc1tmaWx0ZXJLZXldLnllYXIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICB2YXIgdGVtcCA9IG5ldyBNYXAoKTsKICAgICAgICAgICAgT2JqZWN0LmtleXMoZmlsdGVyc1tmaWx0ZXJLZXldLnllYXIubGlzdCkucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICB0ZW1wLnNldCh4LCBmaWx0ZXJzW2ZpbHRlcktleV0ueWVhci5saXN0W3hdKTsKICAgICAgICAgICAgfSk7IC8vIGxldCB0dGVtcCA9IHt9OwoKICAgICAgICAgICAgY29uc29sZS5sb2coJ1RFTVAnLCB0ZW1wKTsgLy8KICAgICAgICAgICAgLy8gcnR2LnByb2plY3RbZl0ubGlzdCA9IHRlbXA7CgogICAgICAgICAgICBmaWx0ZXJzW2ZpbHRlcktleV0ueWVhci5saXN0ID0gdGVtcDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgc3RhdGUuZmlsdGVycyA9IGZpbHRlcnM7CiAgICAgIGNvbnNvbGUubG9nKCdGSUxURVJTJywgZmlsdGVycyk7CiAgICAgIGNvbnNvbGUubG9nKCdGaWx0ZXJzIGNvbXBsZXRlZCcpOwogICAgfSwKICAgIHNldEludGVncmF0aW9uUmVzdWx0OiBmdW5jdGlvbiBzZXRJbnRlZ3JhdGlvblJlc3VsdChzdGF0ZSwgaWdSZXN1bHQpIHsKICAgICAgLy8gbGV0IHNpdGVzID0gWydTY2llbmNlb24nLCAnTlRJUycsICdEQlBJQScsICdLQ0knXTsKICAgICAgLy8gbGV0IGluc3QgPSAiIjsKICAgICAgLy8gbGV0IG51bVBhcGVycyA9IDA7CiAgICAgIC8vIGxldCBudW1Qcm9qZWN0cyA9IDA7CiAgICAgIC8vIGxldCBudW1DaXRhdGlvbnMgPSAwOwogICAgICAvLyBsZXQgbnVtQ29vcCA9IDA7CiAgICAgIC8vIGxldCByZWNZZWFyID0gMDsKICAgICAgaWdSZXN1bHQucmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKGF1dGhvcikgewogICAgICAgIC8vIHNpdGVzLmZvckVhY2goKHNpdGUpID0+IHsKICAgICAgICAvLyAJaWYgKGF1dGhvcltzaXRlXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gCQkvLyBpbnN0ID0gYXV0aG9yW3NpdGVdLmluc3Q7CiAgICAgICAgLy8KICAgICAgICAvLyAJCWlmIChzaXRlID09ICdOVElTJykgewogICAgICAgIC8vIAkJCW51bVByb2plY3RzICs9IGF1dGhvcltzaXRlXS5wYXBlcnMubGVuZ3RoOwogICAgICAgIC8vIAkJfSBlbHNlIHsKICAgICAgICAvLyAJCQludW1QYXBlcnMgKz0gYXV0aG9yW3NpdGVdLnBhcGVycy5sZW5ndGg7CiAgICAgICAgLy8gCQl9CiAgICAgICAgLy8gCX0KICAgICAgICAvLyB9KTsKICAgICAgICAvLyBhdXRob3IucmF3LmZvckVhY2goKF9yYXcpID0+IHsKICAgICAgICAvLyAJaWYgKF9yYXcuc2l0ZSAhPSAnTlRJUycpIHsKICAgICAgICAvLyAJCWlmIChwYXJzZUludChfcmF3Lmlzc3VlX3llYXIpID4gcmVjWWVhcikgewogICAgICAgIC8vIAkJCXJlY1llYXIgPSBwYXJzZUludChfcmF3Lmlzc3VlX3llYXIpOwogICAgICAgIC8vIAkJfQogICAgICAgIC8vIAkJbnVtQ2l0YXRpb25zICs9IHBhcnNlSW50KF9yYXcuY2l0YXRpb24pOwogICAgICAgIC8vIAl9CiAgICAgICAgLy8gfSk7CiAgICAgICAgLy8gYXV0aG9yLmluc3QgPSBpbnN0OwogICAgICAgIGF1dGhvci5udW1QYXBlcnMgKz0gIuqxtCI7CiAgICAgICAgYXV0aG9yLnJLZXl3b3JkcyA9ICctJzsgLy8gYXV0aG9yLmNvb3BIaXN0ID0gJy0nOwogICAgICAgIC8vIGF1dGhvci5zY29yZSA9ICctJzsKCiAgICAgICAgYXV0aG9yLm5ldHdvcmsgPSAnLSc7CiAgICAgICAgYXV0aG9yLndlYlNlYXJjaCA9ICdodHRwczovL3d3dy5nb29nbGUuY29tL3NlYXJjaD9xPScgKyBhdXRob3IubmFtZSArICIrIiArIGF1dGhvci5pbnN0OwogICAgICAgIGF1dGhvci5udW1Qcm9qZWN0cyArPSAi6rG0IjsKICAgICAgICBhdXRob3IudG90YWxDaXRhdGlvbiArPSAi7ZqMIjsKICAgICAgICBhdXRob3IudG90YWxDb29wICs9ICLqsbQiOwoKICAgICAgICBpZiAoYXV0aG9yLnJlY2VudFllYXIgPT0gJzAnKSB7CiAgICAgICAgICBhdXRob3IucmVjZW50WWVhciA9ICctJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXV0aG9yLnJlY2VudFllYXIgKz0gIuuFhCI7CiAgICAgICAgfSAvL2F1dGhvci5uZ3ZDb29wID0gJy0nOwogICAgICAgIC8vIHJlY1llYXIgPSAwOwogICAgICAgIC8vIG51bUNvb3AgPSAwOwogICAgICAgIC8vIG51bUNpdGF0aW9ucyA9IDA7CiAgICAgICAgLy8gbnVtUHJvamVjdHMgPSAwOwogICAgICAgIC8vIG51bVBhcGVycyA9IDA7CiAgICAgICAgLy8gaW5zdCA9ICIiOwoKICAgICAgfSk7CiAgICAgIHN0YXRlLmludGVncmF0aW9ucyA9IGlnUmVzdWx0LnJlc3VsdDsKICAgICAgY29uc29sZS5sb2coJ1NUQVRFLklOVEVHUkFUSU9OUyAnLCBzdGF0ZS5pbnRlZ3JhdGlvbnMpOwogICAgfSwKICAgIHNldEludGVncmF0aW9uUmF3OiBmdW5jdGlvbiBzZXRJbnRlZ3JhdGlvblJhdyhzdGF0ZSwgaWdSYXcpIHsKICAgICAgc3RhdGUuaWdSYXdbaWdSYXcuaWR4XSA9IGlnUmF3OyAvLyBzdGF0ZS5pbnRlZ3JhdGlvbnMuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAvLyAJaWYgKGl0ZW0uaWR4ID09IGlnUmF3LmlkeCkgewogICAgICAvLyAJCWl0ZW0ucmF3cyA9IGlnUmF3OwogICAgICAvLyAJCWNvbnNvbGUubG9nKCdJVEVNLlJBV1MgJywgaXRlbS5yYXdzKTsKICAgICAgLy8gCQlyZXR1cm47CiAgICAgIC8vIAl9CiAgICAgIC8vIH0pOwogICAgfSwKICAgIGRlbGV0ZVNlbGVjdGVkOiBmdW5jdGlvbiBkZWxldGVTZWxlY3RlZChzdGF0ZSkgewogICAgICBzdGF0ZS5zZWxlY3RlZCA9IHsKICAgICAgICAncHJvamVjdCc6IHsKICAgICAgICAgICdpbnN0JzogW10sCiAgICAgICAgICAncnNjJzogW10sCiAgICAgICAgICAnZnVuZCc6IFtdLAogICAgICAgICAgJ3llYXInOiBbXQogICAgICAgIH0sCiAgICAgICAgJ3BhcGVyJzogewogICAgICAgICAgJ2luc3QnOiBbXSwKICAgICAgICAgICd5ZWFyJzogW10sCiAgICAgICAgICAnam91cm5hbCc6IFtdLAogICAgICAgICAgJ2xhbmcnOiBbXQogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBzZXRTZWxlY3RlZDogZnVuY3Rpb24gc2V0U2VsZWN0ZWQoc3RhdGUsIHNlbCkgewogICAgICBPYmplY3Qua2V5cyhzZWwuc2VsZWN0ZWRbJ3BhcGVyJ10pLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmIChzZWwuZmlsdGVyc1sncGFwZXInXVtrZXldICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHNlbC5zZWxlY3RlZFsncGFwZXInXVtrZXldID0gc2VsLnNlbGVjdGVkWydwYXBlciddW2tleV0ubWFwKGZ1bmN0aW9uIChmaWx0ZXJJdGVtKSB7CiAgICAgICAgICAgIHZhciBydHYgPSAtMTsKICAgICAgICAgICAgT2JqZWN0LmtleXMoc2VsLmZpbHRlcnNbJ3BhcGVyJ11ba2V5XS5saXN0KS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpZHgpIHsKICAgICAgICAgICAgICBpZiAoaXRlbSA9PSBmaWx0ZXJJdGVtKSB7CiAgICAgICAgICAgICAgICBydHYgPSBpZHg7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJ0djsKICAgICAgICAgIH0pOwogICAgICAgICAgc2VsLnNlbGVjdGVkWydwYXBlciddW2tleV0gPSBzZWwuc2VsZWN0ZWRbJ3BhcGVyJ11ba2V5XS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgcmV0dXJuIHggPj0gMDsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWwuc2VsZWN0ZWRbJ3BhcGVyJ11ba2V5XSA9IFtdOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIE9iamVjdC5rZXlzKHNlbC5zZWxlY3RlZFsncHJvamVjdCddKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBpZiAoc2VsLmZpbHRlcnNbJ3Byb2plY3QnXVtrZXldICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmIChrZXkgIT0gJ3JzYycgJiYga2V5ICE9ICdmdW5kJykgewogICAgICAgICAgICBzZWwuc2VsZWN0ZWRbJ3Byb2plY3QnXVtrZXldID0gc2VsLnNlbGVjdGVkWydwcm9qZWN0J11ba2V5XS5tYXAoZnVuY3Rpb24gKGZpbHRlckl0ZW0pIHsKICAgICAgICAgICAgICB2YXIgcnR2ID0gLTE7CiAgICAgICAgICAgICAgT2JqZWN0LmtleXMoc2VsLmZpbHRlcnNbJ3Byb2plY3QnXVtrZXldLmxpc3QpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGlkeCkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0gPT0gZmlsdGVySXRlbSkgewogICAgICAgICAgICAgICAgICBydHYgPSBpZHg7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm4gcnR2OwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2VsLnNlbGVjdGVkWydwcm9qZWN0J11ba2V5XSA9IHNlbC5zZWxlY3RlZFsncHJvamVjdCddW2tleV0uZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHggPj0gMDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlbC5zZWxlY3RlZFsncHJvamVjdCddW2tleV0gPSBbXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBzdGF0ZS5zZWxlY3RlZCA9IHNlbC5zZWxlY3RlZDsKICAgIH0sCiAgICBzZXRSYW5rOiBmdW5jdGlvbiBzZXRSYW5rKHN0YXRlLCByYW5rKSB7CiAgICAgIHN0YXRlLnJhbmtpbnN0ID0gcmFuay5JbnN0czsKICAgIH0sCiAgICBzZXROdGlzOiBmdW5jdGlvbiBzZXROdGlzKHN0YXRlLCBhdXRob3JfbGlzdCkgewogICAgICBzdGF0ZS5hX3VybCA9IGF1dGhvcl9saXN0OwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgdXBsb2FkSUZGaWxlOiBmdW5jdGlvbiB1cGxvYWRJRkZpbGUoY29udGV4dCwgZGF0YSkgewogICAgICBwb3N0KGNvbnRleHQsICd1cGxvYWRJRkZpbGUnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnRleHQuY29tbWl0KCdzaG93U25hY2snLCByZXNwb25zZS5kYXRhICsgIiDqsJzqsIAg7J6F66Cl65CY7JeI7Iq164uI64ukLiIpOwogICAgICB9KTsKICAgIH0sCiAgICBkb3dubG9hZEV4cGVydHM6IGZ1bmN0aW9uIGRvd25sb2FkRXhwZXJ0cyhjb250ZXh0LCBkYXRhKSB7CiAgICAgIGRhdGEuaXRlbXNQZXJQYWdlID0gLTI7CiAgICAgIHJldHVybiBnZXQoY29udGV4dCwgJ2dldEV4cGVydHMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIERvd25sb2FkSnNvbkRhdGEocmVzcG9uc2UuZGF0YSwgZGF0YS5fc2l0ZSArICJfIiArIGRhdGEuX2lkLCB0cnVlLCAyKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0RXhwZXJ0UGFwZXJzOiBmdW5jdGlvbiBnZXRFeHBlcnRQYXBlcnMoY29udGV4dCwgZGF0YSkgewogICAgICAvLyBjb25zb2xlLmxvZygnREFUQScsIGRhdGEpOwogICAgICAvLyBsZXQgZGQgPSB7CiAgICAgIC8vIAljb2xzOiBbewogICAgICAvLyAJCW5hbWU6ICJBIiwKICAgICAgLy8gCQlrZXk6IDAKICAgICAgLy8gCX0sIHsKICAgICAgLy8gCQluYW1lOiAiQiIsCiAgICAgIC8vIAkJa2V5OiAxCiAgICAgIC8vIAl9LCB7CiAgICAgIC8vIAkJbmFtZTogIkMiLAogICAgICAvLyAJCWtleTogMgogICAgICAvLyAJfV0sCiAgICAgIC8vIAlkYXRhOiBbCiAgICAgIC8vIAlbImlkIiwgIm5hbWUiLCAidmFsdWUiXSwKICAgICAgLy8gCVsxLCAic2hlZXRqcyIsIDcyNjJdLAogICAgICAvLyAJWzIsICJqcy14bHN4IiwgNjk2OV0KICAgICAgLy8gXQogICAgICAvLyB9OwogICAgICAvLyB2YXIgd29ya3NoZWV0ID0gWExTWC51dGlscy5hb2FfdG9fc2hlZXQoZGQuZGF0YSk7CiAgICAgIC8vIHZhciBuZXdfd29ya2Jvb2sgPSBYTFNYLnV0aWxzLmJvb2tfbmV3KCk7CiAgICAgIC8vIFhMU1gudXRpbHMuYm9va19hcHBlbmRfc2hlZXQobmV3X3dvcmtib29rLCB3b3Jrc2hlZXQsICJTaGVldEpTIik7CiAgICAgIC8vIGNvbnN0IHdib3V0ID0gWExTWC53cml0ZShuZXdfd29ya2Jvb2ssIHsKICAgICAgLy8gCXR5cGU6ICJiYXNlNjQiLAogICAgICAvLyAJYm9va1R5cGU6ICJ4bHN4IgogICAgICAvLyB9KTsKICAgICAgLy8gY29uc3QgYm9keSA9IHdib3V0OwogICAgICAvLyBzdHJlYW0uZmV0Y2goewogICAgICAvLyAJbWV0aG9kOiAnR0VUJywKICAgICAgLy8gCXR5cGU6ICdqc29uJywKICAgICAgLy8gCXVybDogImh0dHA6Ly8yMDMuMjU1LjkyLjQ4OjgwODIvZ2V0RXhwZXJ0UGFwZXJzIiwKICAgICAgLy8gCWJvZHk6IGJvZHkKICAgICAgLy8gfSwgZnVuY3Rpb24ocmVzKSB7CiAgICAgIC8vIAkvL21vZGFsLnRvYXN0KHsgbWVzc2FnZTogJ0tFWTogJyArIHJlcy5kYXRhLmtleSwgZHVyYXRpb246IDEwIH0pOwogICAgICAvLwogICAgICAvLyAJLy8gc2VsZi52ZXJzaW9uID0gcmVzLmRhdGEua2V5CiAgICAgIC8vIH0pOwogICAgICByZXR1cm4gZ2V0KGNvbnRleHQsICdnZXRFeHBlcnRQYXBlcnMnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBmbGFnID0gZGF0YS5zaXRlID09PSAnTlRJUycgPyAwIDogMTsKICAgICAgICBpZiAoZGF0YS5mbGFnID09PSB1bmRlZmluZWQpIERvd25sb2FkSnNvbkRhdGEocmVzcG9uc2UuZGF0YSwgZGF0YS5uYW1lICsgIl8iICsgZGF0YS5zaXRlLCB0cnVlLCBmbGFnKTtlbHNlIERvd25sb2FkSnNvbkRhdGEocmVzcG9uc2UuZGF0YSwgZGF0YS5zaXRlICsgIl8iICsgZGF0YS5rZXlJZCArICJfdG90YWwiLCB0cnVlLCAzKTsgLy8gZGQuZGF0YQogICAgICAgIC8vIAljb25zdCB3b3JrYm9vayA9IG5ldyBFeGNlbC5Xb3JrYm9vaygpOwogICAgICAgIC8vIAljb25zdCB3b3Jrc2hlZXQgPSB3b3JrYm9vay5hZGRXb3Jrc2hlZXQoJ015IFNoZWV0Jyk7CiAgICAgICAgLy8gCXdvcmtzaGVldC5jb2x1bW5zID0gWwogICAgICAgIC8vIAkJewogICAgICAgIC8vIAkJCWhlYWRlcjogJ1Byb2plY3ROdW1iZXInLAogICAgICAgIC8vIAkJCWtleTogJ2lkJywKICAgICAgICAvLyAJCQl3aWR0aDogMTAKICAgICAgICAvLyAJCX0sCiAgICAgICAgLy8gXTsKICAgICAgICAvLyAJcmVzcG9uc2UuZGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgLy8gCQl3b3Jrc2hlZXQuYWRkUm93KGl0ZW0pOwogICAgICAgIC8vIAl9KTsKICAgICAgICAvLyAJdmFyIHRlbXBGaWxlUGF0aCA9IHRlbXBmaWxlKCcueGxzeCcpOwogICAgICAgIC8vICB3b3JrYm9vay54bHN4LndyaXRlRmlsZSh0ZW1wRmlsZVBhdGgpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gCQkgcmVzLnNlbmRGaWxlKHRlbXBGaWxlUGF0aCwgZnVuY3Rpb24oZXJyKXsKICAgICAgICAvLyAJCSB9KTsKICAgICAgICAvLyAgfSk7CiAgICAgICAgLy8KICAgICAgICAvLyAJLy8gd29ya3NoZWV0LmFkZFJvdyh7aWQ6IDEsIG5hbWU6ICdKb2huIERvZScsIGRvYjogbmV3IERhdGUoMTk3MCwxLDEpfSk7CiAgICAgICAgLy8gCS8vIHdvcmtzaGVldC5hZGRSb3coe2lkOiAyLCBuYW1lOiAnSmFuZSBEb2UnLCBkb2I6IG5ldyBEYXRlKDE5NjUsMSw3KX0pOwogICAgICAgIC8vIAl3b3JrYm9vay5jb21taXQoKTsKICAgICAgICAvLyAJd29ya2Jvb2sueGxzeC53cml0ZUZpbGUoJy4vdGVtcC54bHN4JykudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAvLyAJCS8vIGRvbmUKICAgICAgICAvLyAJfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldEV4cGVydFJlbGF0aW9uOiBmdW5jdGlvbiBnZXRFeHBlcnRSZWxhdGlvbihjb250ZXh0LCBkYXRhKSB7CiAgICAgIC8vIGNvbnN0IHsKICAgICAgLy8gCV9pZHgsCiAgICAgIC8vIAlmbGFnCiAgICAgIC8vIH0gPSBkYXRhOwogICAgICByZXR1cm4gZ2V0KGNvbnRleHQsICdnZXRFeHBlcnRSZWxhdGlvbicsIGRhdGEpOyAvLyAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIC8vIAljb250ZXh0LmNvbW1pdCgnYWRkRXhwZXJ0UmVsYXRpb24nLCB7CiAgICAgIC8vIAkJZGF0YTogcmVzcG9uc2UuZGF0YSwKICAgICAgLy8gCQlfaWR4LAogICAgICAvLyAJCWZsYWcKICAgICAgLy8gCX0pCiAgICAgIC8vIH0pCiAgICB9LAogICAgc2VuZENyYXdsUmVxdWVzdDogZnVuY3Rpb24gc2VuZENyYXdsUmVxdWVzdChjb250ZXh0LCBkYXRhKSB7CiAgICAgIHJldHVybiBnZXQoY29udGV4dCwgJ3NlbmRDcmF3bFJlcXVlc3QnLCBkYXRhKTsKICAgIH0sCiAgICBnZXRFeHBlcnRzOiBmdW5jdGlvbiBnZXRFeHBlcnRzKGNvbnRleHQsIGRhdGEpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ0RBVEEnLCBkYXRhKTsKICAgICAgLy8gaWYgKGRhdGEuZEZsYWcgIT09IHVuZGVmaW5lZCkgewogICAgICAvLyAJZGF0YS5pdGVtc1BlclBhZ2UgPSAtMTsKICAgICAgLy8gfQogICAgICAvLyBnZXQoY29udGV4dCwgJ2dldEV4cGVydHMnLCBkYXRhKQogICAgICByZXR1cm4gZ2V0KGNvbnRleHQsICdnZXRFeHBlcnRzJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvLyBpZiAoZGF0YS5faWR4ICE9IDApIHsKICAgICAgICBpZiAoZGF0YS5kRmxhZyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvLyByZXNwb25zZQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ1JFU1BPTlNFJywgcmVzcG9uc2UpOwogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRFeHBlcnRzJywgewogICAgICAgICAgICBkYXRhOiByZXNwb25zZS5kYXRhLAogICAgICAgICAgICBfaWQ6IGRhdGEuX2lkLAogICAgICAgICAgICBfaWR4OiBkYXRhWydfaWR4J10KICAgICAgICAgIH0pOwogICAgICAgIH0gLy8gfSBlbHNlIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAvLyB9CgogICAgICB9KTsKICAgIH0sCiAgICBnZXREZXRhaWxIaXN0b3J5OiBmdW5jdGlvbiBnZXREZXRhaWxIaXN0b3J5KGNvbnRleHQsIGlkKSB7CiAgICAgIGdldChjb250ZXh0LCAnZ2V0RGV0YWlsSGlzdG9yeScsIGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGREZXRhaWxIaXN0b3J5JywgcmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlcXVlc3RTZWFyY2g6IGZ1bmN0aW9uIHJlcXVlc3RTZWFyY2goY29udGV4dCwgZGF0YSkgewogICAgICBwb3N0KGNvbnRleHQsICdyZXF1ZXN0U2VhcmNoJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgX3Jlc3BvbnNlJGRhdGEgPSByZXNwb25zZS5kYXRhLAogICAgICAgICAgICBmbGFnID0gX3Jlc3BvbnNlJGRhdGEuZmxhZywKICAgICAgICAgICAgcmVzdWx0cyA9IF9yZXNwb25zZSRkYXRhLnJlc3VsdHM7CiAgICAgICAgaWYgKGZsYWcpIGNvbnRleHQuY29tbWl0KCdhZGRIaXN0b3J5JywgcmVzdWx0cyk7ZWxzZSB7CiAgICAgICAgICAvLyBjbG9zZVNuYWNrKGNvbnRleHQpOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3Nob3dTbmFjaycsICJLZXlJZCA6ICIgKyByZXN1bHRzICsgIiBOb3cgQ3Jhd2xpbmchIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL2dldEhpc3RvcmllcwogICAgZ2V0SGlzdG9yaWVzOiBmdW5jdGlvbiBnZXRIaXN0b3JpZXMoY29udGV4dCwgZmxhZykgewogICAgICAvL3Rlc3QgaWQgPSAxCiAgICAgIGlmIChmbGFnID09PSB1bmRlZmluZWQgJiYgY29udGV4dC5zdGF0ZS5oaXN0b3JpZXMubGVuZ3RoICE9IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGdldChjb250ZXh0LCAnZ2V0SGlzdG9yaWVzJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygnUkVTUE9OU0UnLCByZXNwb25zZSk7CiAgICAgICAgLy8gaWYocmVzcG9uc2UuZGF0YSkKICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0SGlzdG9yaWVzJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOyAvLyBnZXQoY29udGV4dCwgJ2dldEhpc3RvcmllcycsIHsKICAgICAgLy8gCQlpZDogMQogICAgICAvLyAJfSkKICAgICAgLy8gCS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgLy8gCQljb250ZXh0LmNvbW1pdCgnc2V0SGlzdG9yaWVzJywgcmVzcG9uc2UuZGF0YSkKICAgICAgLy8gCX0pCiAgICB9LAogICAgZ2V0U2l0ZVN0YXR1czogZnVuY3Rpb24gZ2V0U2l0ZVN0YXR1cyhjb250ZXh0KSB7CiAgICAgIHJldHVybiBnZXQoY29udGV4dCwgJ2dldFNpdGVTdGF0dXMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRTaXRlcycsIHJlc3BvbnNlLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRUZXN0OiBmdW5jdGlvbiBnZXRUZXN0KGNvbnRleHQpIHsKICAgICAgc2hvd1NuYWNrKG1zZy5yZW1vdmUsIGNvbnRleHQpOwogICAgfSwKICAgIHJlbW92ZUhpc3Rvcnk6IGZ1bmN0aW9uIHJlbW92ZUhpc3RvcnkoY29udGV4dCwgZGF0YSkgewogICAgICByZXR1cm4gZ2V0KGNvbnRleHQsICdyZW1vdmVIaXN0b3J5JywgZGF0YSk7CiAgICB9LAogICAgZWRpdEhpc3Rvcnk6IGZ1bmN0aW9uIGVkaXRIaXN0b3J5KGNvbnRleHQsIGRhdGEpIHsKICAgICAgcmV0dXJuIGdldChjb250ZXh0LCAnZWRpdEhpc3RvcnknLCBkYXRhKTsKICAgIH0sCiAgICBnZXRJbnRlZ3JhdGlvbkRhdGE6IGZ1bmN0aW9uIGdldEludGVncmF0aW9uRGF0YShjb250ZXh0LCBkYXRhKSB7CiAgICAgIGNvbnNvbGUubG9nKCdEQVRBJywgZGF0YSk7CiAgICAgIGNvbnRleHQuc3RhdGUuaWdJRCA9IGRhdGEuaWQ7CiAgICAgIGNvbnRleHQuc3RhdGUuaWdLZXl3b3JkID0gZGF0YS5xdWVyeV9rZXl3b3JkOwogICAgICBjb250ZXh0LmNvbW1pdCgnc2V0RmlsdGVycycsIHt9KTsgLy8gcmV0dXJuIHBvc3QoY29udGV4dCwgJ2dldEludGVncmF0aW9uRGF0YScsIGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAvLyAJLy8gcmVzcG9uc2UuZGF0YQogICAgICAvLyAJY29uc29sZS5sb2coJ1JFU1BPTlNFLkRBVEEnLCByZXNwb25zZS5kYXRhKTsKICAgICAgLy8gCWNvbnRleHQuY29tbWl0KCdzZXRGaWx0ZXJzJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgIC8vIH0pOwogICAgfSwKICAgIGdldEludGVncmF0aW9uUmVzdWx0OiBmdW5jdGlvbiBnZXRJbnRlZ3JhdGlvblJlc3VsdChjb250ZXh0LCBkYXRhKSB7CiAgICAgIGNvbnNvbGUubG9nKCdDT05URVhULCBEQVRBJywgY29udGV4dCwgZGF0YSk7CiAgICAgIHZhciBzaXplID0gMDsKICAgICAgZGF0YS5mSWQgPSAtMTsKICAgICAgZGF0YS5maWx0ZXIgPSBjb250ZXh0LnN0YXRlLmZpbHRlcnM7IC8vIGRhdGEucHJvamVjdCA9IGNvbnRleHQuc3RhdGUuc2VsZWN0ZWQucHJvamVjdDsKICAgICAgLy8gZGF0YS5wYXBlciA9IGNvbnRleHQuc3RhdGUuc2VsZWN0ZWQucGFwZXI7CiAgICAgIC8vIC8vIGxldCBkYXRhID0ge307CiAgICAgIC8vIGxldCBkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgX2RhdGEpOwogICAgICAvLyBPYmplY3QuYXNzaWduCgogICAgICBPYmplY3Qua2V5cyhkYXRhLmZpbHRlcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmtleXMoZGF0YS5maWx0ZXJba2V5XSkuZm9yRWFjaChmdW5jdGlvbiAoZmYpIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdGSUxURVInLCBmaWx0ZXIpOwogICAgICAgICAgLy8gY29uc29sZS5sb2coJ0tFWScsIGtleSk7CiAgICAgICAgICAvLyBjb250ZXh0LnN0YXRlLmZpbHRlcnNba2V5XVtmaWx0ZXJdCiAgICAgICAgICAvLyAvLyBjb25zb2xlLmxvZygnQ09OVEVYVC5TVEFURS5GSUxURVJTW0tFWV1bRklMVEVSXScsIGNvbnRleHQuc3RhdGUuZmlsdGVyc1trZXldW2ZpbHRlcl0pOwogICAgICAgICAgaWYgKGZmID09ICd5ZWFyJykgewogICAgICAgICAgICBkYXRhLmZpbHRlcltrZXldW2ZmXS5zZWxlY3RlZCA9IGRhdGEuZmlsdGVyW2tleV1bZmZdLnNlbGVjdGVkLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJVEVNJywgaXRlbSk7IC8vIAkvLyBjb25zb2xlLmxvZygpOwogICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAvLyAJLy8gY29udGV4dC5zdGF0ZS5maWx0ZXJzW2tleV1bZmlsdGVyXVsnbGlzdCddCiAgICAgICAgICAgICAgLy8gCS8vIGNvbnNvbGUubG9nKCdDT05URVhULlNUQVRFLkZJTFRFUlNbS0VZXVtGSUxURVJdW1wnTElTVFwnXScsICk7CiAgICAgICAgICAgICAgLy8gCS8vIGNvbnNvbGUubG9nKCdDT05URVhULlNUQVRFLkZJTFRFUlNbS0VZXVtGSUxURVJdLkxJU1RbSVRFTV0nLCBjb250ZXh0LnN0YXRlLmZpbHRlcnNba2V5XVtmaWx0ZXJdWydsaXN0J11baXRlbV0pOwoKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnREFUQS5GSUxURVJbS0VZXVtGRl0uTElTVFtJVEVNXScsIGRhdGEuZmlsdGVyW2tleV1bZmZdLmxpc3QpOwogICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKGRhdGEuZmlsdGVyW2tleV1bZmZdLmxpc3QpW2l0ZW1dWzBdOyAvLyBjb250ZXh0LnN0YXRlLmZpbHRlcnNba2V5XVtmaWx0ZXJdWydsaXN0J10KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUVFRUVFRUVFRUVFRUVFRUJywgZGF0YS5maWx0ZXJba2V5XVtmZl0uc2VsZWN0ZWQpOwogICAgICAgICAgfSAvLyBjb25zb2xlLmxvZygnREFUQVtLRVldW0ZJTFRFUl0nLCBkYXRhW2tleV1bZmlsdGVyXSk7CgoKICAgICAgICAgIHNpemUgKz0gZGF0YS5maWx0ZXJba2V5XVtmZl0uc2VsZWN0ZWQubGVuZ3RoOwogICAgICAgIH0pOwogICAgICB9KTsgLy8gZGF0YQoKICAgICAgY29uc29sZS5sb2coJ0RBVEEnLCBkYXRhKTsgLy8gY29uc29sZS5sb2coJ0RBVEEnLCBfZGF0YSk7CgogICAgICBjb25zb2xlLmxvZygnU0laRScsIHNpemUpOwoKICAgICAgaWYgKHNpemUgPT0gMCkgewogICAgICAgIC8vIGlmIChjb250ZXh0LnN0YXRlLnByZXZmSWQgIT0gMCkgewogICAgICAgIC8vIGRhdGEuZklkID0gY29udGV4dC5zdGF0ZS5wcmV2ZklkOwogICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgZGF0YS5mSWQgPSAwOyAvLyB9CiAgICAgIH0KCiAgICAgIGRhdGEucHJldmZJZCA9IGNvbnRleHQuc3RhdGUucHJldmZJZDsgLy8gcmV0dXJuOwoKICAgICAgY29udGV4dC5zdGF0ZS5oaXN0b3JpZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLl9pZCA9PSBkYXRhLmtleUlkKSB7CiAgICAgICAgICBkYXRhLnNpdGVzID0gaXRlbS5zaXRlczsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0pOyAvLyAvL2RhdGEuZklkID0gMTsKCiAgICAgIHJldHVybiBwb3N0KGNvbnRleHQsICdnZXRJbnRlZ3JhdGlvblJlc3VsdCcsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gcmVzcG9uc2UuZGF0YQogICAgICAgIGNvbnNvbGUubG9nKCdSRVNQT05TRS5EQVRBJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgY29udGV4dC5jb21taXQoJ3NldEludGVncmF0aW9uUmVzdWx0JywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgY29udGV4dC5zdGF0ZS5pZ1RvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbEV4cGVydHM7CiAgICAgICAgY29udGV4dC5zdGF0ZS5pZ0RvbWVzdGljID0gcmVzcG9uc2UuZGF0YS5Eb21lc3RpY0V4cGVydHM7CiAgICAgICAgY29udGV4dC5zdGF0ZS5pZ0ludGVybmF0aW9uYWwgPSByZXNwb25zZS5kYXRhLkludGVybmF0aW9uYWxFeHBlcnRzOwogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnByZXZmSWQgIT0gMCkgY29udGV4dC5zdGF0ZS5wcmV2ZklkID0gcmVzcG9uc2UuZGF0YS5wcmV2ZklkOwogICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRGaWx0ZXJzJywgcmVzcG9uc2UuZGF0YS5maWx0ZXJzKTsgLy8gLnRoZW4oY29udGV4dC5jb21taXQoJ3NldFNlbGVjdGVkJywgcmVzcG9uc2UuZGF0YSkpOwoKICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0SW50ZWdyYXRpb25SYXc6IGZ1bmN0aW9uIGdldEludGVncmF0aW9uUmF3KGNvbnRleHQsIGRhdGEpIHsKICAgICAgcmV0dXJuIHBvc3QoY29udGV4dCwgJ2dldEludGVncmF0aW9uUmF3JywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvLyByZXNwb25zZS5kYXRhCiAgICAgICAgY29uc29sZS5sb2coJ1JFU1BPTlNFLkRBVEEnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICByZXNwb25zZS5kYXRhLmlkeCA9IGRhdGEuaWR4OyAvLyByZXR1cm4gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgY29udGV4dC5jb21taXQoJ3NldEludGVncmF0aW9uUmF3JywgcmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZUludGVncmF0aW9uOiBmdW5jdGlvbiBkZWxldGVJbnRlZ3JhdGlvbihjb250ZXh0LCBrZXlJZCkgewogICAgICBnZXQoY29udGV4dCwgJ2RlbGV0ZUludGVncmF0aW9uJywgewogICAgICAgICJrZXlJZCI6IGtleUlkCiAgICAgIH0pOwogICAgfSwKICAgIGdldFJlbG9hZFBhZ2U6IGZ1bmN0aW9uIGdldFJlbG9hZFBhZ2UoY29udGV4dCwgZGF0YSkgewogICAgICByZXR1cm4gcG9zdChjb250ZXh0LCAnZ2V0UmVsb2FkUGFnZScsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gcmVzcG9uc2UuZGF0YQogICAgICAgIGNvbnNvbGUubG9nKCdSRVNQT05TRS5EQVRBJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgY29udGV4dC5jb21taXQoJ3NldEludGVncmF0aW9uUmVzdWx0JywgcmVzcG9uc2UuZGF0YSk7IC8vCWNvbnRleHQuY29tbWl0KCdzZXRJbnRlZ3JhdGlvblJhdycsIHJlc3BvbnNlLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRJbnN0UmFuazogZnVuY3Rpb24gZ2V0SW5zdFJhbmsoY29udGV4dCwgZGF0YSkgewogICAgICAvL2NvbnNvbGUubG9nKCJzdHJpbmciKTsKICAgICAgcmV0dXJuIGdldChjb250ZXh0LCAnZ2V0SW5zdFJhbmsnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRSYW5rJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgY29uc29sZS5sb2coInNldFJhbmsiLCByZXNwb25zZS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TnRpc0FQSTogZnVuY3Rpb24gZ2V0TnRpc0FQSShjb250ZXh0LCBkYXRhKSB7CiAgICAgIHJldHVybiBnZXQoY29udGV4dCwgJ2dldE50aXNBUEknLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXROdGlzJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgY29uc29sZS5sb2coJ3NldE50aXMnLCByZXNwb25zZS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0c3RvcFBhZ2U6IGZ1bmN0aW9uIGdldHN0b3BQYWdlKGNvbnRleHQsIGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coInN0b3BQYWdlIiwgZGF0YSk7CiAgICAgIGdldChjb250ZXh0LCAnZ2V0c3RvcFBhZ2UnLCBkYXRhKTsgLy8gcmV0dXJuIHBvc3QoY29udGV4dCwgJ2dldEludGVncmF0aW9uRGF0YScsIGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAvLyAJLy8gcmVzcG9uc2UuZGF0YQogICAgICAvLyAJY29uc29sZS5sb2coJ1JFU1BPTlNFLkRBVEEnLCByZXNwb25zZS5kYXRhKTsKICAgICAgLy8gCWNvbnRleHQuY29tbWl0KCdzZXRGaWx0ZXJzJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgIC8vIH0pOwogICAgfQogIH0KfSk7"},{"version":3,"sources":["C:/Users/netdb/Git/expert_test/expert_test/expert_web_test/src/store.js"],"names":["Vue","Vuex","get","post","XLSX","saveAs","use","sheetNames","DownloadJsonData","JSONData","FileTitle","ShowLabel","Flag","wb","utils","book_new","s2ab","s","buf","ArrayBuffer","length","view","Uint8Array","i","charCodeAt","outData","isLooopable","w","arrayConstructor","constructor","objectConstructor","temp","field","fData","inData","undefined","push","newWorksheet","json_to_sheet","book_append_sheet","fitToColumn","colSize","wch","wbout","write","bookType","type","Blob","msg","timeout","ok","fail","run","showSnack","ctxt","rep","msgp","commit","setLoading","isLoading","store","Store","state","snack","isShow","isMini","histories","activeTab","activeInnerTab","tabs","sites","integrations","igID","igKeyword","filters","igTotal","igDomestic","igInternational","igRaw","prevfId","rankinst","a_url","mutations","setIsMini","flag","closeTab","id","splice","findIndex","x","_id","closeSnack","message","showalarm","setIsLoading","payload","setHistories","forEach","item","site","addHistory","history","unshift","addDetailHistory","dHistory","idx","h","set","addExperts","experts","data","expert","keyId","_idx","lists","addExpertRelation","rel","tab","nodes","links","concat","asResults","results","sourceAId","targetAId","count","_svgAttrs","setSites","setFilters","Object","keys","filterKey","ff","selected","inst","list","slice","reduce","result","key","replaceAll","journal","year","Map","reverse","console","log","setIntegrationResult","igResult","author","numPapers","rKeywords","network","webSearch","name","numProjects","totalCitation","totalCoop","recentYear","setIntegrationRaw","deleteSelected","setSelected","sel","map","filterItem","rtv","filter","setRank","rank","Insts","setNtis","author_list","actions","uploadIFFile","context","then","response","downloadExperts","itemsPerPage","_site","getExpertPapers","getExpertRelation","sendCrawlRequest","getExperts","dFlag","getDetailHistory","requestSearch","getHistories","getSiteStatus","getTest","remove","removeHistory","editHistory","getIntegrationData","query_keyword","getIntegrationResult","size","fId","Array","from","totalExperts","DomesticExperts","InternationalExperts","getIntegrationRaw","deleteIntegration","getReloadPage","getInstRank","getNtisAPI","getstopPage"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport {\r\n\tget,\r\n\tpost\r\n} from './apiUtils';\r\n\r\nimport XLSX from 'xlsx'\r\nimport {\r\n\tsaveAs\r\n} from 'file-saver';\r\nVue.use(Vuex)\r\n\r\n// const initWeight = new Array(6).fill(50)\r\nconst sheetNames = ['Projects', 'Papers', 'Experts'];\r\n\r\n//DownloadJsonData(response.data, data.name + \"_\" + data.site, true, flag);\r\nfunction DownloadJsonData(JSONData, FileTitle, ShowLabel, Flag) {\r\n\t// console.log('JSONDATA', JSONData);\r\n\r\n\r\n\t//If JSONData is not an object then JSON.parse will parse the JSON string in an Object\r\n\r\n\r\n\tvar wb = XLSX.utils.book_new();\r\n\t// console.log('WB', wb);\r\n\r\n\tfunction s2ab(s) {\r\n\t\tvar buf = new ArrayBuffer(s.length); //convert s to arrayBuffer\r\n\t\tvar view = new Uint8Array(buf); //create uint8array as viewer\r\n\t\tfor (let i = 0; i < s.length; i++) view[i] = s.charCodeAt(i) & 0xFF; //convert to octet\r\n\t\treturn buf;\r\n\t}\r\n\tlet outData = [];\r\n\r\n\r\n\tfunction isLooopable(w) {\r\n\t\tvar arrayConstructor = [].constructor;\r\n\t\tvar objectConstructor = ({}).constructor;\r\n\t\tif (w !== null) {\r\n\t\t\tif (w.constructor === arrayConstructor) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (w.constructor === objectConstructor) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\r\n\t// let fieldItems = Object.keys(fields[Flag]);\r\n\tfor (let i = 0; i < JSONData.length; i++) {\r\n\t\tlet temp = {};\r\n\t\t// let j = 0;\r\n\t\tfor (let field in JSONData[i]) {\r\n\t\t\tlet fData = JSONData[i][field];\r\n\t\t\tif (isLooopable(fData)) {\r\n\t\t\t\tlet temp = \"\"\r\n\t\t\t\tfor (let inData in fData)\r\n\t\t\t\t\ttemp += inData + \" : \" + fData[inData];\r\n\t\t\t\tfData = temp;\r\n\t\t\t}\r\n\t\t\t// if (field == 'name' || field == 'inst')\r\n\t\t\t// \tfData = fData.replace(/,/g, \";\");\r\n\t\t\tif (fData === undefined || fData == 'null' || fData == \"\\\"None\\\"\" || fData == null)\r\n\t\t\t\tfData = '-';\r\n\t\t\ttemp[field] = fData;\r\n\t\t\t// row += fData + ',';\r\n\t\t}\r\n\t\toutData.push(temp);\r\n\t}\r\n\tvar newWorksheet = XLSX.utils.json_to_sheet(outData);\r\n\tXLSX.utils.book_append_sheet(wb, newWorksheet, sheetNames[Flag]);\r\n\t//\r\n\t// const worksheet = XLSX.utils.aoa_to_sheet(arrayOfArray);\r\n\tnewWorksheet['!cols'] = fitToColumn(outData);\r\n\r\n\tfunction fitToColumn(outData) {\r\n\t\t// console.log('OUTDATA', outData);\r\n\t\t// get maximum character of each column\r\n\t\tlet colSize = []\r\n\t\tfor (let field in outData[0]) {\r\n\t\t\t// outData[0][field]\r\n\t\t\t// console.log('OUTDATA[0][FIELD]', outData[0][field]);\r\n\t\t\tlet wch = outData[0][field].length;\r\n\t\t\tif (wch == 0 || wch === undefined)\r\n\t\t\t\twch = 20;\r\n\t\t\tif (wch > 100)\r\n\t\t\t\twch = 100;\r\n\r\n\t\t\tcolSize.push({\r\n\t\t\t\t'wch': wch\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn colSize\r\n\r\n\t}\r\n\r\n\r\n\tvar wbout = XLSX.write(wb, {\r\n\t\tbookType: 'xlsx',\r\n\t\ttype: 'binary'\r\n\t});\r\n\tsaveAs(new Blob([s2ab(wbout)], {\r\n\t\ttype: \"application/octet-stream\"\r\n\t}), FileTitle + '.xlsx');\r\n\r\n\r\n\t// let arrData = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;\r\n\t// let CSV = '';\r\n\t// if (ShowLabel) {\r\n\t// \tlet row = \"\";\r\n\t//\r\n\t// \tlet fieldItems = Object.keys(fields[Flag]);\r\n\t// \tfieldItems.forEach((field) => {\r\n\t// \t\trow += fields[Flag][field] + ',';\r\n\t// \t});\r\n\t// \trow = row.slice(0, -1);\r\n\t// \tCSV += row + '\\r\\n';\r\n\t// }\r\n\t// for (var i = 0; i < arrData.length; i++) {\r\n\t// \tlet row = \"\";\r\n\t// \tfor (let field in fields[Flag]) {\r\n\t// \t\tlet fData = arrData[i][field];\r\n\t// \t\tif (field == 'name' || field == 'inst')\r\n\t// \t\t\tfData = fData.replace(/,/g, \";\");\r\n\t// \t\tif (fData === undefined || fData == 'null' || fData == \"\\\"None\\\"\")\r\n\t// \t\t\tfData = '-';\r\n\t// \t\trow += fData + ',';\r\n\t// \t}\r\n\t// \trow.slice(0, row.length - 1);\r\n\t// \tCSV += row + '\\r\\n';\r\n\t// }\r\n\t// if (CSV == '') {\r\n\t// \talert(\"Invalid data\");\r\n\t// \treturn;\r\n\t// }\r\n\t// var filename = FileTitle;\r\n\t// var blob = new Blob([\"\\ufeff\" + CSV], {\r\n\t// \ttype: 'text/csv;charset=utf-8;'\r\n\t// });\r\n\t// if (navigator.msSaveBlob) { // IE 10+\r\n\t// \tnavigator.msSaveBlob(blob, filename);\r\n\t// } else {\r\n\t// \tvar link = document.createElement(\"a\");\r\n\t// \tif (link.download !== undefined) { // feature detection\r\n\t// \t\tvar url = URL.createObjectURL(blob);\r\n\t// \t\tlink.setAttribute(\"href\", url);\r\n\t// \t\tlink.style = \"visibility:hidden\";\r\n\t// \t\tlink.download = filename + \".csv\";\r\n\t// \t\tdocument.body.appendChild(link);\r\n\t// \t\tlink.click();\r\n\t// \t\tdocument.body.removeChild(link);\r\n\t// \t}\r\n\t// }\r\n}\r\n\r\nconst msg = {\r\n\ttimeout: 3000, //3s\r\n\tok: \"정상적인 응답입니다.\",\r\n\t// history_ok: \"검색 목록을 정상적으로 불러왔습니다.\",\r\n\tfail: \"비정상적인 응답입니다.\",\r\n\trun: \"벤치마킹이 시작되었습니다.\"\r\n}\r\n\r\n//snackbar\r\nexport const showSnack = (ctxt, rep, msgp = \"\") => {\r\n\tif (msgp === \"\") {\r\n\t\t// if (rep.status == 200 || rep.status == 204)\r\n\t\t// \tctxt.commit('showSnack', msg.ok)\r\n\t\t// else if (rep.status == 404)\r\n\t\t// \tctxt.commit('showSnack', msg.fail)\r\n\t} else {\r\n\t\tctxt.commit('showSnack', msgp)\r\n\t}\r\n}\r\n\r\n\r\n//loading bar\r\nexport const setLoading = (ctxt, isLoading) => {\r\n\tctxt.commit('setIsLoading', isLoading)\r\n}\r\n\r\n\r\n\r\nexport const store = new Vuex.Store({\r\n\t// --------------------------------state -------------------------------------------------------------------------------------------------\r\n\tstate: {\r\n\t\tisLoading: false,\r\n\t\tsnack: {\r\n\t\t\tisShow: false,\r\n\t\t\tmsg: \"\"\r\n\t\t},\r\n\t\tisMini: false,\r\n\t\thistories: [],\r\n\t\tactiveTab: null,\r\n\t\tactiveInnerTab: {},\r\n\t\ttabs: [],\r\n\t\tsites: {},\r\n\t\tintegrations: [],\r\n\t\tigID: -1,\r\n\t\tigKeyword: \"\",\r\n\t\tfilters: {\r\n\t\t\t\"project\": {},\r\n\t\t\t\"paper\": {}\r\n\t\t},\r\n\t\tigTotal: 0,\r\n\t\tigDomestic:0,\r\n\t\tigInternational:0,\r\n\t\tigRaw: {},\r\n\t\tprevfId: 0,\r\n\t\trankinst : [],\r\n\t\ta_url : [],\r\n\t\t// selected: {\r\n\t\t// \t\t'inst': [],\r\n\t\t// \t\t'rsc': [],\r\n\t\t// \t\t'fund': [],\r\n\t\t// \t\t'year': []\r\n\t\t// \t},\r\n\t\t// \t'paper': {\r\n\t\t// \t\t'inst': [],\r\n\t\t// \t\t'year': [],\r\n\t\t// \t\t'journal': [],\r\n\t\t// \t\t'lang': []\r\n\t\t// \t},\r\n\t\t// }\r\n\r\n\t},\r\n\t// --------------------------------/state -------------------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n\t// --------------------------------mutations -------------------------------------------------------------------------------------------------\r\n\tmutations: {\r\n\r\n\t\tsetIsMini: (state, flag) => {\r\n\t\t\tstate.isMini = flag;\r\n\t\t},\r\n\t\tcloseTab: (state, id) => {\r\n\t\t\tstate.tabs.splice(state.tabs.findIndex(x => x._id == id), 1);\r\n\t\t\t//state.activeInnerTab[dHistory._id] = 0;\r\n\t\t\tif (state.tabs.length > 0)\r\n\t\t\t\tstate.activeTab = state.tabs[0]._id\r\n\t\t\t// if(idx != state.tabs.length){\r\n\t\t\t// \t\tstate.tabs.\r\n\t\t\t// }\r\n\t\t\t//\r\n\t\t\t// if (state.activeTab == idx)\r\n\t\t\t// \tstate.activeTab = state.tabs.length;\r\n\t\t},\r\n\t\t//snackbar\r\n\t\tcloseSnack: (state) => {\r\n\t\t\tstate.snack.isShow = false\r\n\t\t},\r\n\t\tshowSnack: (state, message) => {\r\n\t\t\tstate.snack = {\r\n\t\t\t\tisShow: true,\r\n\t\t\t\t// color: \"cyan darken-2\",\r\n\t\t\t\tmsg: message,\r\n\t\t\t\ttimeout: msg.timeout\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// if (typeof message === 'object') {\r\n\t\t\t// \tlet {\r\n\t\t\t// \t\tmsg,\r\n\t\t\t// \t\tcolor\r\n\t\t\t//\r\n\t\t\t// \t} = message;\r\n\t\t\t// \tstate.snack = {\r\n\t\t\t// \t\tisShow: true,\r\n\t\t\t// \t\tmsg,\r\n\t\t\t// \t\tcolor,\r\n\t\t\t// \t\ttimeout: msg.timeout\r\n\t\t\t// \t};7\r\n\t\t\t// } else {\r\n\t\t\t// \tstate.snack = {\r\n\t\t\t// \t\tisShow: true,\r\n\t\t\t// \t\tcolor: \"cyan darken-2\",\r\n\t\t\t// \t\tmsg: message,\r\n\t\t\t// \t\ttimeout: msg.timeout\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t},\r\n\t\tshowalarm : (state, message) => {\r\n\t\t\tstate.snack = {\r\n\t\t\t\tisShow: true,\r\n\t\t\t\t// color: \"cyan darken-2\",\r\n\t\t\t\tmsg: message,\r\n\t\t\t\ttimeout: msg.timeout\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetIsLoading: (state, payload) => {\r\n\t\t\tstate.isLoading = payload\r\n\t\t},\r\n\t\tsetHistories: (state, histories) => {\r\n\t\t\tif (histories.length > 0) {\r\n\t\t\t\thistories.forEach(item => {\r\n\t\t\t\t\t// console.log(item);\r\n\t\t\t\t\titem.sites.forEach(site => {\r\n\t\t\t\t\t\t// console.log(site);\r\n\t\t\t\t\t\tsite._id = item._id;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tstate.histories = histories;\r\n\t\t\t}\r\n\t\t\t// state.histories.forEach((item) => {\r\n\t\t\t// \tlet total = 0\r\n\t\t\t// \titem.sites.forEach((site, i) => {\r\n\t\t\t// \t\titem[site] = Math.random() * 100\r\n\t\t\t// \t\tif (i != 0) {\r\n\t\t\t// \t\t\ttotal += item[site]\r\n\t\t\t// \t\t}\r\n\t\t\t// \t});\r\n\t\t\t// \titem['ALL'] = total / (item.sites.length - 1);\r\n\t\t\t// });\r\n\r\n\t\t},\r\n\t\taddHistory: (state, history) => {\r\n\r\n\t\t\tstate.histories.unshift(history);\r\n\t\t},\r\n\r\n\t\taddDetailHistory: (state, dHistory) => {\r\n\t\t\tlet idx = state.histories.findIndex(h => h._id === dHistory._id);\r\n\t\t\tVue.set(state.histories, idx, dHistory);\r\n\r\n\t\t\tstate.tabs.push(dHistory);\r\n\t\t\t// state.activeTab = dHistory._id;\r\n\t\t\tstate.activeTab = state.tabs.length - 1;\r\n\t\t\tstate.activeInnerTab[state.tabs.length - 1] = 0;\r\n\r\n\r\n\t\t},\r\n\t\taddExperts: (state, experts) => {\r\n\t\t\texperts.data.forEach((expert) => {\r\n\t\t\t\texpert.keyId = experts._id\r\n\t\t\t});\r\n\r\n\t\t\tlet idx = state.tabs.findIndex(x => x._id == experts._id)\r\n\r\n\t\t\tstate.tabs[idx].sites[experts._idx].lists = experts.data;\r\n\t\t},\r\n\t\taddExpertRelation: (state, rel) => {\r\n\t\t\tlet site = state.tab.sites[rel._idx];\r\n\t\t\tif (rel.flag) {\r\n\t\t\t\t// this.\r\n\t\t\t\tsite.nodes = [];\r\n\t\t\t\tsite.links = [];\r\n\t\t\t}\r\n\t\t\tsite.nodes = site.nodes.concat(rel.data.asResults);\r\n\t\t\trel.data.results.forEach((item) => {\r\n\t\t\t\tsite.links.push({\r\n\t\t\t\t\t\"sid\": item.sourceAId,\r\n\t\t\t\t\t\"tid\": item.targetAId,\r\n\t\t\t\t\t\"name\": item.count,\r\n\t\t\t\t\t_svgAttrs: {\r\n\t\t\t\t\t\t\"stroke-width\": item.count / 2\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetSites: (state, sites) => {\r\n\t\t\tstate.sites = sites;\r\n\t\t},\r\n\t\tsetFilters: (state, filters) => {\r\n\t\t\tdelete filters['_id'];\r\n\t\t\tdelete filters['keyId'];\r\n\t\t\tdelete filters['fId'];\r\n\t\t\tif (Object.keys(filters).length > 0) {\r\n\r\n\r\n\t\t\t\tObject.keys(filters).forEach((filterKey) => {\r\n\t\t\t\t\tObject.keys(filters[filterKey]).forEach(ff => {\r\n\r\n\t\t\t\t\t\tif (filters[filterKey][ff].selected === undefined)\r\n\t\t\t\t\t\t\tfilters[filterKey][ff].selected = [];\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (filters[filterKey].inst !== undefined) {\r\n\t\t\t\t\t\tfilters[filterKey].inst.list = Object.keys(filters[filterKey].inst.list).slice(0, 10).reduce((result, key) => {\r\n\t\t\t\t\t\t\t// key = key.replaceAll('^', \".\");\r\n\r\n\t\t\t\t\t\t\tresult[key.replaceAll('^', \".\")] = filters[filterKey].inst.list[key];\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}, {});\r\n\t\t\t\t\t\t// filters[filterKey].inst.forEach((item) => {\r\n\t\t\t\t\t\t// \titem = item\r\n\t\t\t\t\t\t// });\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (filters[filterKey].journal !== undefined) {\r\n\r\n\t\t\t\t\t\tfilters[filterKey].journal.list = Object.keys(filters[filterKey].journal.list).slice(0, 10).reduce((result, key) => {\r\n\t\t\t\t\t\t\t// key = key.replaceAll('^', \".\");\r\n\t\t\t\t\t\t\tresult[key.replaceAll('^', \".\")] = filters[filterKey].journal.list[key];\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}, {});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (filters[filterKey].year !== undefined) {\r\n\r\n\t\t\t\t\t\tlet temp = new Map();\r\n\r\n\t\t\t\t\t\tObject.keys(filters[filterKey].year.list).reverse().forEach((x) => {\r\n\t\t\t\t\t\t\ttemp.set(x, filters[filterKey].year.list[x]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// let ttemp = {};\r\n\r\n\t\t\t\t\t\tconsole.log('TEMP', temp);\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t// rtv.project[f].list = temp;\r\n\t\t\t\t\t\tfilters[filterKey].year.list = temp;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tstate.filters = filters;\r\n\t\t\tconsole.log('FILTERS', filters);\r\n\t\t\tconsole.log('Filters completed')\r\n\t\t},\r\n\t\tsetIntegrationResult: (state, igResult) => {\r\n\t\t\t// let sites = ['Scienceon', 'NTIS', 'DBPIA', 'KCI'];\r\n\t\t\t// let inst = \"\";\r\n\t\t\t// let numPapers = 0;\r\n\t\t\t// let numProjects = 0;\r\n\t\t\t// let numCitations = 0;\r\n\t\t\t// let numCoop = 0;\r\n\t\t\t// let recYear = 0;\r\n\t\t\tigResult.result.forEach((author) => {\r\n\t\t\t\t// sites.forEach((site) => {\r\n\t\t\t\t// \tif (author[site] !== undefined) {\r\n\t\t\t\t// \t\t// inst = author[site].inst;\r\n\t\t\t\t//\r\n\t\t\t\t// \t\tif (site == 'NTIS') {\r\n\t\t\t\t// \t\t\tnumProjects += author[site].papers.length;\r\n\t\t\t\t// \t\t} else {\r\n\t\t\t\t// \t\t\tnumPapers += author[site].papers.length;\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\t\t\t\t// author.raw.forEach((_raw) => {\r\n\t\t\t\t// \tif (_raw.site != 'NTIS') {\r\n\t\t\t\t// \t\tif (parseInt(_raw.issue_year) > recYear) {\r\n\t\t\t\t// \t\t\trecYear = parseInt(_raw.issue_year);\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t\tnumCitations += parseInt(_raw.citation);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\r\n\r\n\t\t\t\t// author.inst = inst;\r\n\t\t\t\tauthor.numPapers += \"건\";\r\n\t\t\t\tauthor.rKeywords = '-';\r\n\t\t\t\t// author.coopHist = '-';\r\n\t\t\t\t// author.score = '-';\r\n\t\t\t\tauthor.network = '-';\r\n\t\t\t\tauthor.webSearch = 'https://www.google.com/search?q=' + author.name + \"+\" + author.inst;\r\n\t\t\t\tauthor.numProjects += \"건\";\r\n\t\t\t\tauthor.totalCitation += \"회\";\r\n\t\t\t\tauthor.totalCoop += \"건\";\r\n\t\t\t\tif (author.recentYear == '0') {\r\n\t\t\t\t\tauthor.recentYear = '-';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tauthor.recentYear += \"년\";\r\n\t\t\t\t}\r\n\t\t\t\t//author.ngvCoop = '-';\r\n\r\n\r\n\t\t\t\t// recYear = 0;\r\n\t\t\t\t// numCoop = 0;\r\n\t\t\t\t// numCitations = 0;\r\n\t\t\t\t// numProjects = 0;\r\n\t\t\t\t// numPapers = 0;\r\n\t\t\t\t// inst = \"\";\r\n\t\t\t});\r\n\r\n\r\n\r\n\r\n\t\t\tstate.integrations = igResult.result;\r\n\t\t\tconsole.log('STATE.INTEGRATIONS ', state.integrations);\r\n\r\n\r\n\t\t},\r\n\r\n\r\n\t\tsetIntegrationRaw: (state, igRaw) => {\r\n\t\t\tstate.igRaw[igRaw.idx] = igRaw;\r\n\t\t\t// state.integrations.forEach((item) => {\r\n\t\t\t// \tif (item.idx == igRaw.idx) {\r\n\t\t\t// \t\titem.raws = igRaw;\r\n\t\t\t// \t\tconsole.log('ITEM.RAWS ', item.raws);\r\n\t\t\t// \t\treturn;\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\r\n\r\n\t\t},\r\n\t\tdeleteSelected: (state) => {\r\n\t\t\tstate.selected = {\r\n\t\t\t\t'project': {\r\n\t\t\t\t\t'inst': [],\r\n\t\t\t\t\t'rsc': [],\r\n\t\t\t\t\t'fund': [],\r\n\t\t\t\t\t'year': []\r\n\t\t\t\t},\r\n\t\t\t\t'paper': {\r\n\t\t\t\t\t'inst': [],\r\n\t\t\t\t\t'year': [],\r\n\t\t\t\t\t'journal': [],\r\n\t\t\t\t\t'lang': []\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetSelected: (state, sel) => {\r\n\r\n\t\t\tObject.keys(sel.selected['paper']).forEach((key) => {\r\n\r\n\r\n\t\t\t\tif (sel.filters['paper'][key] !== undefined) {\r\n\t\t\t\t\tsel.selected['paper'][key] = sel.selected['paper'][key].map((filterItem) => {\r\n\t\t\t\t\t\tlet rtv = -1;\r\n\r\n\t\t\t\t\t\tObject.keys(sel.filters['paper'][key].list).forEach((item, idx) => {\r\n\t\t\t\t\t\t\tif (item == filterItem) {\r\n\t\t\t\t\t\t\t\trtv = idx;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn rtv;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsel.selected['paper'][key] = sel.selected['paper'][key].filter(x => x >= 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsel.selected['paper'][key] = [];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tObject.keys(sel.selected['project']).forEach((key) => {\r\n\r\n\t\t\t\tif (sel.filters['project'][key] !== undefined) {\r\n\t\t\t\t\tif (key != 'rsc' && key != 'fund') {\r\n\t\t\t\t\t\tsel.selected['project'][key] = sel.selected['project'][key].map((filterItem) => {\r\n\t\t\t\t\t\t\tlet rtv = -1;\r\n\t\t\t\t\t\t\tObject.keys(sel.filters['project'][key].list).forEach((item, idx) => {\r\n\t\t\t\t\t\t\t\tif (item == filterItem) {\r\n\t\t\t\t\t\t\t\t\trtv = idx;\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn rtv;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsel.selected['project'][key] = sel.selected['project'][key].filter(x => x >= 0);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsel.selected['project'][key] = [];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tstate.selected = sel.selected;\r\n\t\t},\r\n\t\tsetRank: (state, rank) => {\r\n\t\t\tstate.rankinst = rank.Insts;\r\n\t\t},\r\n\t\tsetNtis: (state, author_list) =>{\r\n\t\t\tstate.a_url  = author_list;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tactions: {\r\n\r\n\t\tuploadIFFile: (context, data) => {\r\n\t\t\tpost(context, 'uploadIFFile', data).then(response => {\r\n\t\t\t\tcontext.commit('showSnack', response.data + \" 개가 입력되었습니다.\")\r\n\t\t\t});\r\n\t\t},\r\n\t\tdownloadExperts: (context, data) => {\r\n\t\t\tdata.itemsPerPage = -2;\r\n\t\t\treturn get(context, 'getExperts', data).then(response => {\r\n\t\t\t\tDownloadJsonData(response.data, data._site + \"_\" + data._id, true, 2);\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetExpertPapers: (context, data) => {\r\n\t\t\t// console.log('DATA', data);\r\n\t\t\t// let dd = {\r\n\t\t\t// \tcols: [{\r\n\t\t\t// \t\tname: \"A\",\r\n\t\t\t// \t\tkey: 0\r\n\t\t\t// \t}, {\r\n\t\t\t// \t\tname: \"B\",\r\n\t\t\t// \t\tkey: 1\r\n\t\t\t// \t}, {\r\n\t\t\t// \t\tname: \"C\",\r\n\t\t\t// \t\tkey: 2\r\n\t\t\t// \t}],\r\n\t\t\t// \tdata: [\r\n\t\t\t// \t[\"id\", \"name\", \"value\"],\r\n\t\t\t// \t[1, \"sheetjs\", 7262],\r\n\t\t\t// \t[2, \"js-xlsx\", 6969]\r\n\t\t\t// ]\r\n\t\t\t// };\r\n\t\t\t// var worksheet = XLSX.utils.aoa_to_sheet(dd.data);\r\n\t\t\t// var new_workbook = XLSX.utils.book_new();\r\n\t\t\t// XLSX.utils.book_append_sheet(new_workbook, worksheet, \"SheetJS\");\r\n\t\t\t// const wbout = XLSX.write(new_workbook, {\r\n\t\t\t// \ttype: \"base64\",\r\n\t\t\t// \tbookType: \"xlsx\"\r\n\t\t\t// });\r\n\t\t\t// const body = wbout;\r\n\t\t\t// stream.fetch({\r\n\t\t\t// \tmethod: 'GET',\r\n\t\t\t// \ttype: 'json',\r\n\t\t\t// \turl: \"http://203.255.92.48:8082/getExpertPapers\",\r\n\t\t\t// \tbody: body\r\n\t\t\t// }, function(res) {\r\n\t\t\t// \t//modal.toast({ message: 'KEY: ' + res.data.key, duration: 10 });\r\n\t\t\t//\r\n\t\t\t// \t// self.version = res.data.key\r\n\t\t\t// });\r\n\r\n\r\n\t\t\treturn get(context, 'getExpertPapers', data).then(response => {\r\n\t\t\t\tlet flag = data.site === 'NTIS' ? 0 : 1;\r\n\t\t\t\tif (data.flag === undefined)\r\n\t\t\t\t\tDownloadJsonData(response.data, data.name + \"_\" + data.site, true, flag);\r\n\t\t\t\telse\r\n\t\t\t\t\tDownloadJsonData(response.data, data.site + \"_\" + data.keyId + \"_total\", true, 3);\r\n\r\n\r\n\r\n\t\t\t\t// dd.data\r\n\t\t\t\t// \tconst workbook = new Excel.Workbook();\r\n\t\t\t\t// \tconst worksheet = workbook.addWorksheet('My Sheet');\r\n\t\t\t\t// \tworksheet.columns = [\r\n\t\t\t\t// \t\t{\r\n\t\t\t\t// \t\t\theader: 'ProjectNumber',\r\n\t\t\t\t// \t\t\tkey: 'id',\r\n\t\t\t\t// \t\t\twidth: 10\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// ];\r\n\t\t\t\t// \tresponse.data.forEach((item) => {\r\n\t\t\t\t// \t\tworksheet.addRow(item);\r\n\t\t\t\t// \t});\r\n\t\t\t\t// \tvar tempFilePath = tempfile('.xlsx');\r\n\t\t\t\t//  workbook.xlsx.writeFile(tempFilePath).then(function() {\r\n\t\t\t\t// \t\t res.sendFile(tempFilePath, function(err){\r\n\t\t\t\t// \t\t });\r\n\t\t\t\t//  });\r\n\t\t\t\t//\r\n\t\t\t\t// \t// worksheet.addRow({id: 1, name: 'John Doe', dob: new Date(1970,1,1)});\r\n\t\t\t\t// \t// worksheet.addRow({id: 2, name: 'Jane Doe', dob: new Date(1965,1,7)});\r\n\t\t\t\t// \tworkbook.commit();\r\n\t\t\t\t// \tworkbook.xlsx.writeFile('./temp.xlsx').then(function() {\r\n\t\t\t\t// \t\t// done\r\n\t\t\t\t// \t});\r\n\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetExpertRelation: (context, data) => {\r\n\t\t\t// const {\r\n\t\t\t// \t_idx,\r\n\t\t\t// \tflag\r\n\t\t\t// } = data;\r\n\t\t\treturn get(context, 'getExpertRelation', data);\r\n\t\t\t// .then(response => {\r\n\t\t\t// \tcontext.commit('addExpertRelation', {\r\n\t\t\t// \t\tdata: response.data,\r\n\t\t\t// \t\t_idx,\r\n\t\t\t// \t\tflag\r\n\t\t\t// \t})\r\n\t\t\t// })\r\n\t\t},\r\n\t\tsendCrawlRequest: (context, data) => {\r\n\t\t\treturn get(context, 'sendCrawlRequest', data);\r\n\r\n\r\n\t\t},\r\n\t\tgetExperts: (context, data) => {\r\n\t\t\t// console.log('DATA', data);\r\n\t\t\t// if (data.dFlag !== undefined) {\r\n\t\t\t// \tdata.itemsPerPage = -1;\r\n\t\t\t// }\r\n\t\t\t// get(context, 'getExperts', data)\r\n\t\t\treturn get(context, 'getExperts', data).then(response => {\r\n\t\t\t\t// if (data._idx != 0) {\r\n\t\t\t\tif (data.dFlag !== undefined) {\r\n\t\t\t\t\t// response\r\n\t\t\t\t\t// console.log('RESPONSE', response);\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontext.commit('addExperts', {\r\n\t\t\t\t\t\tdata: response.data,\r\n\t\t\t\t\t\t_id: data._id,\r\n\t\t\t\t\t\t_idx: data['_idx']\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// } else {\r\n\t\t\t\t// console.log(response.data);\r\n\t\t\t\t// }\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tgetDetailHistory: (context, id) => {\r\n\r\n\t\t\tget(context, 'getDetailHistory', id)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tconsole.log(response.data)\r\n\t\t\t\t\tcontext.commit('addDetailHistory', response.data);\r\n\r\n\t\t\t\t})\r\n\t\t},\r\n\t\trequestSearch: (context, data) => {\r\n\r\n\t\t\tpost(context, 'requestSearch', data)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tflag,\r\n\t\t\t\t\t\tresults\r\n\t\t\t\t\t} = response.data;\r\n\t\t\t\t\tif (flag)\r\n\t\t\t\t\t\tcontext.commit('addHistory', results);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t// closeSnack(context);\r\n\t\t\t\t\t\tcontext.commit('showSnack', \"KeyId : \" + results + \" Now Crawling!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t},\r\n\t\t//getHistories\r\n\t\tgetHistories: (context, flag) => {\r\n\t\t\t//test id = 1\r\n\r\n\r\n\r\n\t\t\tif (flag === undefined && context.state.histories.length != 0) {\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tget(context, 'getHistories')\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\t// console.log('RESPONSE', response);\r\n\t\t\t\t\t// if(response.data)\r\n\r\n\r\n\t\t\t\t\tcontext.commit('setHistories', response.data);\r\n\r\n\t\t\t\t})\r\n\r\n\t\t\t// get(context, 'getHistories', {\r\n\t\t\t// \t\tid: 1\r\n\t\t\t// \t})\r\n\t\t\t// \t.then(response => {\r\n\t\t\t// \t\tcontext.commit('setHistories', response.data)\r\n\t\t\t// \t})\r\n\t\t},\r\n\r\n\t\tgetSiteStatus: context => {\r\n\t\t\treturn get(context, 'getSiteStatus').then(response => {\r\n\t\t\t\tcontext.commit('setSites', response.data);\r\n\t\t\t})\r\n\t\t},\r\n\t\tgetTest: context => {\r\n\t\t\tshowSnack(msg.remove, context)\r\n\t\t},\r\n\t\tremoveHistory: (context, data) => {\r\n\t\t\treturn get(context, 'removeHistory', data);\r\n\t\t},\r\n\t\teditHistory: (context, data) => {\r\n\t\t\treturn get(context, 'editHistory', data);\r\n\t\t},\r\n\t\tgetIntegrationData: (context, data) => {\r\n\t\t\tconsole.log('DATA', data);\r\n\r\n\t\t\tcontext.state.igID = data.id;\r\n\t\t\tcontext.state.igKeyword = data.query_keyword;\r\n\t\t\tcontext.commit('setFilters', {});\r\n\t\t\t// return post(context, 'getIntegrationData', data).then(response => {\r\n\t\t\t// \t// response.data\r\n\t\t\t// \tconsole.log('RESPONSE.DATA', response.data);\r\n\t\t\t// \tcontext.commit('setFilters', response.data);\r\n\t\t\t// });\r\n\t\t},\r\n\t\tgetIntegrationResult: (context, data) => {\r\n\t\t\tconsole.log('CONTEXT, DATA', context, data);\r\n\r\n\t\t\tlet size = 0;\r\n\t\t\tdata.fId = -1;\r\n\t\t\tdata.filter = context.state.filters;\r\n\t\t\t// data.project = context.state.selected.project;\r\n\t\t\t// data.paper = context.state.selected.paper;\r\n\t\t\t// // let data = {};\r\n\r\n\t\t\t// let data = Object.assign({}, _data);\r\n\t\t\t// Object.assign\r\n\t\t\tObject.keys(data.filter).forEach((key) => {\r\n\t\t\t\tObject.keys(data.filter[key]).forEach((ff) => {\r\n\t\t\t\t\t// console.log('FILTER', filter);\r\n\t\t\t\t\t// console.log('KEY', key);\r\n\t\t\t\t\t// context.state.filters[key][filter]\r\n\t\t\t\t\t// // console.log('CONTEXT.STATE.FILTERS[KEY][FILTER]', context.state.filters[key][filter]);\r\n\t\t\t\t\tif (ff == 'year') {\r\n\t\t\t\t\t\tdata.filter[key][ff].selected = data.filter[key][ff].selected.map((item) => {\r\n\t\t\t\t\t\t\tconsole.log('ITEM', item);\r\n\t\t\t\t\t\t\t// \t// console.log();\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t// \t// context.state.filters[key][filter]['list']\r\n\t\t\t\t\t\t\t// \t// console.log('CONTEXT.STATE.FILTERS[KEY][FILTER][\\'LIST\\']', );\r\n\t\t\t\t\t\t\t// \t// console.log('CONTEXT.STATE.FILTERS[KEY][FILTER].LIST[ITEM]', context.state.filters[key][filter]['list'][item]);\r\n\t\t\t\t\t\t\tconsole.log('DATA.FILTER[KEY][FF].LIST[ITEM]', data.filter[key][ff].list);\r\n\t\t\t\t\t\t\treturn Array.from(data.filter[key][ff].list)[item][0];\r\n\t\t\t\t\t\t\t// context.state.filters[key][filter]['list']\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log('TTTTTTTTTTTTTTTT', data.filter[key][ff].selected);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// console.log('DATA[KEY][FILTER]', data[key][filter]);\r\n\t\t\t\t\tsize += data.filter[key][ff].selected.length;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t// data\r\n\t\t\tconsole.log('DATA', data);\r\n\t\t\t// console.log('DATA', _data);\r\n\t\t\tconsole.log('SIZE', size);\r\n\t\t\tif (size == 0) {\r\n\t\t\t\t// if (context.state.prevfId != 0) {\r\n\t\t\t\t// data.fId = context.state.prevfId;\r\n\t\t\t\t// } else {\r\n\t\t\t\tdata.fId = 0;\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\r\n\t\t\tdata.prevfId = context.state.prevfId;\r\n\t\t\t// return;\r\n\r\n\t\t\tcontext.state.histories.forEach((item) => {\r\n\t\t\t\tif (item._id == data.keyId) {\r\n\t\t\t\t\tdata.sites = item.sites;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t// //data.fId = 1;\r\n\t\t\treturn post(context, 'getIntegrationResult', data).then(response => {\r\n\t\t\t\t// response.data\r\n\t\t\t\tconsole.log('RESPONSE.DATA', response.data);\r\n\t\t\t\tcontext.commit('setIntegrationResult', response.data);\r\n\t\t\t\tcontext.state.igTotal = response.data.totalExperts;\r\n\t\t\t\tcontext.state.igDomestic = response.data.DomesticExperts;\r\n\t\t\t\tcontext.state.igInternational = response.data.InternationalExperts;\r\n\t\t\t\tif (response.data.prevfId != 0)\r\n\t\t\t\t\tcontext.state.prevfId = response.data.prevfId;\r\n\t\t\t\tcontext.commit('setFilters', response.data.filters);\r\n\r\n\t\t\t\t// .then(context.commit('setSelected', response.data));\r\n\r\n\t\t\t\treturn response.data;\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tgetIntegrationRaw: (context, data) => {\r\n\r\n\t\t\treturn post(context, 'getIntegrationRaw', data).then(response => {\r\n\t\t\t\t// response.data\r\n\t\t\t\tconsole.log('RESPONSE.DATA', response.data);\r\n\t\t\t\tresponse.data.idx = data.idx;\r\n\t\t\t\t// return response.data;\r\n\t\t\t\tcontext.commit('setIntegrationRaw', response.data);\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tdeleteIntegration: (context, keyId) => {\r\n\t\t\tget(context, 'deleteIntegration', {\r\n\t\t\t\t\"keyId\": keyId\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetReloadPage: (context, data) => {\r\n\r\n\t\t\treturn post(context, 'getReloadPage', data).then(response => {\r\n\t\t\t\t// response.data\r\n\t\t\t\tconsole.log('RESPONSE.DATA', response.data);\r\n\t\t\t\tcontext.commit('setIntegrationResult', response.data);\r\n\t\t\t\t//\tcontext.commit('setIntegrationRaw', response.data);\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tgetInstRank: (context, data) =>{\r\n\t\t\t//console.log(\"string\");\r\n\t\t\treturn get(context, 'getInstRank', data).then(response =>{\r\n\t\t\t\tcontext.commit('setRank', response.data);\r\n\t\t\t\tconsole.log(\"setRank\",response.data);\r\n\t\t\t}) ;\r\n\t\t},\r\n\t\tgetNtisAPI: (context, data) =>{\r\n\t\t\treturn get(context, 'getNtisAPI', data).then(response =>{\r\n\t\t\t\tcontext.commit('setNtis', response.data);\r\n\t\t\t\tconsole.log('setNtis',response.data)\r\n\t\t\t})\r\n\t\t},\r\n\t\tgetstopPage: (context, data) => {\r\n\t\t\tconsole.log(\"stopPage\",data)\r\n\t\t\tget(context, 'getstopPage', data);\r\n\r\n\t\t\t// return post(context, 'getIntegrationData', data).then(response => {\r\n\t\t\t// \t// response.data\r\n\t\t\t// \tconsole.log('RESPONSE.DATA', response.data);\r\n\t\t\t// \tcontext.commit('setFilters', response.data);\r\n\t\t\t// });\r\n\t\t},\r\n\r\n\t\t}\r\n\r\n\t});\r\n"]}]}