{"remainingRequest":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\NETDB\\expert2\\expert_web\\src\\components\\InstCrawler.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\src\\components\\InstCrawler.vue","mtime":1646199605944},{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646199720093},{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\babel-loader\\lib\\index.js","mtime":1646199721724},{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646199720093},{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\vue-loader\\lib\\index.js","mtime":1646199724004}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHN0YXR1c1N0cmluZyA6IHsgMCA6IHsgJ3N0YXR1cycgOiAn7KSR7KeAIOuQqCcsICdidG4nIDogJ+yImOynkSDsmpTssq0nfSwgMSA6IHsgJ3N0YXR1cycgOiAn7IiY7KeRIOykkScsICdidG4nIDogJ+ykkeyngCAnfSB9LA0KICAgICAgY3Jhd2xCdG5UZXh0IDogJ+yImOynkSDsmpTssq0nLA0KICAgICAgaXNDcmF3bCA6IGZhbHNlLA0KICAgICAgY3Jhd2xTdGF0dXMgOiAn7JWMIOyImCDsl4bsnYwnLA0KICAgICAgZXN0aW1hdGVkVGltZSA6ICcnLA0KICAgICAgY3Jhd2xQcm9ncmVzcyA6IDAsDQogICAgICBudW1Db21wIDogMCwNCiAgICAgIHRvdGFsIDogMCwNCg0KICAgIH0NCiAgfSwgLy9kYXRhKCkgRW5kDQoNCiAgY3JlYXRlZCgpew0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRJc01pbmkiLCBmYWxzZSk7DQogIH0sDQoNCiAgbWV0aG9kczogew0KDQogICAgbWVudUNiKGluZGV4KXsNCiAgICAgIHN3aXRjaCAoaW5kZXgpIHsNCiAgICAgICAgY2FzZSAwOg0KICAgICAgICB0aGlzLmZpbGVEaWFsb2cgPSB0cnVlOw0KICAgICAgICAvLyB0aGlzLm9wZW5GaWxlSW1wb3J0KCk7DQogICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlIDEgOg0KDQogICAgICAgIC8vIHRoaXMuY3Jhd2xQcm9ncmVzcyA9IDM2Ow0KICAgICAgICB0aGlzLmluc3RDcmF3bGVyRGlhbG9nID0gdHJ1ZTsNCiAgICAgICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICB9DQogICAgfSwNCg0KICAgIHNldENyYXdsRGF0YShfZGF0YSl7DQogICAgICAvLyBjb25zb2xlLmxvZygnUkVTVUxUJywgcmVzdWx0KTsNCiAgICAgIGxldCB7Y3Jhd2xlZCwgdG90YWwsIHN0YXR1cyB9ID0gX2RhdGE7DQoNCiAgICAgIHRoaXMudG90YWwgPSB0b3RhbDsNCiAgICAgIHRoaXMubnVtQ29tcCA9IGNyYXdsZWQ7DQoNCiAgICAgIHRoaXMuY3Jhd2xTdGF0dXMgID0gdGhpcy5zdGF0dXNTdHJpbmdbc3RhdHVzXS5zdGF0dXM7DQogICAgICB0aGlzLmNyYXdsQnRuVGV4dCA9IHRoaXMuc3RhdHVzU3RyaW5nW3N0YXR1c10uYnRuOw0KDQoNCiAgICAgIGxldCB0ZW1wU2VjID0gKHRvdGFsIC0gY3Jhd2xlZCkgKiAxMDsNCiAgICAgIGxldCBob3VyID0gcGFyc2VJbnQoKHRlbXBTZWMgLyAzNjAwKSk7DQogICAgICB0ZW1wU2VjIC09ICBob3VyICogMzYwMDsNCg0KICAgICAgbGV0IG1pbiA9ICBwYXJzZUludCgodGVtcFNlYyAvIDYwKSk7DQogICAgICB0ZW1wU2VjIC09ICBtaW4gKiA2MDsNCg0KICAgICAgdGhpcy5lc3RpbWF0ZWRUaW1lID0gaG91ciArIuyLnOqwhCAiICsgbWluICsgIuu2hCAiICt0ZW1wU2VjICsi7LSIIjsNCiAgICAgIHRoaXMuY3Jhd2xQcm9ncmVzcyA9IChjcmF3bGVkIC8gdG90YWwpKjEwMDsNCiAgICB9LA0KICAgIG1ha2VCdG5TdHJpbmcoX2JGbGFnKXsNCiAgICAgIHJldHVybiBfYkZsYWcgPyAi7KSR7KeAIOyalOyyrSIgOiAi7IiY7KeRIOyalOyyrSI7DQogICAgfSwNCiAgICBtYWtlU3RhdHVzU3RyaW5nKF9zdGF0dXMpew0KICAgICAgc3dpdGNoIChfc3RhdHVzKSB7DQogICAgICAgIGNhc2UgMDoNCiAgICAgICAgcmV0dXJuICLspJHsp4Ag65CoIjsNCg0KICAgICAgICBjYXNlIDEgOg0KICAgICAgICByZXR1cm4gIuyImOynkSDspJEiOw0KDQogICAgICB9DQogICAgfSwNCiAgICBzZW5kQ3Jhd2xSZXF1ZXN0KCl7DQogICAgICAvLyBjb25zb2xlLmxvZygidGVzdCIpOw0KICAgICAgbGV0IGZsYWcgPSAwOw0KICAgICAgbGV0IGlzQ3Jhd2wgPSB0aGlzLmlzQ3Jhd2w7DQogICAgICBsZXQgdHQgPSB0aGlzOw0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NlbmRDcmF3bFJlcXVlc3QnLCB7aXNDcmF3bCwgZmxhZ30pLnRoZW4ocmVzdWx0ID0+ew0KICAgICAgICBjb25zb2xlLmxvZygnUkVTVUxUJywgcmVzdWx0KTsNCiAgICAgICAgdHQuc2V0Q3Jhd2xEYXRhKHJlc3VsdC5kYXRhKTsNCiAgICAgICAgdGhpcy5pc0NyYXdsID0gIXRoaXMuaXNDcmF3bDsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgcmVmcmVzaENyYXdsU3RhdHVzKCl7DQogICAgICBsZXQgZmxhZyA9IDE7DQogICAgICBsZXQgaXNDcmF3bCA9IHRoaXMuaXNDcmF3bDsNCiAgICAgIGxldCB0dCA9IHRoaXM7DQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VuZENyYXdsUmVxdWVzdCcsIHtpc0NyYXdsLCBmbGFnfSkudGhlbihyZXN1bHQgPT57DQogICAgICAgIGNvbnNvbGUubG9nKCdSRVNVTFQnLCByZXN1bHQpOw0KICAgICAgICB0dC5zZXRDcmF3bERhdGEocmVzdWx0LmRhdGEpOw0KICAgICAgfSk7DQogICAgfSwNCg0KICB9DQp9DQoNCg=="},{"version":3,"sources":["InstCrawler.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"InstCrawler.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n  <v-container >\r\n    <v-row align=\"center\" justify=\"center\" >\r\n      <v-col cols=\"9\">\r\n        <v-card>\r\n          <v-card-title>\r\n            <span class=\"headline\">DBPIA 소속 수집기</span>\r\n          </v-card-title>\r\n          <v-card-subtitle class=\"align-self-start mt-2\">\r\n            DBPIA 소속 데이터를 수집 - (논문 수집기와 별도 수행)\r\n          </v-card-subtitle>\r\n          <v-card-text>\r\n            수집 현황 ({{crawlStatus}})\r\n            <v-btn icon color=\"grey\" class=\"mr-2\" @click=\"refreshCrawlStatus()\">\r\n              <v-icon>refresh</v-icon>\r\n            </v-btn>\r\n            <v-spacer>\r\n            </v-spacer>\r\n            {{numComp}} 명(수집 전문가 수) / {{total}} 명(전체 전문가 수)\r\n            <v-spacer>\r\n            </v-spacer>\r\n            예상 시간 : {{estimatedTime}}\r\n          </v-card-text>\r\n          <v-card-actions>\r\n\r\n            <v-container align-end>\r\n              <v-row\r\n              class=\"fill-height\"\r\n\r\n              justify=\"center\"\r\n              >\r\n\r\n              <v-progress-linear\r\n              :value=\"crawlProgress\"\r\n              height=\"25\"\r\n              >\r\n              <template v-slot=\"{ value }\">\r\n                <strong>{{ Math.ceil(value) }}%</strong>\r\n              </template>\r\n            </v-progress-linear>\r\n          </v-row>\r\n          <v-row\r\n          class=\"fill-height mt-4\"\r\n          justify=\"end\"\r\n          ><v-btn color=\"primary\" right @click=\"sendCrawlRequest()\">{{crawlBtnText}}</v-btn>\r\n\r\n        </v-row>\r\n\r\n      </v-container>\r\n\r\n\r\n    </v-card-actions>\r\n  </v-card>\r\n</v-col>\r\n</v-row>\r\n</v-container>\r\n</template>\r\n<script>\r\n\r\n\r\nexport default {\r\n\r\n  data() {\r\n    return {\r\n      statusString : { 0 : { 'status' : '중지 됨', 'btn' : '수집 요청'}, 1 : { 'status' : '수집 중', 'btn' : '중지 '} },\r\n      crawlBtnText : '수집 요청',\r\n      isCrawl : false,\r\n      crawlStatus : '알 수 없음',\r\n      estimatedTime : '',\r\n      crawlProgress : 0,\r\n      numComp : 0,\r\n      total : 0,\r\n\r\n    }\r\n  }, //data() End\r\n\r\n  created(){\r\n      this.$store.commit(\"setIsMini\", false);\r\n  },\r\n\r\n  methods: {\r\n\r\n    menuCb(index){\r\n      switch (index) {\r\n        case 0:\r\n        this.fileDialog = true;\r\n        // this.openFileImport();\r\n        break;\r\n        case 1 :\r\n\r\n        // this.crawlProgress = 36;\r\n        this.instCrawlerDialog = true;\r\n        break;\r\n        default:\r\n      }\r\n    },\r\n\r\n    setCrawlData(_data){\r\n      // console.log('RESULT', result);\r\n      let {crawled, total, status } = _data;\r\n\r\n      this.total = total;\r\n      this.numComp = crawled;\r\n\r\n      this.crawlStatus  = this.statusString[status].status;\r\n      this.crawlBtnText = this.statusString[status].btn;\r\n\r\n\r\n      let tempSec = (total - crawled) * 10;\r\n      let hour = parseInt((tempSec / 3600));\r\n      tempSec -=  hour * 3600;\r\n\r\n      let min =  parseInt((tempSec / 60));\r\n      tempSec -=  min * 60;\r\n\r\n      this.estimatedTime = hour +\"시간 \" + min + \"분 \" +tempSec +\"초\";\r\n      this.crawlProgress = (crawled / total)*100;\r\n    },\r\n    makeBtnString(_bFlag){\r\n      return _bFlag ? \"중지 요청\" : \"수집 요청\";\r\n    },\r\n    makeStatusString(_status){\r\n      switch (_status) {\r\n        case 0:\r\n        return \"중지 됨\";\r\n\r\n        case 1 :\r\n        return \"수집 중\";\r\n\r\n      }\r\n    },\r\n    sendCrawlRequest(){\r\n      // console.log(\"test\");\r\n      let flag = 0;\r\n      let isCrawl = this.isCrawl;\r\n      let tt = this;\r\n      this.$store.dispatch('sendCrawlRequest', {isCrawl, flag}).then(result =>{\r\n        console.log('RESULT', result);\r\n        tt.setCrawlData(result.data);\r\n        this.isCrawl = !this.isCrawl;\r\n      });\r\n    },\r\n    refreshCrawlStatus(){\r\n      let flag = 1;\r\n      let isCrawl = this.isCrawl;\r\n      let tt = this;\r\n      this.$store.dispatch('sendCrawlRequest', {isCrawl, flag}).then(result =>{\r\n        console.log('RESULT', result);\r\n        tt.setCrawlData(result.data);\r\n      });\r\n    },\r\n\r\n  }\r\n}\r\n\r\n</script>\r\n"]}]}