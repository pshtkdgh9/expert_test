{"remainingRequest":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\NETDB\\expert2\\expert_web\\src\\components\\Result.vue?vue&type=style&index=1&id=1fe81ba0&lang=css&scoped=true&","dependencies":[{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\src\\components\\Result.vue","mtime":1646199605946},{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\css-loader\\dist\\cjs.js","mtime":1646199721271},{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1646199725603},{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\postcss-loader\\src\\index.js","mtime":1646199723268},{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646199720093},{"path":"C:\\Users\\NETDB\\expert2\\expert_web\\node_modules\\vue-loader\\lib\\index.js","mtime":1646199724004}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KQGltcG9ydCB1cmwoJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1QVCtTYW5zJyk7DQoNCmJvZHl7DQogIGZvbnQtZmFtaWx5OiAnUFQgU2FucycsIHNhbnMtc2VyaWY7DQogIGJhY2tncm91bmQtY29sb3I6ICNlZWU7DQp9DQoudGl0bGV7DQogIHBvc2l0aW9uOmFic29sdXRlOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGxlZnQ6IDJlbTsNCn0NCmgxLGF7DQogIGNvbG9yOiAjMWFhZDhkOw0KICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoNCnVsLm1lbnUgew0KICBsaXN0LXN0eWxlOiBub25lOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHotaW5kZXg6IDEwMDsNCiAgbWluLXdpZHRoOiAyMGVtOw0KICB0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KdWwubWVudSBsaXsNCiAgbWFyZ2luLXRvcDogMWVtOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCiNtLWVuZCBwYXRoLCAjbS1zdGFydHsNCiAgZmlsbDogcmdiYSgxOCwgMTIwLCA5OCwgMC44KTsNCn0NCi5ub2RlLWxhYmVsew0KICBmb250LXNpemU6IC41ZW07DQp9DQoubGluay1sYWJlbHsNCiAgZmlsbDogcHVycGxlOw0KICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLC41ZW0pOw0KICBmb250LXNpemU6IC44ZW07DQp9DQoubm9kZS1ob3ZlcnsNCiAgc3Ryb2tlIDogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KDQo+Pj4udi1zbGlkZXJfX3RodW1iIHsNCiAgaGVpZ2h0OiAyMHB4Ow0KICB3aWR0aDogMjBweDsNCn0NCg0KPj4+LnYtc2xpZGVyLS1ob3Jpem9udGFsIC52LXNsaWRlcl9fdHJhY2stY29udGFpbmVyIHsNCiAgaGVpZ2h0OiA1cHg7DQp9DQo="},{"version":3,"sources":["Result.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkzBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Result.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n\r\n  <v-container class=\"mx-auto\" >\r\n\r\n    <v-layout >\r\n      <v-flex class=\"flex-md-grow-1 flex-md-shrink-1\" >\r\n        <v-card color=\"#B3D4FB\" class=\"ma-4\">\r\n\r\n          <component ltext=\"결과 목록\" :is=\"comp\" :lgSize=\"6\" :itemsPerPage=\"5\" :page=\"$route.params.page\" v-on:tabInit=\"tabInit()\" v-on:tabScroll=\"tabScroll()\"></component>\r\n        </v-card>\r\n      </v-flex>\r\n\r\n\r\n    </v-layout>\r\n\r\n\r\n    <!-- <vue-tabs type=\"pills\">\r\n    <v-tab v-for=\"(tab, i) in tabs\" :key=\"i\">\r\n    <div slot=\"title\">{{tab}} <span @click.stop=\"removeTab(index)\" class=\"ti-close tab-close\"></span></div>\r\n    {{tab}}\r\n  </v-tab>\r\n</vue-tabs> -->\r\n<v-layout  md=\"6\">\r\n  <v-flex class=\"flex-md-grow-1 flex-shrink-1 pa-4\">\r\n\r\n    <v-tabs v-show=\"getTabs.length != 0 \" :value=\"getActiveTab\"\r\n    show-arrows\r\n    slider-color=\"none\"\r\n    class=\"elevation-2\" background-color=\"#011176\" dark\r\n\r\n    >\r\n    <v-tabs-slider></v-tabs-slider>\r\n    <v-tab v-for=\"(tab) in getTabs\"\r\n    :key=\"tab._id\"\r\n    >\r\n    {{ tab.query_keyword }}\r\n    <!-- <v-btn  small text left icon @click.stop=\"closeTab(tab._id)\">\r\n    <v-icon small @click=\"closeTab(tab._id)\">close</v-icon>\r\n  </v-btn> -->\r\n</v-tab>\r\n<div id=\"keywordtabs\">\r\n\r\n</div>\r\n<v-tab-item v-for=\"(tab, ti) in getTabs\" :key=\"tab._id\">\r\n  <template >\r\n    <v-flex >\r\n      <v-card class=\"ma-4\">\r\n        <div>\r\n          <p class=\"text-left font-weight-bold headline pt-4 pl-4\">\r\n            결과 상세\r\n          </p>\r\n          <p class=\"headline text-center\">검색 키워드 : {{  tab.query_keyword }}</p>\r\n        </div>\r\n        <v-tabs v-model=\"getActiveInnerTab[ti]\"\r\n        class=\"elevation-2\"\r\n        dark background-color=\"#011176\">\r\n        <v-tabs-slider></v-tabs-slider>\r\n        <v-tab v-for=\"(site, i) in tab.sites\"\r\n        :key=\"i\">\r\n        {{ site.site }}( {{ statusLabel[site.state]}}   : {{ site.progress }}%)\r\n\r\n      </v-tab>\r\n\r\n      <v-tab-item v-for=\"(site, si) in tab.sites\"\r\n      :key=\"si\">\r\n\r\n      <v-card flat tile color=\"#B3D4FB\">\r\n\r\n        <v-card-text class=\"text-left font-weight-bold text-h6\">가중치 설정</v-card-text>\r\n        <!-- <v-card-title class=\"subheading font-weight-bold\">{{ item.keyword }}</v-card-title> -->\r\n        <!-- <v-card-subtitle>{{ getStatus(item.status)}} </v-card-subtitle> -->\r\n        <!-- <v-divider></v-divider> -->\r\n        <!-- class=\"justify-end\" -->\r\n        <v-card-actions >\r\n\r\n\r\n\r\n          <v-container >\r\n            <v-layout>\r\n              <v-card color=\"white\" class=\"flex-grow-1 flex-shrink-0\">\r\n\r\n<!-- v-show='isShowGongmo(site.site, i)' -->\r\n                <v-row align=\"center\" justify=\"center\" v-for=\"(weight, i) in weights\" :key=\"i\" class=\"mt-2 mb-2\"\r\n\r\n                 >\r\n                  <v-col cols=\"2\" class=\"pt-0 pb-0\">\r\n                    <div>\r\n                      <v-subheader class=\"font-weight-bold text-h7 ml-2 mt-1\">\r\n                        {{weightLabel[i]}}\r\n                      </v-subheader>\r\n                    </div>\r\n                  </v-col>\r\n                  <v-col cols=\"10\" class=\"pt-0 pb-0\">\r\n                    <!-- <div> -->\r\n                    <!-- :label=\"getLabel(i)\" -->\r\n                    <!-- color=\"#011176\" -->\r\n                    <v-slider\r\n\r\n                    :value=\"weight\"\r\n                    v-show='isShowSlider(site.site, i)'\r\n                    height=\"5\"\r\n                    v-model=\"weights[i]\"\r\n                    thumb-label=\"always\" class=\"mt-5 pr-4\">\r\n                    <!-- <template slot=\"label\" slot-scope=\"props\">\r\n\r\n                    asd {{props.value}}\r\n\r\n                  </template>\r\n                  <template v-slot:label=\"item\" class=\"wslider\">\r\n                  asd{{item.value}}\r\n                </template> -->\r\n              </v-slider>\r\n              <!-- </div> -->\r\n            </v-col>\r\n            <v-row>\r\n              <v-col cols=\"12\" >\r\n                <hr class=\"ml-3 mr-3\"/>\r\n\r\n              </v-col>\r\n\r\n            </v-row>\r\n          </v-row>\r\n\r\n\r\n          <v-row>\r\n            <v-col>\r\n              <v-btn class=\"mt-2 mb-2 primary\" @click=\"getExperts(tab._id, site.site, si, site.state)\">가중치 적용</v-btn>\r\n\r\n            </v-col>\r\n          </v-row>\r\n\r\n        </v-card>\r\n\r\n      </v-layout>\r\n      <v-spacer></v-spacer>\r\n    </v-container>\r\n\r\n  </v-card-actions>\r\n\r\n</v-card>\r\n\r\n<v-card class=\"mt-5\" flat tile color=\"#B3D4FB\" :disabled=\"cardLoading\">\r\n\r\n  <v-card-text  id=\"experttable\"  class=\"text-left font-weight-bold text-h6\">전문가 정보  ( {{proOrPap(site.site) }} :\r\n    {{ transformLocale(site.data) }}\r\n    <v-icon class=\"ml-2\"\r\n    @click=\"clkDownloadPapers(site.site, site.experts)\"\r\n    >{{ mdiDownload }}</v-icon>\r\n      /\r\n     Experts :\r\n      {{transformLocale(site.experts)}}\r\n     <v-icon class=\"ml-2\"\r\n     @click=\"clkDownloadExperts(site.site, site.experts)\"\r\n     >{{ mdiDownload }}</v-icon>\r\n     )\r\n  </v-card-text>\r\n\r\n    <!-- <v-card-title class=\"subheading font-weight-bold\">{{ item.keyword }}</v-card-title> -->\r\n    <!-- <v-card-subtitle>{{ getStatus(item.status)}} </v-card-subtitle> -->\r\n    <!-- <v-divider></v-divider> -->\r\n    <!-- class=\"justify-end\" -->\r\n    <v-card-actions>\r\n\r\n      <v-container>\r\n        <v-layout>\r\n          <v-card class=\"flex-grow-1 flex-shrink-0 mb-2\">\r\n            <v-row align=\"center\" justify=\"center\">\r\n\r\n              <v-col >\r\n                <div>\r\n                  <v-data-table\r\n                  :headers=\"getHeaders(site.site)\"\r\n                  :items=\"site.lists\"\r\n                  :server-items-length=\"getTotal(site.experts)\"\r\n                  :loading=\"loading\"\r\n                  class=\"elevation-1\"\r\n                  :options.sync=\"options\"\r\n                  >\r\n                  <template v-slot:item.site=\"{ item }\" >\r\n                       <v-chip  class=\"identical pa-2\" :color=\"siteColor[item.site]\" dark>{{item.site}}</v-chip>\r\n                   </template>\r\n\r\n                   <template v-slot:item.Productivity=\"{ item }\" >\r\n                        {{item.Productivity}} ( {{item.Numpaper}} 건 )\r\n                    </template>\r\n\r\n\r\n\r\n\r\n                  <template v-slot:item.actions=\"{ item }\">\r\n                    <v-icon\r\n                    @click=\"clkDownload(item)\"\r\n                    >{{ mdiDownload }}</v-icon>\r\n                  </template>\r\n                  <template v-slot:item.actions2=\"{ item }\">\r\n                    <v-icon\r\n                    @click=\"clkRelation(item)\"\r\n                    >{{ mdiGraphql }}</v-icon>\r\n                  </template>\r\n\r\n                </v-data-table>\r\n              </div>\r\n            </v-col>\r\n\r\n\r\n\r\n\r\n          </v-row>\r\n        </v-card>\r\n      </v-layout>\r\n\r\n      <v-card flat tile id=\"expertrel\" >\r\n\r\n        <v-card-text class=\"text-left font-weight-bold text-h6\">{{clkNode}} 관계 정보</v-card-text>\r\n        <!-- v-if=\"getRelationships != undefined\"  -->\r\n        <!-- :net-nodes=\"nodes\"\r\n        :net-links=\"links\" -->\r\n        <d3-network ref=\"net\"\r\n\r\n        :net-nodes=\"getRelationships.nodes\"\r\n        :net-links=\"getRelationships.links\"\r\n\r\n        :options=\"d3_options\" @node-click=\"nodeClick\" />\r\n\r\n\r\n      </v-card>\r\n      <v-spacer></v-spacer>\r\n    </v-container>\r\n\r\n  </v-card-actions>\r\n\r\n</v-card>\r\n</v-tab-item>\r\n</v-tabs>\r\n</v-card>\r\n\r\n</v-flex>\r\n</template>\r\n</v-tab-item>\r\n\r\n\r\n</v-tabs>\r\n</v-flex>\r\n</v-layout>\r\n</v-container>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nimport History from './History.vue'\r\nimport D3Network from 'vue-d3-network'\r\nimport { mdiDownload } from '@mdi/js';\r\nimport { mdiGraphql } from '@mdi/js';\r\nimport * as easings from 'vuetify/es5/services/goto/easing-patterns'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      siteColor : {'NTIS' : 'orange', 'DBPIA' : 'red', 'SCIENCEON' : 'blue', 'KCI' :'indigo', 'SCOPUS' : 'lime', 'WOS' : 'purple'},\r\n      statusLabel : { '0' : 'Crawling', '1': 'Analyzing', '2' : 'Completed', '-1' : \"Crawling Failed\", '-2' : \"Consumer Failed\" , '-3' : \"Analyzer Failed\"},\r\n      // weightLabel : [ '품질', '생산성', '기여도'],\r\n      weightLabel : ['최신성', '품질', '생산성', '정확성', '협업도', '기여도','연구지속성'],\r\n      easing: 'easeInOutCubic',\r\n      test : 'tt',\r\n      easings: Object.keys(easings),\r\n      page : -1,\r\n      mdiDownload : mdiDownload,\r\n      mdiGraphql : mdiGraphql,\r\n      selected : [],\r\n      last : 0,\r\n      tab: 'tab-0',\r\n      tabs: 4,\r\n      comp: 'History',\r\n      items: ['전체', 'Korea', 'US', '..'],\r\n      model: ['전체'],\r\n      options: {},\r\n\r\n      weights : [], // essential factor\r\n      //    sweights : [], //selective factor\r\n      relationship : {},\r\n      clkNode : \"\",\r\n      headers: [\r\n        { text: '순위', value: 'rank', sortable: false , align: 'center'},\r\n        {\r\n          text: '이름',\r\n          align: 'start',\r\n          sortable: false,\r\n          value: 'name',\r\n          width : 200,\r\n        },\r\n        { text: '소속', value: 'inst', sortable: false , align: 'center', width : 200},\r\n        {\r\n          text: '수집 사이트', value: 'site', sortable: false , align: 'center'\r\n        },\r\n        { text: '최신성', value: 'Recentness' ,sortable: false, align: 'center'},\r\n        { text: '품질', value: 'Quality',sortable: false, align: 'center' },\r\n        { text: '생산성', value: 'Productivity' ,sortable: false, align: 'center'},\r\n        { text: '정확성', value: 'Acc' , sortable: false,align: 'center'},\r\n        { text: '협업도', value: 'Coop' , sortable: false,align: 'center'},\r\n        { text: '기여도', value: 'Contrib' , sortable: false,align: 'center'},\r\n        { text: '연구지속성', value: 'Durability' , sortable: false,align: 'center'},\r\n        { text: '총점', value: 'EScore' , sortable: false,align: 'center'},\r\n        { text: '관련데이터', value: 'actions', sortable: false , align: 'center'},\r\n        { text: '관계', value: 'actions2', sortable: false , align: 'center'}\r\n      ],\r\n      cardLoading : false,\r\n      loading: false,\r\n      canvas : false,\r\n\r\n      isComp : 2,\r\n      force:50,\r\n      fX:0.5,\r\n      fY:0.5,\r\n      fMb:true,\r\n      fC:false,\r\n      lastSite : '',\r\n      // d3_options : {\r\n      //   size : {w : 600 , h : 600},\r\n      //     force: 3000,\r\n      //     nodeSize: 20,\r\n      //     nodeLabels: true,\r\n      //     linkLabels : true,\r\n      //     // linkWidth:1,\r\n      //     canvas : false,\r\n      //     strLinks : true\r\n      //   }\r\n\r\n\r\n\r\n\r\n    }\r\n  }, //data() End\r\n\r\n  components: {\r\n    History,\r\n    D3Network,\r\n\r\n  },\r\n  watch: {\r\n    options: {\r\n      handler() {\r\n        let aId = this.getActiveTab;\r\n        let inIdx = this.getActiveInnerTab[aId];\r\n        // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n        let site = this.getTabs[aId].sites[inIdx].site;\r\n        // if( == isComp)\r\n        if(inIdx != 0)\r\n          this.getExperts(this.getTabs[aId]._id, site, inIdx, this.getTabs[aId].sites[inIdx].state);\r\n\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  mounted() {\r\n  },\r\n\r\n  created() {\r\n    this.weights = new Array(7).fill(50);\r\n    this.$store.commit(\"setIsMini\", false);\r\n    //for gongmo\r\n    // this.weights[0] = 0\r\n    // this.weights[3] = 0\r\n    // this.weights[4] = 0\r\n    // this.weights[6] = 0\r\n     // this.weights = new Array(3).fill(50);\r\n       // this.sweights = new Array(1).fill(50);\r\n  },\r\n  computed: {\r\n    getActiveInnerTab(){\r\n      return this.$store.state.activeInnerTab;\r\n    },\r\n    getActiveTab()\r\n    {\r\n      return this.$store.state.activeTab;\r\n\r\n    },\r\n    d3_options(){\r\n      return {force: 3000,\r\n        nodeSize: 20,\r\n        nodeLabels: true,\r\n        linkLabels : false,\r\n        linkWidth:1,\r\n        canvas : this.canvas,\r\n        offset : {\r\n          x : 0,\r\n          y : 0,\r\n        },\r\n        strLinks : true,\r\n        // strLinks : true,\r\n      }\r\n    },\r\n    getRelationships(){\r\n\r\n\r\n      let aId = this.getActiveTab\r\n      let inIdx = this.getActiveInnerTab[aId];\r\n      // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n      let site = this.getTabs[aId].sites[inIdx].site;\r\n\r\n      if(this.relationship[aId] == undefined || this.relationship[aId][site] == undefined)\r\n      return {nodes : [], links : []}\r\n\r\n      return this.relationship[aId][site];\r\n\r\n    },\r\n\r\n    getWeigths(){\r\n      return this.weights;\r\n    },\r\n    getTabs() {\r\n      // this.$store.state.tabs;\r\n\r\n      return this.$store.state.tabs;\r\n    },\r\n    isShowDetail(){\r\n      return this.getTab._id === -1;\r\n    },\r\n    // getTabWeights : {\r\n    //   get: function () {\r\n    //     let site = Object.keys(this.getTab.history.sites)[this.tab.split('-')[1]]\r\n    //     let weights = this.getTab[site].weights\r\n    //\r\n    //       return this.getTab[site].weights\r\n    //   },\r\n    //   set: function (value) {\r\n    //     let site = Object.keys(this.getTab.history.sites)[this.tab.split('-')[1]]\r\n    //     this.$store.state.tab[site].weights = value\r\n    //   }\r\n    // }\r\n  },\r\n  methods: {\r\n    transformLocale(v){\r\n      // v.experts\r\n      if (v !== undefined)\r\n        return v.toLocaleString(\"kr-KR\");\r\n        // console.log('V.EXPERTS', v);\r\n      return \"\";\r\n      // return parseInt(v.experts).toLocalString(\"kr-KR\")\r\n    },\r\n    closeTab(id) {\r\n      this.$store.commit('closeTab', id)\r\n    },\r\n\r\n    getExperts(_id, _site, _idx, _state){\r\n\r\n      if(_state != this.isComp){\r\n        this.$store.commit('showSnack', \"Now \"+ this.getStatus(_state));\r\n        return;\r\n      }\r\n\r\n      //this.last  = _flag;\r\n      this.loading = true;\r\n      getExpertFromServer(this, _id, _site, _idx).then(() => {\r\n        this.loading = false;\r\n        // this.$vuetify.goTo('#experttable');\r\n        // this.$vuetify.goTo(1600);\r\n\r\n      });\r\n\r\n      function getExpertFromServer(t, _id, _site, _idx){\r\n        return new Promise((resolve) => {\r\n          let aId = t.getActiveTab;\r\n\r\n\r\n          if(_idx === 0){\r\n            // t.$store.commit('showSnack', \"Not Provided Yet\");\r\n            let sites = [...t.getTabs[aId].sites];\r\n             sites.splice(0,1);\r\n            sites = sites.map(x=> x.site);\r\n            // console.log('SITES', sites);\r\n\r\n            t.$store.dispatch('getExperts', {_id, _idx, ...t.options, ...t.weights, sites}).then(()=>{\r\n\r\n              resolve();\r\n            });\r\n            // resolve();\r\n          }else{\r\n\r\n            let total = 0;\r\n            if(t.options.itemsPerPage == -1){\r\n              let inIdx = t.getActiveInnerTab[aId];\r\n              // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n              total = t.getTabs[aId].sites[inIdx].experts;\r\n            }\r\n\r\n            t.$store.dispatch('getExperts', {_id, _site, _idx, ...t.options, ...t.weights, total}).then(()=>{\r\n              resolve();\r\n            });\r\n\r\n          }\r\n\r\n        });\r\n      }\r\n\r\n    },\r\n    tabInit(){\r\n      this.tab = 'tab-0';\r\n      // console.log(\"asd\")\r\n\r\n    },\r\n    tabScroll(){\r\n      this.$vuetify.goTo(800);\r\n    },\r\n    nodeClick(event, node){\r\n      let aId = this.getActiveTab;\r\n      let inIdx = this.getActiveInnerTab[aId];\r\n      // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n      let view_site = this.getTabs[aId].sites[inIdx].site;\r\n\r\n      let site = this.lastSite;\r\n\r\n\r\n      if(node._color !== 'orange'){\r\n        let A_ID = node.id;\r\n        let keyId = this.getTabs[aId]._id;\r\n        let req = {A_ID, site , keyId, ...this.weights};\r\n        node = Object.assign(node, {_color : \"orange\"});\r\n\r\n        this.$set(this.relationship[aId][view_site].nodes, node.index, node);\r\n        // var start = new Date().getTime();\r\n        this.$store.dispatch('getExpertRelation', req).then(response =>{\r\n          // var elapsed = new Date().getTime() - start;\r\n          let links = [];\r\n          let { asResults : nodes } = response.data;\r\n\r\n          nodes.forEach(x=> x._size = x.Escore * 0.2);\r\n          // this.relationship[aId][site];\r\n          let tempR = this.relationship[aId][view_site];\r\n          nodes = nodes.filter(x => tempR.nodes.findIndex(y => y.id === x.id) == -1);\r\n\r\n          response.data.results.forEach((ritem) => {\r\n            let width = ritem.count *2;\r\n\r\n            let color  = \"\";\r\n            if(width > 20)\r\n              width = 20;\r\n            if (width > 5 && width <= 10)\r\n            color = \"orange\";\r\n            else if(width > 11)\r\n            color = \"red\";\r\n            links.push({\r\n              \"sid\": ritem.sourceAId,\r\n              \"tid\": ritem.targetAId,\r\n              \"_color\" : color,\r\n              // \"label\" : \"test\"\r\n              // \"name\": ritem.count,\r\n              _svgAttrs: {\r\n                \"stroke-width\": width\r\n              }\r\n            })\r\n          });\r\n\r\n          tempR.nodes = tempR.nodes.concat(nodes);\r\n\r\n          tempR.links = tempR.links.concat(links);\r\n\r\n        });\r\n        // if(node.id == 1){\r\n        // this.relationship[site].nodes.push({id: 10, name :\"Test\"});\r\n        // this.relationship[site].nodes.push({id: 1, name :\"Test\"});\r\n        // this.relationship[site].links.push({sid : 10, tid : 1, name : \"Test\" });\r\n        // }\r\n      }\r\n\r\n    },\r\n    // linkClick(event, link){\r\n    //   // link = Object.assign(link, {_color : \"orange\", name:\"\"})\r\n    //   // this.$set(this.links, link.index, link)\r\n    // },\r\n    clkDownload(item){\r\n      // item.query_keyword = this.getTab.query_keyword;\r\n\r\n      let aId = this.getActiveTab;\r\n      let inIdx = this.getActiveInnerTab[aId];\r\n      // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n\r\n      if(inIdx != 0){\r\n        let site = this.getTabs[aId].sites[inIdx].site;\r\n        item.site = site;\r\n      }\r\n      // item.site = site;\r\n      // item._idx = parseInt(this.tab.split('-')[1]);\r\n      item.keyId = this.getTabs[aId]._id;\r\n      this.$store.dispatch('getExpertPapers', item);\r\n\r\n    },\r\n    clkDownloadPapers(_site){\r\n      // console.log('_SITE', _site);\r\n\r\n      let aId = this.getActiveTab;\r\n      let _idx = this.getActiveInnerTab[aId];\r\n      // console.log('_IDX', _idx);\r\n\r\n\r\n      if(_idx == 0 ){\r\n        this.$store.commit('showSnack', \"Not Provided Yet\");\r\n      }else{\r\n        this.cardLoading = true;\r\n        this.getTabs[aId]\r\n        let _id = this.getTabs[aId]._id;\r\n        // this.$store.dispatch('downloadExperts', {_id, _site, _idx, ...this.options, ...this.weights, total}).then(()=>t.cardLoading = false);\r\n        // t.$store.dispatch('getExperts', {_id, _site, _idx, ...t.options, ...t.weights, total}).\r\n        // let sites = [...t.getTabs[aId].sites];\r\n        // sites.splice(0,1);\r\n        // sites = sites.map(x=> x.site);\r\n        // console.log('SITES', sites);\r\n\r\n        let t = this;\r\n        // let dFlag = true;\r\n        let total=50;\r\n        t.$store.dispatch('getExpertPapers', { keyId : _id, site : _site, _idx, ...t.options, ...t.weights, total, flag : 1}).then(()=> t.cardLoading = false);\r\n        // t.$store.dispatch('getExperts', {_id, _site, _idx, ...t.options, ...t.weights, total, dFlag}).then(\r\n        //   (resp)=> {\r\n        //     console.log('RESP', resp);\r\n        //     // console.log('RESP', resp);\r\n        //     let data = resp.map((x) => {return {A_ID : x.A_ID, inst :  x.inst, name : x.name, rank : x.rank} } )\r\n        //     console.log('DATA', data);\r\n        //     // console.log('DATA', data);\r\n        //\r\n        //\r\n        //   });\r\n\r\n        // t.$store.dispatch('getExperts', {_id, _idx, ...t.options, ...t.weights, sites}).then(()=>{\r\n      }\r\n\r\n    },\r\n    clkDownloadExperts(_site, total){\r\n      let aId = this.getActiveTab;\r\n      let _idx = this.getActiveInnerTab[aId];\r\n      if(_idx == 0 ){\r\n        this.$store.commit('showSnack', \"Not Provided Yet\");\r\n      }else{\r\n        this.cardLoading = true;\r\n        let t = this;\r\n        let _id = this.getTabs[aId]._id;\r\n        this.$store.dispatch('downloadExperts', {_id, _site, _idx, ...this.options, ...this.weights, total}).then(()=>t.cardLoading = false);\r\n        // t.$store.dispatch('getExperts', {_id, _site, _idx, ...t.options, ...t.weights, total}).\r\n      }\r\n\r\n    },\r\n    lcb(link){\r\n      link.name = 'Link ' + link.name;\r\n      return link;\r\n    },\r\n    clkRelation(item){\r\n      this.clkNode = item.name;\r\n\r\n\r\n      let aId = this.getActiveTab;\r\n      let inIdx = this.getActiveInnerTab[aId];\r\n      // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n\r\n      if(inIdx != 0){\r\n        let site = this.getTabs[aId].sites[inIdx].site;\r\n        item.site = site;\r\n      }\r\n      this.lastSite = item.site;\r\n        // item\r\n      // item._idx = parseInt(this.tab.split('-')[1]);\r\n      item.keyId = this.getTabs[aId]._id;\r\n      item.flag = 1;\r\n      let tempThis = this;\r\n      if(tempThis.relationship[aId] == undefined){\r\n        // tempThis.relationship[aId] = {};\r\n        tempThis.$set(tempThis.relationship, aId, {});\r\n      }\r\n\r\n      // item.flag = 1; //table click\r\n      // var start = new Date().getTime();\r\n      // let t = this;\r\n      this.$store.dispatch('getExpertRelation', {...item, ...this.weights})\r\n      .then(response => {\r\n        // console.log('RESPONSE', response);\r\n        // var elapsed = new Date().getTime() - start;\r\n        // t.$vuetify.goTo(9999);\r\n        let links = [];\r\n        const { asResults : nodes } = response.data;\r\n        nodes.forEach(x=> x._size = x.Escore * 0.2);\r\n        response.data.results.forEach((ritem) => {\r\n          let width = ritem.count *2;\r\n          if(width > 20)\r\n            width = 20;\r\n          let color  = \"\";\r\n          if (width > 5 && width <= 10)\r\n          color = \"orange\";\r\n          else if(width > 11)\r\n          color = \"red\";\r\n          links.push({\r\n            \"sid\": ritem.sourceAId,\r\n            \"tid\": ritem.targetAId,\r\n            \"_color\" : color,\r\n            // \"name\": \"test\",\r\n            _svgAttrs: {\r\n              \"stroke-width\": width,\r\n\r\n            }\r\n          })\r\n\r\n\r\n        });\r\n        let s = item.site;\r\n        // let temp = it\r\n        if(inIdx == 0)\r\n          s = 'ALL';\r\n        tempThis.$set(tempThis.relationship[aId], s, {\r\n          nodes, links\r\n        });\r\n        // console.log('TEMPTHIS.RELATIONSHIP[AID]', tempThis.relationship[aId]);\r\n\r\n        // tempThis.$set(tempThis.relationship[item.site], 'links', links)\r\n\r\n\r\n      });\r\n\r\n    },\r\n    getLabel(idx) {\r\n      switch (idx) {\r\n        case 0:\r\n        return '최신성';\r\n        case 1:\r\n        return '품질';\r\n        case 2:\r\n        return '생산성';\r\n        case 3:\r\n        return '정확성';\r\n        case 4:\r\n        return '협업도';\r\n        case 5:\r\n        return '기여도';\r\n        case 6 :\r\n        return '연구지속성';\r\n      }\r\n    },\r\n    getSize(score){\r\n      if(score < 50)\r\n      return 10;\r\n      else if(score < 100)\r\n      return 30;\r\n      else if(score < 150)\r\n      return 50;\r\n      else if(score < 200)\r\n      return 70;\r\n      else\r\n      return 100;\r\n\r\n    },\r\n    getSLabel(idx) {\r\n      switch (idx) {\r\n        case 0:\r\n        return '연구지속성';\r\n      }\r\n    },\r\n    getStatus(status) {\r\n      switch (status) {\r\n        case 0:\r\n        return 'Crawling'\r\n        case 1:\r\n        return 'Analyzing'\r\n        case 2:\r\n        return 'Completed'\r\n        // case 3:\r\n        //   return 'Stopped'\r\n        // case 4:\r\n        //   return 'Completed'\r\n      }\r\n    },\r\n    proOrPap(site){\r\n      if(site == 'NTIS')\r\n      return \"Projects\";\r\n      else\r\n      return \"Papers\";\r\n    },\r\n    isShowGongmo(site, idx){\r\n      if(idx == 0 || idx == 3 || idx == 4 || idx == 6)\r\n        return  false;\r\n      // if(site == 'NTIS' && idx == 4)\r\n      //   return false;\r\n      else\r\n        return true;\r\n    },\r\n    isShowSlider(site, idx){\r\n\r\n      if(site == 'NTIS' && idx == 4)\r\n      return false;\r\n      else\r\n      return true;\r\n    },\r\n    getTotal(numExperts){\r\n      if (numExperts >50)\r\n        return 50;\r\n      else\r\n        return numExperts;\r\n    },\r\n    getHeaders(site){\r\n\r\n      let tempHeader = [...this.headers];\r\n      if(site == 'ALL'){\r\n        return this.headers;\r\n      }\r\n      else{\r\n        tempHeader.splice(3,1);\r\n        if(site == 'NTIS'){\r\n          tempHeader.splice(7,1);\r\n        }\r\n        return tempHeader;\r\n        // else{\r\n        //   return te;\r\n        // }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n<style src=\"vue-d3-network/dist/vue-d3-network.css\"></style>\r\n<style lang=\"css\" scoped>\r\n@import url('https://fonts.googleapis.com/css?family=PT+Sans');\r\n\r\nbody{\r\n  font-family: 'PT Sans', sans-serif;\r\n  background-color: #eee;\r\n}\r\n.title{\r\n  position:absolute;\r\n  text-align: center;\r\n  left: 2em;\r\n}\r\nh1,a{\r\n  color: #1aad8d;\r\n  text-decoration: none;\r\n}\r\n\r\nul.menu {\r\n  list-style: none;\r\n  position: absolute;\r\n  z-index: 100;\r\n  min-width: 20em;\r\n  text-align: left;\r\n}\r\nul.menu li{\r\n  margin-top: 1em;\r\n  position: relative;\r\n}\r\n\r\n#m-end path, #m-start{\r\n  fill: rgba(18, 120, 98, 0.8);\r\n}\r\n.node-label{\r\n  font-size: .5em;\r\n}\r\n.link-label{\r\n  fill: purple;\r\n  transform: translate(0,.5em);\r\n  font-size: .8em;\r\n}\r\n.node-hover{\r\n  stroke : #ffffff !important;\r\n}\r\n\r\n>>>.v-slider__thumb {\r\n  height: 20px;\r\n  width: 20px;\r\n}\r\n\r\n>>>.v-slider--horizontal .v-slider__track-container {\r\n  height: 5px;\r\n}\r\n</style>\r\n"]}]}