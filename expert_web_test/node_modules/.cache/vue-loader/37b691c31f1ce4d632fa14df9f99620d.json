{"remainingRequest":"C:\\Users\\netdb\\expert_test\\expert_test\\expert_web_test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\netdb\\expert_test\\expert_test\\expert_web_test\\src\\components\\Result.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\netdb\\expert_test\\expert_test\\expert_web_test\\src\\components\\Result.vue","mtime":1662543743458},{"path":"C:\\Users\\netdb\\expert_test\\expert_test\\expert_web_test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662543709072},{"path":"C:\\Users\\netdb\\expert_test\\expert_test\\expert_web_test\\node_modules\\babel-loader\\lib\\index.js","mtime":1662543708310},{"path":"C:\\Users\\netdb\\expert_test\\expert_test\\expert_web_test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662543709072},{"path":"C:\\Users\\netdb\\expert_test\\expert_test\\expert_web_test\\node_modules\\vue-loader\\lib\\index.js","mtime":1662543737457}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBIaXN0b3J5IGZyb20gJy4vSGlzdG9yeS52dWUnDQppbXBvcnQgRDNOZXR3b3JrIGZyb20gJ3Z1ZS1kMy1uZXR3b3JrJw0KaW1wb3J0IHsgbWRpRG93bmxvYWQgfSBmcm9tICdAbWRpL2pzJzsNCmltcG9ydCB7IG1kaUdyYXBocWwgfSBmcm9tICdAbWRpL2pzJzsNCmltcG9ydCAqIGFzIGVhc2luZ3MgZnJvbSAndnVldGlmeS9lczUvc2VydmljZXMvZ290by9lYXNpbmctcGF0dGVybnMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2l0ZUNvbG9yIDogeydOVElTJyA6ICdvcmFuZ2UnLCAnREJQSUEnIDogJ3JlZCcsICdTQ0lFTkNFT04nIDogJ2JsdWUnLCAnS0NJJyA6J2luZGlnbycsICdTQ09QVVMnIDogJ2xpbWUnLCAnV09TJyA6ICdwdXJwbGUnfSwNCiAgICAgIHN0YXR1c0xhYmVsIDogeyAnMCcgOiAnQ3Jhd2xpbmcnLCAnMSc6ICdBbmFseXppbmcnLCAnMicgOiAnQ29tcGxldGVkJywgJy0xJyA6ICJDcmF3bGluZyBGYWlsZWQiLCAnLTInIDogIkNvbnN1bWVyIEZhaWxlZCIgLCAnLTMnIDogIkFuYWx5emVyIEZhaWxlZCJ9LA0KICAgICAgLy8gd2VpZ2h0TGFiZWwgOiBbICftkojsp4gnLCAn7IOd7IKw7ISxJywgJ+q4sOyXrOuPhCddLA0KICAgICAgd2VpZ2h0TGFiZWwgOiBbJ+y1nOyLoOyEsScsICftkojsp4gnLCAn7IOd7IKw7ISxJywgJ+ygle2ZleyEsScsICftmJHsl4Xrj4QnLCAn6riw7Jes64+EJywn7Jew6rWs7KeA7IaN7ISxJ10sDQogICAgICBlYXNpbmc6ICdlYXNlSW5PdXRDdWJpYycsDQogICAgICB0ZXN0IDogJ3R0JywNCiAgICAgIGVhc2luZ3M6IE9iamVjdC5rZXlzKGVhc2luZ3MpLA0KICAgICAgcGFnZSA6IC0xLA0KICAgICAgbWRpRG93bmxvYWQgOiBtZGlEb3dubG9hZCwNCiAgICAgIG1kaUdyYXBocWwgOiBtZGlHcmFwaHFsLA0KICAgICAgc2VsZWN0ZWQgOiBbXSwNCiAgICAgIGxhc3QgOiAwLA0KICAgICAgdGFiOiAndGFiLTAnLA0KICAgICAgdGFiczogNCwNCiAgICAgIGNvbXA6ICdIaXN0b3J5JywNCiAgICAgIGl0ZW1zOiBbJ+yghOyytCcsICdLb3JlYScsICdVUycsICcuLiddLA0KICAgICAgbW9kZWw6IFsn7KCE7LK0J10sDQogICAgICBvcHRpb25zOiB7fSwNCg0KICAgICAgd2VpZ2h0cyA6IFtdLCAvLyBlc3NlbnRpYWwgZmFjdG9yDQogICAgICAvLyAgICBzd2VpZ2h0cyA6IFtdLCAvL3NlbGVjdGl2ZSBmYWN0b3INCiAgICAgIHJlbGF0aW9uc2hpcCA6IHt9LA0KICAgICAgY2xrTm9kZSA6ICIiLA0KICAgICAgaGVhZGVyczogWw0KICAgICAgICB7IHRleHQ6ICfsiJzsnIQnLCB2YWx1ZTogJ3JhbmsnLCBzb3J0YWJsZTogZmFsc2UgLCBhbGlnbjogJ2NlbnRlcid9LA0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogJ+ydtOumhCcsDQogICAgICAgICAgYWxpZ246ICdzdGFydCcsDQogICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgIHZhbHVlOiAnbmFtZScsDQogICAgICAgICAgd2lkdGggOiAyMDAsDQogICAgICAgIH0sDQogICAgICAgIHsgdGV4dDogJ+yGjOyGjScsIHZhbHVlOiAnaW5zdCcsIHNvcnRhYmxlOiBmYWxzZSAsIGFsaWduOiAnY2VudGVyJywgd2lkdGggOiAyMDB9LA0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogJ+yImOynkSDsgqzsnbTtirgnLCB2YWx1ZTogJ3NpdGUnLCBzb3J0YWJsZTogZmFsc2UgLCBhbGlnbjogJ2NlbnRlcicNCiAgICAgICAgfSwNCiAgICAgICAgeyB0ZXh0OiAn7LWc7Iug7ISxJywgdmFsdWU6ICdSZWNlbnRuZXNzJyAsc29ydGFibGU6IGZhbHNlLCBhbGlnbjogJ2NlbnRlcid9LA0KICAgICAgICB7IHRleHQ6ICftkojsp4gnLCB2YWx1ZTogJ1F1YWxpdHknLHNvcnRhYmxlOiBmYWxzZSwgYWxpZ246ICdjZW50ZXInIH0sDQogICAgICAgIHsgdGV4dDogJ+yDneyCsOyEsScsIHZhbHVlOiAnUHJvZHVjdGl2aXR5JyAsc29ydGFibGU6IGZhbHNlLCBhbGlnbjogJ2NlbnRlcid9LA0KICAgICAgICB7IHRleHQ6ICfsoJXtmZXshLEnLCB2YWx1ZTogJ0FjYycgLCBzb3J0YWJsZTogZmFsc2UsYWxpZ246ICdjZW50ZXInfSwNCiAgICAgICAgeyB0ZXh0OiAn7ZiR7JeF64+EJywgdmFsdWU6ICdDb29wJyAsIHNvcnRhYmxlOiBmYWxzZSxhbGlnbjogJ2NlbnRlcid9LA0KICAgICAgICB7IHRleHQ6ICfquLDsl6zrj4QnLCB2YWx1ZTogJ0NvbnRyaWInICwgc29ydGFibGU6IGZhbHNlLGFsaWduOiAnY2VudGVyJ30sDQogICAgICAgIHsgdGV4dDogJ+yXsOq1rOyngOyGjeyEsScsIHZhbHVlOiAnRHVyYWJpbGl0eScgLCBzb3J0YWJsZTogZmFsc2UsYWxpZ246ICdjZW50ZXInfSwNCiAgICAgICAgeyB0ZXh0OiAn7LSd7KCQJywgdmFsdWU6ICdFU2NvcmUnICwgc29ydGFibGU6IGZhbHNlLGFsaWduOiAnY2VudGVyJ30sDQogICAgICAgIHsgdGV4dDogJ+q0gOugqOuNsOydtO2EsCcsIHZhbHVlOiAnYWN0aW9ucycsIHNvcnRhYmxlOiBmYWxzZSAsIGFsaWduOiAnY2VudGVyJ30sDQogICAgICAgIHsgdGV4dDogJ+q0gOqzhCcsIHZhbHVlOiAnYWN0aW9uczInLCBzb3J0YWJsZTogZmFsc2UgLCBhbGlnbjogJ2NlbnRlcid9DQogICAgICBdLA0KICAgICAgY2FyZExvYWRpbmcgOiBmYWxzZSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgY2FudmFzIDogZmFsc2UsDQoNCiAgICAgIGlzQ29tcCA6IDIsDQogICAgICBmb3JjZTo1MCwNCiAgICAgIGZYOjAuNSwNCiAgICAgIGZZOjAuNSwNCiAgICAgIGZNYjp0cnVlLA0KICAgICAgZkM6ZmFsc2UsDQogICAgICBsYXN0U2l0ZSA6ICcnLA0KICAgICAgLy8gZDNfb3B0aW9ucyA6IHsNCiAgICAgIC8vICAgc2l6ZSA6IHt3IDogNjAwICwgaCA6IDYwMH0sDQogICAgICAvLyAgICAgZm9yY2U6IDMwMDAsDQogICAgICAvLyAgICAgbm9kZVNpemU6IDIwLA0KICAgICAgLy8gICAgIG5vZGVMYWJlbHM6IHRydWUsDQogICAgICAvLyAgICAgbGlua0xhYmVscyA6IHRydWUsDQogICAgICAvLyAgICAgLy8gbGlua1dpZHRoOjEsDQogICAgICAvLyAgICAgY2FudmFzIDogZmFsc2UsDQogICAgICAvLyAgICAgc3RyTGlua3MgOiB0cnVlDQogICAgICAvLyAgIH0NCg0KDQoNCg0KICAgIH0NCiAgfSwgLy9kYXRhKCkgRW5kDQoNCiAgY29tcG9uZW50czogew0KICAgIEhpc3RvcnksDQogICAgRDNOZXR3b3JrLA0KDQogIH0sDQogIHdhdGNoOiB7DQogICAgb3B0aW9uczogew0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgbGV0IGFJZCA9IHRoaXMuZ2V0QWN0aXZlVGFiOw0KICAgICAgICBsZXQgaW5JZHggPSB0aGlzLmdldEFjdGl2ZUlubmVyVGFiW2FJZF07DQogICAgICAgIC8vIGxldCBhSWR4ID0gdGhpcy5nZXRUYWJzLmZpbmRJbmRleCh4PT4geC5faWQgPT0gYUlkKTsNCiAgICAgICAgbGV0IHNpdGUgPSB0aGlzLmdldFRhYnNbYUlkXS5zaXRlc1tpbklkeF0uc2l0ZTsNCiAgICAgICAgLy8gaWYoID09IGlzQ29tcCkNCiAgICAgICAgaWYoaW5JZHggIT0gMCkNCiAgICAgICAgICB0aGlzLmdldEV4cGVydHModGhpcy5nZXRUYWJzW2FJZF0uX2lkLCBzaXRlLCBpbklkeCwgdGhpcy5nZXRUYWJzW2FJZF0uc2l0ZXNbaW5JZHhdLnN0YXRlKTsNCg0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogIH0sDQoNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLndlaWdodHMgPSBuZXcgQXJyYXkoNykuZmlsbCg1MCk7DQogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRJc01pbmkiLCBmYWxzZSk7DQogICAgLy9mb3IgZ29uZ21vDQogICAgLy8gdGhpcy53ZWlnaHRzWzBdID0gMA0KICAgIC8vIHRoaXMud2VpZ2h0c1szXSA9IDANCiAgICAvLyB0aGlzLndlaWdodHNbNF0gPSAwDQogICAgLy8gdGhpcy53ZWlnaHRzWzZdID0gMA0KICAgICAvLyB0aGlzLndlaWdodHMgPSBuZXcgQXJyYXkoMykuZmlsbCg1MCk7DQogICAgICAgLy8gdGhpcy5zd2VpZ2h0cyA9IG5ldyBBcnJheSgxKS5maWxsKDUwKTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBnZXRBY3RpdmVJbm5lclRhYigpew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZUlubmVyVGFiOw0KICAgIH0sDQogICAgZ2V0QWN0aXZlVGFiKCkNCiAgICB7DQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZlVGFiOw0KDQogICAgfSwNCiAgICBkM19vcHRpb25zKCl7DQogICAgICByZXR1cm4ge2ZvcmNlOiAzMDAwLA0KICAgICAgICBub2RlU2l6ZTogMjAsDQogICAgICAgIG5vZGVMYWJlbHM6IHRydWUsDQogICAgICAgIGxpbmtMYWJlbHMgOiBmYWxzZSwNCiAgICAgICAgbGlua1dpZHRoOjEsDQogICAgICAgIGNhbnZhcyA6IHRoaXMuY2FudmFzLA0KICAgICAgICBvZmZzZXQgOiB7DQogICAgICAgICAgeCA6IDAsDQogICAgICAgICAgeSA6IDAsDQogICAgICAgIH0sDQogICAgICAgIHN0ckxpbmtzIDogdHJ1ZSwNCiAgICAgICAgLy8gc3RyTGlua3MgOiB0cnVlLA0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0UmVsYXRpb25zaGlwcygpew0KDQoNCiAgICAgIGxldCBhSWQgPSB0aGlzLmdldEFjdGl2ZVRhYg0KICAgICAgbGV0IGluSWR4ID0gdGhpcy5nZXRBY3RpdmVJbm5lclRhYlthSWRdOw0KICAgICAgLy8gbGV0IGFJZHggPSB0aGlzLmdldFRhYnMuZmluZEluZGV4KHg9PiB4Ll9pZCA9PSBhSWQpOw0KICAgICAgbGV0IHNpdGUgPSB0aGlzLmdldFRhYnNbYUlkXS5zaXRlc1tpbklkeF0uc2l0ZTsNCg0KICAgICAgaWYodGhpcy5yZWxhdGlvbnNoaXBbYUlkXSA9PSB1bmRlZmluZWQgfHwgdGhpcy5yZWxhdGlvbnNoaXBbYUlkXVtzaXRlXSA9PSB1bmRlZmluZWQpDQogICAgICByZXR1cm4ge25vZGVzIDogW10sIGxpbmtzIDogW119DQoNCiAgICAgIHJldHVybiB0aGlzLnJlbGF0aW9uc2hpcFthSWRdW3NpdGVdOw0KDQogICAgfSwNCg0KICAgIGdldFdlaWd0aHMoKXsNCiAgICAgIHJldHVybiB0aGlzLndlaWdodHM7DQogICAgfSwNCiAgICBnZXRUYWJzKCkgew0KICAgICAgLy8gdGhpcy4kc3RvcmUuc3RhdGUudGFiczsNCg0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnRhYnM7DQogICAgfSwNCiAgICBpc1Nob3dEZXRhaWwoKXsNCiAgICAgIHJldHVybiB0aGlzLmdldFRhYi5faWQgPT09IC0xOw0KICAgIH0sDQogICAgLy8gZ2V0VGFiV2VpZ2h0cyA6IHsNCiAgICAvLyAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgIC8vICAgICBsZXQgc2l0ZSA9IE9iamVjdC5rZXlzKHRoaXMuZ2V0VGFiLmhpc3Rvcnkuc2l0ZXMpW3RoaXMudGFiLnNwbGl0KCctJylbMV1dDQogICAgLy8gICAgIGxldCB3ZWlnaHRzID0gdGhpcy5nZXRUYWJbc2l0ZV0ud2VpZ2h0cw0KICAgIC8vDQogICAgLy8gICAgICAgcmV0dXJuIHRoaXMuZ2V0VGFiW3NpdGVdLndlaWdodHMNCiAgICAvLyAgIH0sDQogICAgLy8gICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkgew0KICAgIC8vICAgICBsZXQgc2l0ZSA9IE9iamVjdC5rZXlzKHRoaXMuZ2V0VGFiLmhpc3Rvcnkuc2l0ZXMpW3RoaXMudGFiLnNwbGl0KCctJylbMV1dDQogICAgLy8gICAgIHRoaXMuJHN0b3JlLnN0YXRlLnRhYltzaXRlXS53ZWlnaHRzID0gdmFsdWUNCiAgICAvLyAgIH0NCiAgICAvLyB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB0cmFuc2Zvcm1Mb2NhbGUodil7DQogICAgICAvLyB2LmV4cGVydHMNCiAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpDQogICAgICAgIHJldHVybiB2LnRvTG9jYWxlU3RyaW5nKCJrci1LUiIpOw0KICAgICAgICAvLyBjb25zb2xlLmxvZygnVi5FWFBFUlRTJywgdik7DQogICAgICByZXR1cm4gIiI7DQogICAgICAvLyByZXR1cm4gcGFyc2VJbnQodi5leHBlcnRzKS50b0xvY2FsU3RyaW5nKCJrci1LUiIpDQogICAgfSwNCiAgICBjbG9zZVRhYihpZCkgew0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjbG9zZVRhYicsIGlkKQ0KICAgIH0sDQoNCiAgICBnZXRFeHBlcnRzKF9pZCwgX3NpdGUsIF9pZHgsIF9zdGF0ZSl7DQoNCiAgICAgIGlmKF9zdGF0ZSAhPSB0aGlzLmlzQ29tcCl7DQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2hvd1NuYWNrJywgIk5vdyAiKyB0aGlzLmdldFN0YXR1cyhfc3RhdGUpKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICAvL3RoaXMubGFzdCAgPSBfZmxhZzsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBnZXRFeHBlcnRGcm9tU2VydmVyKHRoaXMsIF9pZCwgX3NpdGUsIF9pZHgpLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgLy8gdGhpcy4kdnVldGlmeS5nb1RvKCcjZXhwZXJ0dGFibGUnKTsNCiAgICAgICAgLy8gdGhpcy4kdnVldGlmeS5nb1RvKDE2MDApOw0KDQogICAgICB9KTsNCg0KICAgICAgZnVuY3Rpb24gZ2V0RXhwZXJ0RnJvbVNlcnZlcih0LCBfaWQsIF9zaXRlLCBfaWR4KXsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7DQogICAgICAgICAgbGV0IGFJZCA9IHQuZ2V0QWN0aXZlVGFiOw0KDQoNCiAgICAgICAgICBpZihfaWR4ID09PSAwKXsNCiAgICAgICAgICAgIC8vIHQuJHN0b3JlLmNvbW1pdCgnc2hvd1NuYWNrJywgIk5vdCBQcm92aWRlZCBZZXQiKTsNCiAgICAgICAgICAgIGxldCBzaXRlcyA9IFsuLi50LmdldFRhYnNbYUlkXS5zaXRlc107DQogICAgICAgICAgICAgc2l0ZXMuc3BsaWNlKDAsMSk7DQogICAgICAgICAgICBzaXRlcyA9IHNpdGVzLm1hcCh4PT4geC5zaXRlKTsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdTSVRFUycsIHNpdGVzKTsNCg0KICAgICAgICAgICAgdC4kc3RvcmUuZGlzcGF0Y2goJ2dldEV4cGVydHMnLCB7X2lkLCBfaWR4LCAuLi50Lm9wdGlvbnMsIC4uLnQud2VpZ2h0cywgc2l0ZXN9KS50aGVuKCgpPT57DQoNCiAgICAgICAgICAgICAgcmVzb2x2ZSgpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAvLyByZXNvbHZlKCk7DQogICAgICAgICAgfWVsc2V7DQoNCiAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7DQogICAgICAgICAgICBpZih0Lm9wdGlvbnMuaXRlbXNQZXJQYWdlID09IC0xKXsNCiAgICAgICAgICAgICAgbGV0IGluSWR4ID0gdC5nZXRBY3RpdmVJbm5lclRhYlthSWRdOw0KICAgICAgICAgICAgICAvLyBsZXQgYUlkeCA9IHRoaXMuZ2V0VGFicy5maW5kSW5kZXgoeD0+IHguX2lkID09IGFJZCk7DQogICAgICAgICAgICAgIHRvdGFsID0gdC5nZXRUYWJzW2FJZF0uc2l0ZXNbaW5JZHhdLmV4cGVydHM7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHQuJHN0b3JlLmRpc3BhdGNoKCdnZXRFeHBlcnRzJywge19pZCwgX3NpdGUsIF9pZHgsIC4uLnQub3B0aW9ucywgLi4udC53ZWlnaHRzLCB0b3RhbH0pLnRoZW4oKCk9PnsNCiAgICAgICAgICAgICAgcmVzb2x2ZSgpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICB9DQoNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICB9LA0KICAgIHRhYkluaXQoKXsNCiAgICAgIHRoaXMudGFiID0gJ3RhYi0wJzsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCJhc2QiKQ0KDQogICAgfSwNCiAgICB0YWJTY3JvbGwoKXsNCiAgICAgIHRoaXMuJHZ1ZXRpZnkuZ29Ubyg4MDApOw0KICAgIH0sDQogICAgbm9kZUNsaWNrKGV2ZW50LCBub2RlKXsNCiAgICAgIGxldCBhSWQgPSB0aGlzLmdldEFjdGl2ZVRhYjsNCiAgICAgIGxldCBpbklkeCA9IHRoaXMuZ2V0QWN0aXZlSW5uZXJUYWJbYUlkXTsNCiAgICAgIC8vIGxldCBhSWR4ID0gdGhpcy5nZXRUYWJzLmZpbmRJbmRleCh4PT4geC5faWQgPT0gYUlkKTsNCiAgICAgIGxldCB2aWV3X3NpdGUgPSB0aGlzLmdldFRhYnNbYUlkXS5zaXRlc1tpbklkeF0uc2l0ZTsNCg0KICAgICAgbGV0IHNpdGUgPSB0aGlzLmxhc3RTaXRlOw0KDQoNCiAgICAgIGlmKG5vZGUuX2NvbG9yICE9PSAnb3JhbmdlJyl7DQogICAgICAgIGxldCBBX0lEID0gbm9kZS5pZDsNCiAgICAgICAgbGV0IGtleUlkID0gdGhpcy5nZXRUYWJzW2FJZF0uX2lkOw0KICAgICAgICBsZXQgcmVxID0ge0FfSUQsIHNpdGUgLCBrZXlJZCwgLi4udGhpcy53ZWlnaHRzfTsNCiAgICAgICAgbm9kZSA9IE9iamVjdC5hc3NpZ24obm9kZSwge19jb2xvciA6ICJvcmFuZ2UifSk7DQoNCiAgICAgICAgdGhpcy4kc2V0KHRoaXMucmVsYXRpb25zaGlwW2FJZF1bdmlld19zaXRlXS5ub2Rlcywgbm9kZS5pbmRleCwgbm9kZSk7DQogICAgICAgIC8vIHZhciBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2V0RXhwZXJ0UmVsYXRpb24nLCByZXEpLnRoZW4ocmVzcG9uc2UgPT57DQogICAgICAgICAgLy8gdmFyIGVsYXBzZWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0Ow0KICAgICAgICAgIGxldCBsaW5rcyA9IFtdOw0KICAgICAgICAgIGxldCB7IGFzUmVzdWx0cyA6IG5vZGVzIH0gPSByZXNwb25zZS5kYXRhOw0KDQogICAgICAgICAgbm9kZXMuZm9yRWFjaCh4PT4geC5fc2l6ZSA9IHguRXNjb3JlICogMC4yKTsNCiAgICAgICAgICAvLyB0aGlzLnJlbGF0aW9uc2hpcFthSWRdW3NpdGVdOw0KICAgICAgICAgIGxldCB0ZW1wUiA9IHRoaXMucmVsYXRpb25zaGlwW2FJZF1bdmlld19zaXRlXTsNCiAgICAgICAgICBub2RlcyA9IG5vZGVzLmZpbHRlcih4ID0+IHRlbXBSLm5vZGVzLmZpbmRJbmRleCh5ID0+IHkuaWQgPT09IHguaWQpID09IC0xKTsNCg0KICAgICAgICAgIHJlc3BvbnNlLmRhdGEucmVzdWx0cy5mb3JFYWNoKChyaXRlbSkgPT4gew0KICAgICAgICAgICAgbGV0IHdpZHRoID0gcml0ZW0uY291bnQgKjI7DQoNCiAgICAgICAgICAgIGxldCBjb2xvciAgPSAiIjsNCiAgICAgICAgICAgIGlmKHdpZHRoID4gMjApDQogICAgICAgICAgICAgIHdpZHRoID0gMjA7DQogICAgICAgICAgICBpZiAod2lkdGggPiA1ICYmIHdpZHRoIDw9IDEwKQ0KICAgICAgICAgICAgY29sb3IgPSAib3JhbmdlIjsNCiAgICAgICAgICAgIGVsc2UgaWYod2lkdGggPiAxMSkNCiAgICAgICAgICAgIGNvbG9yID0gInJlZCI7DQogICAgICAgICAgICBsaW5rcy5wdXNoKHsNCiAgICAgICAgICAgICAgInNpZCI6IHJpdGVtLnNvdXJjZUFJZCwNCiAgICAgICAgICAgICAgInRpZCI6IHJpdGVtLnRhcmdldEFJZCwNCiAgICAgICAgICAgICAgIl9jb2xvciIgOiBjb2xvciwNCiAgICAgICAgICAgICAgLy8gImxhYmVsIiA6ICJ0ZXN0Ig0KICAgICAgICAgICAgICAvLyAibmFtZSI6IHJpdGVtLmNvdW50LA0KICAgICAgICAgICAgICBfc3ZnQXR0cnM6IHsNCiAgICAgICAgICAgICAgICAic3Ryb2tlLXdpZHRoIjogd2lkdGgNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIHRlbXBSLm5vZGVzID0gdGVtcFIubm9kZXMuY29uY2F0KG5vZGVzKTsNCg0KICAgICAgICAgIHRlbXBSLmxpbmtzID0gdGVtcFIubGlua3MuY29uY2F0KGxpbmtzKTsNCg0KICAgICAgICB9KTsNCiAgICAgICAgLy8gaWYobm9kZS5pZCA9PSAxKXsNCiAgICAgICAgLy8gdGhpcy5yZWxhdGlvbnNoaXBbc2l0ZV0ubm9kZXMucHVzaCh7aWQ6IDEwLCBuYW1lIDoiVGVzdCJ9KTsNCiAgICAgICAgLy8gdGhpcy5yZWxhdGlvbnNoaXBbc2l0ZV0ubm9kZXMucHVzaCh7aWQ6IDEsIG5hbWUgOiJUZXN0In0pOw0KICAgICAgICAvLyB0aGlzLnJlbGF0aW9uc2hpcFtzaXRlXS5saW5rcy5wdXNoKHtzaWQgOiAxMCwgdGlkIDogMSwgbmFtZSA6ICJUZXN0IiB9KTsNCiAgICAgICAgLy8gfQ0KICAgICAgfQ0KDQogICAgfSwNCiAgICAvLyBsaW5rQ2xpY2soZXZlbnQsIGxpbmspew0KICAgIC8vICAgLy8gbGluayA9IE9iamVjdC5hc3NpZ24obGluaywge19jb2xvciA6ICJvcmFuZ2UiLCBuYW1lOiIifSkNCiAgICAvLyAgIC8vIHRoaXMuJHNldCh0aGlzLmxpbmtzLCBsaW5rLmluZGV4LCBsaW5rKQ0KICAgIC8vIH0sDQogICAgY2xrRG93bmxvYWQoaXRlbSl7DQogICAgICAvLyBpdGVtLnF1ZXJ5X2tleXdvcmQgPSB0aGlzLmdldFRhYi5xdWVyeV9rZXl3b3JkOw0KDQogICAgICBsZXQgYUlkID0gdGhpcy5nZXRBY3RpdmVUYWI7DQogICAgICBsZXQgaW5JZHggPSB0aGlzLmdldEFjdGl2ZUlubmVyVGFiW2FJZF07DQogICAgICAvLyBsZXQgYUlkeCA9IHRoaXMuZ2V0VGFicy5maW5kSW5kZXgoeD0+IHguX2lkID09IGFJZCk7DQoNCiAgICAgIGlmKGluSWR4ICE9IDApew0KICAgICAgICBsZXQgc2l0ZSA9IHRoaXMuZ2V0VGFic1thSWRdLnNpdGVzW2luSWR4XS5zaXRlOw0KICAgICAgICBpdGVtLnNpdGUgPSBzaXRlOw0KICAgICAgfQ0KICAgICAgLy8gaXRlbS5zaXRlID0gc2l0ZTsNCiAgICAgIC8vIGl0ZW0uX2lkeCA9IHBhcnNlSW50KHRoaXMudGFiLnNwbGl0KCctJylbMV0pOw0KICAgICAgaXRlbS5rZXlJZCA9IHRoaXMuZ2V0VGFic1thSWRdLl9pZDsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRFeHBlcnRQYXBlcnMnLCBpdGVtKTsNCg0KICAgIH0sDQogICAgY2xrRG93bmxvYWRQYXBlcnMoX3NpdGUpew0KICAgICAgLy8gY29uc29sZS5sb2coJ19TSVRFJywgX3NpdGUpOw0KDQogICAgICBsZXQgYUlkID0gdGhpcy5nZXRBY3RpdmVUYWI7DQogICAgICBsZXQgX2lkeCA9IHRoaXMuZ2V0QWN0aXZlSW5uZXJUYWJbYUlkXTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCdfSURYJywgX2lkeCk7DQoNCg0KICAgICAgaWYoX2lkeCA9PSAwICl7DQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2hvd1NuYWNrJywgIk5vdCBQcm92aWRlZCBZZXQiKTsNCiAgICAgIH1lbHNlew0KICAgICAgICB0aGlzLmNhcmRMb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5nZXRUYWJzW2FJZF0NCiAgICAgICAgbGV0IF9pZCA9IHRoaXMuZ2V0VGFic1thSWRdLl9pZDsNCiAgICAgICAgLy8gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2Rvd25sb2FkRXhwZXJ0cycsIHtfaWQsIF9zaXRlLCBfaWR4LCAuLi50aGlzLm9wdGlvbnMsIC4uLnRoaXMud2VpZ2h0cywgdG90YWx9KS50aGVuKCgpPT50LmNhcmRMb2FkaW5nID0gZmFsc2UpOw0KICAgICAgICAvLyB0LiRzdG9yZS5kaXNwYXRjaCgnZ2V0RXhwZXJ0cycsIHtfaWQsIF9zaXRlLCBfaWR4LCAuLi50Lm9wdGlvbnMsIC4uLnQud2VpZ2h0cywgdG90YWx9KS4NCiAgICAgICAgLy8gbGV0IHNpdGVzID0gWy4uLnQuZ2V0VGFic1thSWRdLnNpdGVzXTsNCiAgICAgICAgLy8gc2l0ZXMuc3BsaWNlKDAsMSk7DQogICAgICAgIC8vIHNpdGVzID0gc2l0ZXMubWFwKHg9PiB4LnNpdGUpOw0KICAgICAgICAvLyBjb25zb2xlLmxvZygnU0lURVMnLCBzaXRlcyk7DQoNCiAgICAgICAgbGV0IHQgPSB0aGlzOw0KICAgICAgICAvLyBsZXQgZEZsYWcgPSB0cnVlOw0KICAgICAgICBsZXQgdG90YWw9NTA7DQogICAgICAgIHQuJHN0b3JlLmRpc3BhdGNoKCdnZXRFeHBlcnRQYXBlcnMnLCB7IGtleUlkIDogX2lkLCBzaXRlIDogX3NpdGUsIF9pZHgsIC4uLnQub3B0aW9ucywgLi4udC53ZWlnaHRzLCB0b3RhbCwgZmxhZyA6IDF9KS50aGVuKCgpPT4gdC5jYXJkTG9hZGluZyA9IGZhbHNlKTsNCiAgICAgICAgLy8gdC4kc3RvcmUuZGlzcGF0Y2goJ2dldEV4cGVydHMnLCB7X2lkLCBfc2l0ZSwgX2lkeCwgLi4udC5vcHRpb25zLCAuLi50LndlaWdodHMsIHRvdGFsLCBkRmxhZ30pLnRoZW4oDQogICAgICAgIC8vICAgKHJlc3ApPT4gew0KICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ1JFU1AnLCByZXNwKTsNCiAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKCdSRVNQJywgcmVzcCk7DQogICAgICAgIC8vICAgICBsZXQgZGF0YSA9IHJlc3AubWFwKCh4KSA9PiB7cmV0dXJuIHtBX0lEIDogeC5BX0lELCBpbnN0IDogIHguaW5zdCwgbmFtZSA6IHgubmFtZSwgcmFuayA6IHgucmFua30gfSApDQogICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnREFUQScsIGRhdGEpOw0KICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2coJ0RBVEEnLCBkYXRhKTsNCiAgICAgICAgLy8NCiAgICAgICAgLy8NCiAgICAgICAgLy8gICB9KTsNCg0KICAgICAgICAvLyB0LiRzdG9yZS5kaXNwYXRjaCgnZ2V0RXhwZXJ0cycsIHtfaWQsIF9pZHgsIC4uLnQub3B0aW9ucywgLi4udC53ZWlnaHRzLCBzaXRlc30pLnRoZW4oKCk9PnsNCiAgICAgIH0NCg0KICAgIH0sDQogICAgY2xrRG93bmxvYWRFeHBlcnRzKF9zaXRlLCB0b3RhbCl7DQogICAgICBsZXQgYUlkID0gdGhpcy5nZXRBY3RpdmVUYWI7DQogICAgICBsZXQgX2lkeCA9IHRoaXMuZ2V0QWN0aXZlSW5uZXJUYWJbYUlkXTsNCiAgICAgIGlmKF9pZHggPT0gMCApew0KICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3Nob3dTbmFjaycsICJOb3QgUHJvdmlkZWQgWWV0Iik7DQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy5jYXJkTG9hZGluZyA9IHRydWU7DQogICAgICAgIGxldCB0ID0gdGhpczsNCiAgICAgICAgbGV0IF9pZCA9IHRoaXMuZ2V0VGFic1thSWRdLl9pZDsNCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2Rvd25sb2FkRXhwZXJ0cycsIHtfaWQsIF9zaXRlLCBfaWR4LCAuLi50aGlzLm9wdGlvbnMsIC4uLnRoaXMud2VpZ2h0cywgdG90YWx9KS50aGVuKCgpPT50LmNhcmRMb2FkaW5nID0gZmFsc2UpOw0KICAgICAgICAvLyB0LiRzdG9yZS5kaXNwYXRjaCgnZ2V0RXhwZXJ0cycsIHtfaWQsIF9zaXRlLCBfaWR4LCAuLi50Lm9wdGlvbnMsIC4uLnQud2VpZ2h0cywgdG90YWx9KS4NCiAgICAgIH0NCg0KICAgIH0sDQogICAgbGNiKGxpbmspew0KICAgICAgbGluay5uYW1lID0gJ0xpbmsgJyArIGxpbmsubmFtZTsNCiAgICAgIHJldHVybiBsaW5rOw0KICAgIH0sDQogICAgY2xrUmVsYXRpb24oaXRlbSl7DQogICAgICB0aGlzLmNsa05vZGUgPSBpdGVtLm5hbWU7DQoNCg0KICAgICAgbGV0IGFJZCA9IHRoaXMuZ2V0QWN0aXZlVGFiOw0KICAgICAgbGV0IGluSWR4ID0gdGhpcy5nZXRBY3RpdmVJbm5lclRhYlthSWRdOw0KICAgICAgLy8gbGV0IGFJZHggPSB0aGlzLmdldFRhYnMuZmluZEluZGV4KHg9PiB4Ll9pZCA9PSBhSWQpOw0KDQogICAgICBpZihpbklkeCAhPSAwKXsNCiAgICAgICAgbGV0IHNpdGUgPSB0aGlzLmdldFRhYnNbYUlkXS5zaXRlc1tpbklkeF0uc2l0ZTsNCiAgICAgICAgaXRlbS5zaXRlID0gc2l0ZTsNCiAgICAgIH0NCiAgICAgIHRoaXMubGFzdFNpdGUgPSBpdGVtLnNpdGU7DQogICAgICAgIC8vIGl0ZW0NCiAgICAgIC8vIGl0ZW0uX2lkeCA9IHBhcnNlSW50KHRoaXMudGFiLnNwbGl0KCctJylbMV0pOw0KICAgICAgaXRlbS5rZXlJZCA9IHRoaXMuZ2V0VGFic1thSWRdLl9pZDsNCiAgICAgIGl0ZW0uZmxhZyA9IDE7DQogICAgICBsZXQgdGVtcFRoaXMgPSB0aGlzOw0KICAgICAgaWYodGVtcFRoaXMucmVsYXRpb25zaGlwW2FJZF0gPT0gdW5kZWZpbmVkKXsNCiAgICAgICAgLy8gdGVtcFRoaXMucmVsYXRpb25zaGlwW2FJZF0gPSB7fTsNCiAgICAgICAgdGVtcFRoaXMuJHNldCh0ZW1wVGhpcy5yZWxhdGlvbnNoaXAsIGFJZCwge30pOw0KICAgICAgfQ0KDQogICAgICAvLyBpdGVtLmZsYWcgPSAxOyAvL3RhYmxlIGNsaWNrDQogICAgICAvLyB2YXIgc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgIC8vIGxldCB0ID0gdGhpczsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRFeHBlcnRSZWxhdGlvbicsIHsuLi5pdGVtLCAuLi50aGlzLndlaWdodHN9KQ0KICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAvLyBjb25zb2xlLmxvZygnUkVTUE9OU0UnLCByZXNwb25zZSk7DQogICAgICAgIC8vIHZhciBlbGFwc2VkID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydDsNCiAgICAgICAgLy8gdC4kdnVldGlmeS5nb1RvKDk5OTkpOw0KICAgICAgICBsZXQgbGlua3MgPSBbXTsNCiAgICAgICAgY29uc3QgeyBhc1Jlc3VsdHMgOiBub2RlcyB9ID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgbm9kZXMuZm9yRWFjaCh4PT4geC5fc2l6ZSA9IHguRXNjb3JlICogMC4yKTsNCiAgICAgICAgcmVzcG9uc2UuZGF0YS5yZXN1bHRzLmZvckVhY2goKHJpdGVtKSA9PiB7DQogICAgICAgICAgbGV0IHdpZHRoID0gcml0ZW0uY291bnQgKjI7DQogICAgICAgICAgaWYod2lkdGggPiAyMCkNCiAgICAgICAgICAgIHdpZHRoID0gMjA7DQogICAgICAgICAgbGV0IGNvbG9yICA9ICIiOw0KICAgICAgICAgIGlmICh3aWR0aCA+IDUgJiYgd2lkdGggPD0gMTApDQogICAgICAgICAgY29sb3IgPSAib3JhbmdlIjsNCiAgICAgICAgICBlbHNlIGlmKHdpZHRoID4gMTEpDQogICAgICAgICAgY29sb3IgPSAicmVkIjsNCiAgICAgICAgICBsaW5rcy5wdXNoKHsNCiAgICAgICAgICAgICJzaWQiOiByaXRlbS5zb3VyY2VBSWQsDQogICAgICAgICAgICAidGlkIjogcml0ZW0udGFyZ2V0QUlkLA0KICAgICAgICAgICAgIl9jb2xvciIgOiBjb2xvciwNCiAgICAgICAgICAgIC8vICJuYW1lIjogInRlc3QiLA0KICAgICAgICAgICAgX3N2Z0F0dHJzOiB7DQogICAgICAgICAgICAgICJzdHJva2Utd2lkdGgiOiB3aWR0aCwNCg0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQoNCg0KICAgICAgICB9KTsNCiAgICAgICAgbGV0IHMgPSBpdGVtLnNpdGU7DQogICAgICAgIC8vIGxldCB0ZW1wID0gaXQNCiAgICAgICAgaWYoaW5JZHggPT0gMCkNCiAgICAgICAgICBzID0gJ0FMTCc7DQogICAgICAgIHRlbXBUaGlzLiRzZXQodGVtcFRoaXMucmVsYXRpb25zaGlwW2FJZF0sIHMsIHsNCiAgICAgICAgICBub2RlcywgbGlua3MNCiAgICAgICAgfSk7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdURU1QVEhJUy5SRUxBVElPTlNISVBbQUlEXScsIHRlbXBUaGlzLnJlbGF0aW9uc2hpcFthSWRdKTsNCg0KICAgICAgICAvLyB0ZW1wVGhpcy4kc2V0KHRlbXBUaGlzLnJlbGF0aW9uc2hpcFtpdGVtLnNpdGVdLCAnbGlua3MnLCBsaW5rcykNCg0KDQogICAgICB9KTsNCg0KICAgIH0sDQogICAgZ2V0TGFiZWwoaWR4KSB7DQogICAgICBzd2l0Y2ggKGlkeCkgew0KICAgICAgICBjYXNlIDA6DQogICAgICAgIHJldHVybiAn7LWc7Iug7ISxJzsNCiAgICAgICAgY2FzZSAxOg0KICAgICAgICByZXR1cm4gJ+2SiOyniCc7DQogICAgICAgIGNhc2UgMjoNCiAgICAgICAgcmV0dXJuICfsg53sgrDshLEnOw0KICAgICAgICBjYXNlIDM6DQogICAgICAgIHJldHVybiAn7KCV7ZmV7ISxJzsNCiAgICAgICAgY2FzZSA0Og0KICAgICAgICByZXR1cm4gJ+2YkeyXheuPhCc7DQogICAgICAgIGNhc2UgNToNCiAgICAgICAgcmV0dXJuICfquLDsl6zrj4QnOw0KICAgICAgICBjYXNlIDYgOg0KICAgICAgICByZXR1cm4gJ+yXsOq1rOyngOyGjeyEsSc7DQogICAgICB9DQogICAgfSwNCiAgICBnZXRTaXplKHNjb3JlKXsNCiAgICAgIGlmKHNjb3JlIDwgNTApDQogICAgICByZXR1cm4gMTA7DQogICAgICBlbHNlIGlmKHNjb3JlIDwgMTAwKQ0KICAgICAgcmV0dXJuIDMwOw0KICAgICAgZWxzZSBpZihzY29yZSA8IDE1MCkNCiAgICAgIHJldHVybiA1MDsNCiAgICAgIGVsc2UgaWYoc2NvcmUgPCAyMDApDQogICAgICByZXR1cm4gNzA7DQogICAgICBlbHNlDQogICAgICByZXR1cm4gMTAwOw0KDQogICAgfSwNCiAgICBnZXRTTGFiZWwoaWR4KSB7DQogICAgICBzd2l0Y2ggKGlkeCkgew0KICAgICAgICBjYXNlIDA6DQogICAgICAgIHJldHVybiAn7Jew6rWs7KeA7IaN7ISxJzsNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldFN0YXR1cyhzdGF0dXMpIHsNCiAgICAgIHN3aXRjaCAoc3RhdHVzKSB7DQogICAgICAgIGNhc2UgMDoNCiAgICAgICAgcmV0dXJuICdDcmF3bGluZycNCiAgICAgICAgY2FzZSAxOg0KICAgICAgICByZXR1cm4gJ0FuYWx5emluZycNCiAgICAgICAgY2FzZSAyOg0KICAgICAgICByZXR1cm4gJ0NvbXBsZXRlZCcNCiAgICAgICAgLy8gY2FzZSAzOg0KICAgICAgICAvLyAgIHJldHVybiAnU3RvcHBlZCcNCiAgICAgICAgLy8gY2FzZSA0Og0KICAgICAgICAvLyAgIHJldHVybiAnQ29tcGxldGVkJw0KICAgICAgfQ0KICAgIH0sDQogICAgcHJvT3JQYXAoc2l0ZSl7DQogICAgICBpZihzaXRlID09ICdOVElTJykNCiAgICAgIHJldHVybiAiUHJvamVjdHMiOw0KICAgICAgZWxzZQ0KICAgICAgcmV0dXJuICJQYXBlcnMiOw0KICAgIH0sDQogICAgaXNTaG93R29uZ21vKHNpdGUsIGlkeCl7DQogICAgICBpZihpZHggPT0gMCB8fCBpZHggPT0gMyB8fCBpZHggPT0gNCB8fCBpZHggPT0gNikNCiAgICAgICAgcmV0dXJuICBmYWxzZTsNCiAgICAgIC8vIGlmKHNpdGUgPT0gJ05USVMnICYmIGlkeCA9PSA0KQ0KICAgICAgLy8gICByZXR1cm4gZmFsc2U7DQogICAgICBlbHNlDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQogICAgaXNTaG93U2xpZGVyKHNpdGUsIGlkeCl7DQoNCiAgICAgIGlmKHNpdGUgPT0gJ05USVMnICYmIGlkeCA9PSA0KQ0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgZWxzZQ0KICAgICAgcmV0dXJuIHRydWU7DQogICAgfSwNCiAgICBnZXRUb3RhbChudW1FeHBlcnRzKXsNCiAgICAgIGlmIChudW1FeHBlcnRzID41MCkNCiAgICAgICAgcmV0dXJuIDUwOw0KICAgICAgZWxzZQ0KICAgICAgICByZXR1cm4gbnVtRXhwZXJ0czsNCiAgICB9LA0KICAgIGdldEhlYWRlcnMoc2l0ZSl7DQoNCiAgICAgIGxldCB0ZW1wSGVhZGVyID0gWy4uLnRoaXMuaGVhZGVyc107DQogICAgICBpZihzaXRlID09ICdBTEwnKXsNCiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyczsNCiAgICAgIH0NCiAgICAgIGVsc2V7DQogICAgICAgIHRlbXBIZWFkZXIuc3BsaWNlKDMsMSk7DQogICAgICAgIGlmKHNpdGUgPT0gJ05USVMnKXsNCiAgICAgICAgICB0ZW1wSGVhZGVyLnNwbGljZSg3LDEpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0ZW1wSGVhZGVyOw0KICAgICAgICAvLyBlbHNlew0KICAgICAgICAvLyAgIHJldHVybiB0ZTsNCiAgICAgICAgLy8gfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ0KDQo="},{"version":3,"sources":["Result.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2PA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Result.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\r\n\r\n  <v-container class=\"mx-auto\" >\r\n\r\n    <v-layout >\r\n      <v-flex class=\"flex-md-grow-1 flex-md-shrink-1\" >\r\n        <v-card color=\"#B3D4FB\" class=\"ma-4\">\r\n\r\n          <component ltext=\"결과 목록\" :is=\"comp\" :lgSize=\"6\" :itemsPerPage=\"5\" :page=\"$route.params.page\" v-on:tabInit=\"tabInit()\" v-on:tabScroll=\"tabScroll()\"></component>\r\n        </v-card>\r\n      </v-flex>\r\n\r\n\r\n    </v-layout>\r\n\r\n\r\n    <!-- <vue-tabs type=\"pills\">\r\n    <v-tab v-for=\"(tab, i) in tabs\" :key=\"i\">\r\n    <div slot=\"title\">{{tab}} <span @click.stop=\"removeTab(index)\" class=\"ti-close tab-close\"></span></div>\r\n    {{tab}}\r\n  </v-tab>\r\n</vue-tabs> -->\r\n<v-layout  md=\"6\">\r\n  <v-flex class=\"flex-md-grow-1 flex-shrink-1 pa-4\">\r\n\r\n    <v-tabs v-show=\"getTabs.length != 0 \" :value=\"getActiveTab\"\r\n    show-arrows\r\n    slider-color=\"none\"\r\n    class=\"elevation-2\" background-color=\"#011176\" dark\r\n\r\n    >\r\n    <v-tabs-slider></v-tabs-slider>\r\n    <v-tab v-for=\"(tab) in getTabs\"\r\n    :key=\"tab._id\"\r\n    >\r\n    {{ tab.query_keyword }}\r\n    <!-- <v-btn  small text left icon @click.stop=\"closeTab(tab._id)\">\r\n    <v-icon small @click=\"closeTab(tab._id)\">close</v-icon>\r\n  </v-btn> -->\r\n</v-tab>\r\n<div id=\"keywordtabs\">\r\n\r\n</div>\r\n<v-tab-item v-for=\"(tab, ti) in getTabs\" :key=\"tab._id\">\r\n  <template >\r\n    <v-flex >\r\n      <v-card class=\"ma-4\">\r\n        <div>\r\n          <p class=\"text-left font-weight-bold headline pt-4 pl-4\">\r\n            결과 상세\r\n          </p>\r\n          <p class=\"headline text-center\">검색 키워드 : {{  tab.query_keyword }}</p>\r\n        </div>\r\n        <v-tabs v-model=\"getActiveInnerTab[ti]\"\r\n        class=\"elevation-2\"\r\n        dark background-color=\"#011176\">\r\n        <v-tabs-slider></v-tabs-slider>\r\n        <v-tab v-for=\"(site, i) in tab.sites\"\r\n        :key=\"i\">\r\n        {{ site.site }}( {{ statusLabel[site.state]}}   : {{ site.progress }}%)\r\n\r\n      </v-tab>\r\n\r\n      <v-tab-item v-for=\"(site, si) in tab.sites\"\r\n      :key=\"si\">\r\n\r\n      <v-card flat tile color=\"#B3D4FB\">\r\n\r\n        <v-card-text class=\"text-left font-weight-bold text-h6\">가중치 설정</v-card-text>\r\n        <!-- <v-card-title class=\"subheading font-weight-bold\">{{ item.keyword }}</v-card-title> -->\r\n        <!-- <v-card-subtitle>{{ getStatus(item.status)}} </v-card-subtitle> -->\r\n        <!-- <v-divider></v-divider> -->\r\n        <!-- class=\"justify-end\" -->\r\n        <v-card-actions >\r\n\r\n\r\n\r\n          <v-container >\r\n            <v-layout>\r\n              <v-card color=\"white\" class=\"flex-grow-1 flex-shrink-0\">\r\n\r\n<!-- v-show='isShowGongmo(site.site, i)' -->\r\n                <v-row align=\"center\" justify=\"center\" v-for=\"(weight, i) in weights\" :key=\"i\" class=\"mt-2 mb-2\"\r\n\r\n                 >\r\n                  <v-col cols=\"2\" class=\"pt-0 pb-0\">\r\n                    <div>\r\n                      <v-subheader class=\"font-weight-bold text-h7 ml-2 mt-1\">\r\n                        {{weightLabel[i]}}\r\n                      </v-subheader>\r\n                    </div>\r\n                  </v-col>\r\n                  <v-col cols=\"10\" class=\"pt-0 pb-0\">\r\n                    <!-- <div> -->\r\n                    <!-- :label=\"getLabel(i)\" -->\r\n                    <!-- color=\"#011176\" -->\r\n                    <v-slider\r\n\r\n                    :value=\"weight\"\r\n                    v-show='isShowSlider(site.site, i)'\r\n                    height=\"5\"\r\n                    v-model=\"weights[i]\"\r\n                    thumb-label=\"always\" class=\"mt-5 pr-4\">\r\n                    <!-- <template slot=\"label\" slot-scope=\"props\">\r\n\r\n                    asd {{props.value}}\r\n\r\n                  </template>\r\n                  <template v-slot:label=\"item\" class=\"wslider\">\r\n                  asd{{item.value}}\r\n                </template> -->\r\n              </v-slider>\r\n              <!-- </div> -->\r\n            </v-col>\r\n            <v-row>\r\n              <v-col cols=\"12\" >\r\n                <hr class=\"ml-3 mr-3\"/>\r\n\r\n              </v-col>\r\n\r\n            </v-row>\r\n          </v-row>\r\n\r\n\r\n          <v-row>\r\n            <v-col>\r\n              <v-btn class=\"mt-2 mb-2 primary\" @click=\"getExperts(tab._id, site.site, si, site.state)\">가중치 적용</v-btn>\r\n\r\n            </v-col>\r\n          </v-row>\r\n\r\n        </v-card>\r\n\r\n      </v-layout>\r\n      <v-spacer></v-spacer>\r\n    </v-container>\r\n\r\n  </v-card-actions>\r\n\r\n</v-card>\r\n\r\n<v-card class=\"mt-5\" flat tile color=\"#B3D4FB\" :disabled=\"cardLoading\">\r\n\r\n  <v-card-text  id=\"experttable\"  class=\"text-left font-weight-bold text-h6\">전문가 정보  ( {{proOrPap(site.site) }} :\r\n    {{ transformLocale(site.data) }}\r\n    <v-icon class=\"ml-2\"\r\n    @click=\"clkDownloadPapers(site.site, site.experts)\"\r\n    >{{ mdiDownload }}</v-icon>\r\n      /\r\n     Experts :\r\n      {{transformLocale(site.experts)}}\r\n     <v-icon class=\"ml-2\"\r\n     @click=\"clkDownloadExperts(site.site, site.experts)\"\r\n     >{{ mdiDownload }}</v-icon>\r\n     )\r\n  </v-card-text>\r\n\r\n    <!-- <v-card-title class=\"subheading font-weight-bold\">{{ item.keyword }}</v-card-title> -->\r\n    <!-- <v-card-subtitle>{{ getStatus(item.status)}} </v-card-subtitle> -->\r\n    <!-- <v-divider></v-divider> -->\r\n    <!-- class=\"justify-end\" -->\r\n    <v-card-actions>\r\n\r\n      <v-container>\r\n        <v-layout>\r\n          <v-card class=\"flex-grow-1 flex-shrink-0 mb-2\">\r\n            <v-row align=\"center\" justify=\"center\">\r\n\r\n              <v-col >\r\n                <div>\r\n                  <v-data-table\r\n                  :headers=\"getHeaders(site.site)\"\r\n                  :items=\"site.lists\"\r\n                  :server-items-length=\"getTotal(site.experts)\"\r\n                  :loading=\"loading\"\r\n                  class=\"elevation-1\"\r\n                  :options.sync=\"options\"\r\n                  >\r\n                  <template v-slot:item.site=\"{ item }\" >\r\n                       <v-chip  class=\"identical pa-2\" :color=\"siteColor[item.site]\" dark>{{item.site}}</v-chip>\r\n                   </template>\r\n\r\n                   <template v-slot:item.Productivity=\"{ item }\" >\r\n                        {{item.Productivity}} ( {{item.Numpaper}} 건 )\r\n                    </template>\r\n\r\n\r\n\r\n\r\n                  <template v-slot:item.actions=\"{ item }\">\r\n                    <v-icon\r\n                    @click=\"clkDownload(item)\"\r\n                    >{{ mdiDownload }}</v-icon>\r\n                  </template>\r\n                  <template v-slot:item.actions2=\"{ item }\">\r\n                    <v-icon\r\n                    @click=\"clkRelation(item)\"\r\n                    >{{ mdiGraphql }}</v-icon>\r\n                  </template>\r\n\r\n                </v-data-table>\r\n              </div>\r\n            </v-col>\r\n\r\n\r\n\r\n\r\n          </v-row>\r\n        </v-card>\r\n      </v-layout>\r\n\r\n      <v-card flat tile id=\"expertrel\" >\r\n\r\n        <v-card-text class=\"text-left font-weight-bold text-h6\">{{clkNode}} 관계 정보</v-card-text>\r\n        <!-- v-if=\"getRelationships != undefined\"  -->\r\n        <!-- :net-nodes=\"nodes\"\r\n        :net-links=\"links\" -->\r\n        <d3-network ref=\"net\"\r\n\r\n        :net-nodes=\"getRelationships.nodes\"\r\n        :net-links=\"getRelationships.links\"\r\n\r\n        :options=\"d3_options\" @node-click=\"nodeClick\" />\r\n\r\n\r\n      </v-card>\r\n      <v-spacer></v-spacer>\r\n    </v-container>\r\n\r\n  </v-card-actions>\r\n\r\n</v-card>\r\n</v-tab-item>\r\n</v-tabs>\r\n</v-card>\r\n\r\n</v-flex>\r\n</template>\r\n</v-tab-item>\r\n\r\n\r\n</v-tabs>\r\n</v-flex>\r\n</v-layout>\r\n</v-container>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nimport History from './History.vue'\r\nimport D3Network from 'vue-d3-network'\r\nimport { mdiDownload } from '@mdi/js';\r\nimport { mdiGraphql } from '@mdi/js';\r\nimport * as easings from 'vuetify/es5/services/goto/easing-patterns'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      siteColor : {'NTIS' : 'orange', 'DBPIA' : 'red', 'SCIENCEON' : 'blue', 'KCI' :'indigo', 'SCOPUS' : 'lime', 'WOS' : 'purple'},\r\n      statusLabel : { '0' : 'Crawling', '1': 'Analyzing', '2' : 'Completed', '-1' : \"Crawling Failed\", '-2' : \"Consumer Failed\" , '-3' : \"Analyzer Failed\"},\r\n      // weightLabel : [ '품질', '생산성', '기여도'],\r\n      weightLabel : ['최신성', '품질', '생산성', '정확성', '협업도', '기여도','연구지속성'],\r\n      easing: 'easeInOutCubic',\r\n      test : 'tt',\r\n      easings: Object.keys(easings),\r\n      page : -1,\r\n      mdiDownload : mdiDownload,\r\n      mdiGraphql : mdiGraphql,\r\n      selected : [],\r\n      last : 0,\r\n      tab: 'tab-0',\r\n      tabs: 4,\r\n      comp: 'History',\r\n      items: ['전체', 'Korea', 'US', '..'],\r\n      model: ['전체'],\r\n      options: {},\r\n\r\n      weights : [], // essential factor\r\n      //    sweights : [], //selective factor\r\n      relationship : {},\r\n      clkNode : \"\",\r\n      headers: [\r\n        { text: '순위', value: 'rank', sortable: false , align: 'center'},\r\n        {\r\n          text: '이름',\r\n          align: 'start',\r\n          sortable: false,\r\n          value: 'name',\r\n          width : 200,\r\n        },\r\n        { text: '소속', value: 'inst', sortable: false , align: 'center', width : 200},\r\n        {\r\n          text: '수집 사이트', value: 'site', sortable: false , align: 'center'\r\n        },\r\n        { text: '최신성', value: 'Recentness' ,sortable: false, align: 'center'},\r\n        { text: '품질', value: 'Quality',sortable: false, align: 'center' },\r\n        { text: '생산성', value: 'Productivity' ,sortable: false, align: 'center'},\r\n        { text: '정확성', value: 'Acc' , sortable: false,align: 'center'},\r\n        { text: '협업도', value: 'Coop' , sortable: false,align: 'center'},\r\n        { text: '기여도', value: 'Contrib' , sortable: false,align: 'center'},\r\n        { text: '연구지속성', value: 'Durability' , sortable: false,align: 'center'},\r\n        { text: '총점', value: 'EScore' , sortable: false,align: 'center'},\r\n        { text: '관련데이터', value: 'actions', sortable: false , align: 'center'},\r\n        { text: '관계', value: 'actions2', sortable: false , align: 'center'}\r\n      ],\r\n      cardLoading : false,\r\n      loading: false,\r\n      canvas : false,\r\n\r\n      isComp : 2,\r\n      force:50,\r\n      fX:0.5,\r\n      fY:0.5,\r\n      fMb:true,\r\n      fC:false,\r\n      lastSite : '',\r\n      // d3_options : {\r\n      //   size : {w : 600 , h : 600},\r\n      //     force: 3000,\r\n      //     nodeSize: 20,\r\n      //     nodeLabels: true,\r\n      //     linkLabels : true,\r\n      //     // linkWidth:1,\r\n      //     canvas : false,\r\n      //     strLinks : true\r\n      //   }\r\n\r\n\r\n\r\n\r\n    }\r\n  }, //data() End\r\n\r\n  components: {\r\n    History,\r\n    D3Network,\r\n\r\n  },\r\n  watch: {\r\n    options: {\r\n      handler() {\r\n        let aId = this.getActiveTab;\r\n        let inIdx = this.getActiveInnerTab[aId];\r\n        // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n        let site = this.getTabs[aId].sites[inIdx].site;\r\n        // if( == isComp)\r\n        if(inIdx != 0)\r\n          this.getExperts(this.getTabs[aId]._id, site, inIdx, this.getTabs[aId].sites[inIdx].state);\r\n\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  mounted() {\r\n  },\r\n\r\n  created() {\r\n    this.weights = new Array(7).fill(50);\r\n    this.$store.commit(\"setIsMini\", false);\r\n    //for gongmo\r\n    // this.weights[0] = 0\r\n    // this.weights[3] = 0\r\n    // this.weights[4] = 0\r\n    // this.weights[6] = 0\r\n     // this.weights = new Array(3).fill(50);\r\n       // this.sweights = new Array(1).fill(50);\r\n  },\r\n  computed: {\r\n    getActiveInnerTab(){\r\n      return this.$store.state.activeInnerTab;\r\n    },\r\n    getActiveTab()\r\n    {\r\n      return this.$store.state.activeTab;\r\n\r\n    },\r\n    d3_options(){\r\n      return {force: 3000,\r\n        nodeSize: 20,\r\n        nodeLabels: true,\r\n        linkLabels : false,\r\n        linkWidth:1,\r\n        canvas : this.canvas,\r\n        offset : {\r\n          x : 0,\r\n          y : 0,\r\n        },\r\n        strLinks : true,\r\n        // strLinks : true,\r\n      }\r\n    },\r\n    getRelationships(){\r\n\r\n\r\n      let aId = this.getActiveTab\r\n      let inIdx = this.getActiveInnerTab[aId];\r\n      // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n      let site = this.getTabs[aId].sites[inIdx].site;\r\n\r\n      if(this.relationship[aId] == undefined || this.relationship[aId][site] == undefined)\r\n      return {nodes : [], links : []}\r\n\r\n      return this.relationship[aId][site];\r\n\r\n    },\r\n\r\n    getWeigths(){\r\n      return this.weights;\r\n    },\r\n    getTabs() {\r\n      // this.$store.state.tabs;\r\n\r\n      return this.$store.state.tabs;\r\n    },\r\n    isShowDetail(){\r\n      return this.getTab._id === -1;\r\n    },\r\n    // getTabWeights : {\r\n    //   get: function () {\r\n    //     let site = Object.keys(this.getTab.history.sites)[this.tab.split('-')[1]]\r\n    //     let weights = this.getTab[site].weights\r\n    //\r\n    //       return this.getTab[site].weights\r\n    //   },\r\n    //   set: function (value) {\r\n    //     let site = Object.keys(this.getTab.history.sites)[this.tab.split('-')[1]]\r\n    //     this.$store.state.tab[site].weights = value\r\n    //   }\r\n    // }\r\n  },\r\n  methods: {\r\n    transformLocale(v){\r\n      // v.experts\r\n      if (v !== undefined)\r\n        return v.toLocaleString(\"kr-KR\");\r\n        // console.log('V.EXPERTS', v);\r\n      return \"\";\r\n      // return parseInt(v.experts).toLocalString(\"kr-KR\")\r\n    },\r\n    closeTab(id) {\r\n      this.$store.commit('closeTab', id)\r\n    },\r\n\r\n    getExperts(_id, _site, _idx, _state){\r\n\r\n      if(_state != this.isComp){\r\n        this.$store.commit('showSnack', \"Now \"+ this.getStatus(_state));\r\n        return;\r\n      }\r\n\r\n      //this.last  = _flag;\r\n      this.loading = true;\r\n      getExpertFromServer(this, _id, _site, _idx).then(() => {\r\n        this.loading = false;\r\n        // this.$vuetify.goTo('#experttable');\r\n        // this.$vuetify.goTo(1600);\r\n\r\n      });\r\n\r\n      function getExpertFromServer(t, _id, _site, _idx){\r\n        return new Promise((resolve) => {\r\n          let aId = t.getActiveTab;\r\n\r\n\r\n          if(_idx === 0){\r\n            // t.$store.commit('showSnack', \"Not Provided Yet\");\r\n            let sites = [...t.getTabs[aId].sites];\r\n             sites.splice(0,1);\r\n            sites = sites.map(x=> x.site);\r\n            // console.log('SITES', sites);\r\n\r\n            t.$store.dispatch('getExperts', {_id, _idx, ...t.options, ...t.weights, sites}).then(()=>{\r\n\r\n              resolve();\r\n            });\r\n            // resolve();\r\n          }else{\r\n\r\n            let total = 0;\r\n            if(t.options.itemsPerPage == -1){\r\n              let inIdx = t.getActiveInnerTab[aId];\r\n              // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n              total = t.getTabs[aId].sites[inIdx].experts;\r\n            }\r\n\r\n            t.$store.dispatch('getExperts', {_id, _site, _idx, ...t.options, ...t.weights, total}).then(()=>{\r\n              resolve();\r\n            });\r\n\r\n          }\r\n\r\n        });\r\n      }\r\n\r\n    },\r\n    tabInit(){\r\n      this.tab = 'tab-0';\r\n      // console.log(\"asd\")\r\n\r\n    },\r\n    tabScroll(){\r\n      this.$vuetify.goTo(800);\r\n    },\r\n    nodeClick(event, node){\r\n      let aId = this.getActiveTab;\r\n      let inIdx = this.getActiveInnerTab[aId];\r\n      // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n      let view_site = this.getTabs[aId].sites[inIdx].site;\r\n\r\n      let site = this.lastSite;\r\n\r\n\r\n      if(node._color !== 'orange'){\r\n        let A_ID = node.id;\r\n        let keyId = this.getTabs[aId]._id;\r\n        let req = {A_ID, site , keyId, ...this.weights};\r\n        node = Object.assign(node, {_color : \"orange\"});\r\n\r\n        this.$set(this.relationship[aId][view_site].nodes, node.index, node);\r\n        // var start = new Date().getTime();\r\n        this.$store.dispatch('getExpertRelation', req).then(response =>{\r\n          // var elapsed = new Date().getTime() - start;\r\n          let links = [];\r\n          let { asResults : nodes } = response.data;\r\n\r\n          nodes.forEach(x=> x._size = x.Escore * 0.2);\r\n          // this.relationship[aId][site];\r\n          let tempR = this.relationship[aId][view_site];\r\n          nodes = nodes.filter(x => tempR.nodes.findIndex(y => y.id === x.id) == -1);\r\n\r\n          response.data.results.forEach((ritem) => {\r\n            let width = ritem.count *2;\r\n\r\n            let color  = \"\";\r\n            if(width > 20)\r\n              width = 20;\r\n            if (width > 5 && width <= 10)\r\n            color = \"orange\";\r\n            else if(width > 11)\r\n            color = \"red\";\r\n            links.push({\r\n              \"sid\": ritem.sourceAId,\r\n              \"tid\": ritem.targetAId,\r\n              \"_color\" : color,\r\n              // \"label\" : \"test\"\r\n              // \"name\": ritem.count,\r\n              _svgAttrs: {\r\n                \"stroke-width\": width\r\n              }\r\n            })\r\n          });\r\n\r\n          tempR.nodes = tempR.nodes.concat(nodes);\r\n\r\n          tempR.links = tempR.links.concat(links);\r\n\r\n        });\r\n        // if(node.id == 1){\r\n        // this.relationship[site].nodes.push({id: 10, name :\"Test\"});\r\n        // this.relationship[site].nodes.push({id: 1, name :\"Test\"});\r\n        // this.relationship[site].links.push({sid : 10, tid : 1, name : \"Test\" });\r\n        // }\r\n      }\r\n\r\n    },\r\n    // linkClick(event, link){\r\n    //   // link = Object.assign(link, {_color : \"orange\", name:\"\"})\r\n    //   // this.$set(this.links, link.index, link)\r\n    // },\r\n    clkDownload(item){\r\n      // item.query_keyword = this.getTab.query_keyword;\r\n\r\n      let aId = this.getActiveTab;\r\n      let inIdx = this.getActiveInnerTab[aId];\r\n      // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n\r\n      if(inIdx != 0){\r\n        let site = this.getTabs[aId].sites[inIdx].site;\r\n        item.site = site;\r\n      }\r\n      // item.site = site;\r\n      // item._idx = parseInt(this.tab.split('-')[1]);\r\n      item.keyId = this.getTabs[aId]._id;\r\n      this.$store.dispatch('getExpertPapers', item);\r\n\r\n    },\r\n    clkDownloadPapers(_site){\r\n      // console.log('_SITE', _site);\r\n\r\n      let aId = this.getActiveTab;\r\n      let _idx = this.getActiveInnerTab[aId];\r\n      // console.log('_IDX', _idx);\r\n\r\n\r\n      if(_idx == 0 ){\r\n        this.$store.commit('showSnack', \"Not Provided Yet\");\r\n      }else{\r\n        this.cardLoading = true;\r\n        this.getTabs[aId]\r\n        let _id = this.getTabs[aId]._id;\r\n        // this.$store.dispatch('downloadExperts', {_id, _site, _idx, ...this.options, ...this.weights, total}).then(()=>t.cardLoading = false);\r\n        // t.$store.dispatch('getExperts', {_id, _site, _idx, ...t.options, ...t.weights, total}).\r\n        // let sites = [...t.getTabs[aId].sites];\r\n        // sites.splice(0,1);\r\n        // sites = sites.map(x=> x.site);\r\n        // console.log('SITES', sites);\r\n\r\n        let t = this;\r\n        // let dFlag = true;\r\n        let total=50;\r\n        t.$store.dispatch('getExpertPapers', { keyId : _id, site : _site, _idx, ...t.options, ...t.weights, total, flag : 1}).then(()=> t.cardLoading = false);\r\n        // t.$store.dispatch('getExperts', {_id, _site, _idx, ...t.options, ...t.weights, total, dFlag}).then(\r\n        //   (resp)=> {\r\n        //     console.log('RESP', resp);\r\n        //     // console.log('RESP', resp);\r\n        //     let data = resp.map((x) => {return {A_ID : x.A_ID, inst :  x.inst, name : x.name, rank : x.rank} } )\r\n        //     console.log('DATA', data);\r\n        //     // console.log('DATA', data);\r\n        //\r\n        //\r\n        //   });\r\n\r\n        // t.$store.dispatch('getExperts', {_id, _idx, ...t.options, ...t.weights, sites}).then(()=>{\r\n      }\r\n\r\n    },\r\n    clkDownloadExperts(_site, total){\r\n      let aId = this.getActiveTab;\r\n      let _idx = this.getActiveInnerTab[aId];\r\n      if(_idx == 0 ){\r\n        this.$store.commit('showSnack', \"Not Provided Yet\");\r\n      }else{\r\n        this.cardLoading = true;\r\n        let t = this;\r\n        let _id = this.getTabs[aId]._id;\r\n        this.$store.dispatch('downloadExperts', {_id, _site, _idx, ...this.options, ...this.weights, total}).then(()=>t.cardLoading = false);\r\n        // t.$store.dispatch('getExperts', {_id, _site, _idx, ...t.options, ...t.weights, total}).\r\n      }\r\n\r\n    },\r\n    lcb(link){\r\n      link.name = 'Link ' + link.name;\r\n      return link;\r\n    },\r\n    clkRelation(item){\r\n      this.clkNode = item.name;\r\n\r\n\r\n      let aId = this.getActiveTab;\r\n      let inIdx = this.getActiveInnerTab[aId];\r\n      // let aIdx = this.getTabs.findIndex(x=> x._id == aId);\r\n\r\n      if(inIdx != 0){\r\n        let site = this.getTabs[aId].sites[inIdx].site;\r\n        item.site = site;\r\n      }\r\n      this.lastSite = item.site;\r\n        // item\r\n      // item._idx = parseInt(this.tab.split('-')[1]);\r\n      item.keyId = this.getTabs[aId]._id;\r\n      item.flag = 1;\r\n      let tempThis = this;\r\n      if(tempThis.relationship[aId] == undefined){\r\n        // tempThis.relationship[aId] = {};\r\n        tempThis.$set(tempThis.relationship, aId, {});\r\n      }\r\n\r\n      // item.flag = 1; //table click\r\n      // var start = new Date().getTime();\r\n      // let t = this;\r\n      this.$store.dispatch('getExpertRelation', {...item, ...this.weights})\r\n      .then(response => {\r\n        // console.log('RESPONSE', response);\r\n        // var elapsed = new Date().getTime() - start;\r\n        // t.$vuetify.goTo(9999);\r\n        let links = [];\r\n        const { asResults : nodes } = response.data;\r\n        nodes.forEach(x=> x._size = x.Escore * 0.2);\r\n        response.data.results.forEach((ritem) => {\r\n          let width = ritem.count *2;\r\n          if(width > 20)\r\n            width = 20;\r\n          let color  = \"\";\r\n          if (width > 5 && width <= 10)\r\n          color = \"orange\";\r\n          else if(width > 11)\r\n          color = \"red\";\r\n          links.push({\r\n            \"sid\": ritem.sourceAId,\r\n            \"tid\": ritem.targetAId,\r\n            \"_color\" : color,\r\n            // \"name\": \"test\",\r\n            _svgAttrs: {\r\n              \"stroke-width\": width,\r\n\r\n            }\r\n          })\r\n\r\n\r\n        });\r\n        let s = item.site;\r\n        // let temp = it\r\n        if(inIdx == 0)\r\n          s = 'ALL';\r\n        tempThis.$set(tempThis.relationship[aId], s, {\r\n          nodes, links\r\n        });\r\n        // console.log('TEMPTHIS.RELATIONSHIP[AID]', tempThis.relationship[aId]);\r\n\r\n        // tempThis.$set(tempThis.relationship[item.site], 'links', links)\r\n\r\n\r\n      });\r\n\r\n    },\r\n    getLabel(idx) {\r\n      switch (idx) {\r\n        case 0:\r\n        return '최신성';\r\n        case 1:\r\n        return '품질';\r\n        case 2:\r\n        return '생산성';\r\n        case 3:\r\n        return '정확성';\r\n        case 4:\r\n        return '협업도';\r\n        case 5:\r\n        return '기여도';\r\n        case 6 :\r\n        return '연구지속성';\r\n      }\r\n    },\r\n    getSize(score){\r\n      if(score < 50)\r\n      return 10;\r\n      else if(score < 100)\r\n      return 30;\r\n      else if(score < 150)\r\n      return 50;\r\n      else if(score < 200)\r\n      return 70;\r\n      else\r\n      return 100;\r\n\r\n    },\r\n    getSLabel(idx) {\r\n      switch (idx) {\r\n        case 0:\r\n        return '연구지속성';\r\n      }\r\n    },\r\n    getStatus(status) {\r\n      switch (status) {\r\n        case 0:\r\n        return 'Crawling'\r\n        case 1:\r\n        return 'Analyzing'\r\n        case 2:\r\n        return 'Completed'\r\n        // case 3:\r\n        //   return 'Stopped'\r\n        // case 4:\r\n        //   return 'Completed'\r\n      }\r\n    },\r\n    proOrPap(site){\r\n      if(site == 'NTIS')\r\n      return \"Projects\";\r\n      else\r\n      return \"Papers\";\r\n    },\r\n    isShowGongmo(site, idx){\r\n      if(idx == 0 || idx == 3 || idx == 4 || idx == 6)\r\n        return  false;\r\n      // if(site == 'NTIS' && idx == 4)\r\n      //   return false;\r\n      else\r\n        return true;\r\n    },\r\n    isShowSlider(site, idx){\r\n\r\n      if(site == 'NTIS' && idx == 4)\r\n      return false;\r\n      else\r\n      return true;\r\n    },\r\n    getTotal(numExperts){\r\n      if (numExperts >50)\r\n        return 50;\r\n      else\r\n        return numExperts;\r\n    },\r\n    getHeaders(site){\r\n\r\n      let tempHeader = [...this.headers];\r\n      if(site == 'ALL'){\r\n        return this.headers;\r\n      }\r\n      else{\r\n        tempHeader.splice(3,1);\r\n        if(site == 'NTIS'){\r\n          tempHeader.splice(7,1);\r\n        }\r\n        return tempHeader;\r\n        // else{\r\n        //   return te;\r\n        // }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n<style src=\"vue-d3-network/dist/vue-d3-network.css\"></style>\r\n<style lang=\"css\" scoped>\r\n@import url('https://fonts.googleapis.com/css?family=PT+Sans');\r\n\r\nbody{\r\n  font-family: 'PT Sans', sans-serif;\r\n  background-color: #eee;\r\n}\r\n.title{\r\n  position:absolute;\r\n  text-align: center;\r\n  left: 2em;\r\n}\r\nh1,a{\r\n  color: #1aad8d;\r\n  text-decoration: none;\r\n}\r\n\r\nul.menu {\r\n  list-style: none;\r\n  position: absolute;\r\n  z-index: 100;\r\n  min-width: 20em;\r\n  text-align: left;\r\n}\r\nul.menu li{\r\n  margin-top: 1em;\r\n  position: relative;\r\n}\r\n\r\n#m-end path, #m-start{\r\n  fill: rgba(18, 120, 98, 0.8);\r\n}\r\n.node-label{\r\n  font-size: .5em;\r\n}\r\n.link-label{\r\n  fill: purple;\r\n  transform: translate(0,.5em);\r\n  font-size: .8em;\r\n}\r\n.node-hover{\r\n  stroke : #ffffff !important;\r\n}\r\n\r\n>>>.v-slider__thumb {\r\n  height: 20px;\r\n  width: 20px;\r\n}\r\n\r\n>>>.v-slider--horizontal .v-slider__track-container {\r\n  height: 5px;\r\n}\r\n</style>\r\n"]}]}